{"meta":{"version":1,"warehouse":"1.0.2"},"models":{"Asset":[{"_id":"themes/jacman/source/js/totop.js","path":"js/totop.js","modified":0},{"_id":"themes/jacman/source/js/jquery.qrcode-0.12.0.min.js","path":"js/jquery.qrcode-0.12.0.min.js","modified":0},{"_id":"themes/jacman/source/js/jquery.imagesloaded.min.js","path":"js/jquery.imagesloaded.min.js","modified":0},{"_id":"themes/jacman/source/js/jquery-2.0.3.min.js","path":"js/jquery-2.0.3.min.js","modified":0},{"_id":"themes/jacman/source/js/gallery.js","path":"js/gallery.js","modified":0},{"_id":"themes/jacman/source/img/scrollup.png","path":"img/scrollup.png","modified":0},{"_id":"themes/jacman/source/img/logo.png","path":"img/logo.png","modified":0},{"_id":"themes/jacman/source/img/jacman.jpg","path":"img/jacman.jpg","modified":0},{"_id":"themes/jacman/source/img/favicon.ico","path":"img/favicon.ico","modified":0},{"_id":"themes/jacman/source/img/cc-zero.svg","path":"img/cc-zero.svg","modified":0},{"_id":"themes/jacman/source/img/cc-by.svg","path":"img/cc-by.svg","modified":0},{"_id":"themes/jacman/source/img/cc-by-sa.svg","path":"img/cc-by-sa.svg","modified":0},{"_id":"themes/jacman/source/img/cc-by-nd.svg","path":"img/cc-by-nd.svg","modified":0},{"_id":"themes/jacman/source/img/cc-by-nc.svg","path":"img/cc-by-nc.svg","modified":0},{"_id":"themes/jacman/source/img/cc-by-nc-sa.svg","path":"img/cc-by-nc-sa.svg","modified":0},{"_id":"themes/jacman/source/img/cc-by-nc-nd.svg","path":"img/cc-by-nc-nd.svg","modified":0},{"_id":"themes/jacman/source/img/banner.jpg","path":"img/banner.jpg","modified":0},{"_id":"themes/jacman/source/img/author.jpg","path":"img/author.jpg","modified":0},{"_id":"themes/jacman/source/font/fontdiao.woff","path":"font/fontdiao.woff","modified":0},{"_id":"themes/jacman/source/font/fontdiao.ttf","path":"font/fontdiao.ttf","modified":0},{"_id":"themes/jacman/source/font/fontdiao.svg","path":"font/fontdiao.svg","modified":0},{"_id":"themes/jacman/source/font/fontdiao.eot","path":"font/fontdiao.eot","modified":0},{"_id":"themes/jacman/source/font/fontawesome-webfont.woff","path":"font/fontawesome-webfont.woff","modified":0},{"_id":"themes/jacman/source/font/fontawesome-webfont.ttf","path":"font/fontawesome-webfont.ttf","modified":0},{"_id":"themes/jacman/source/font/fontawesome-webfont.svg","path":"font/fontawesome-webfont.svg","modified":0},{"_id":"themes/jacman/source/font/fontawesome-webfont.eot","path":"font/fontawesome-webfont.eot","modified":0},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.woff","path":"font/coveredbyyourgrace-webfont.woff","modified":0},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.ttf","path":"font/coveredbyyourgrace-webfont.ttf","modified":0},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.svg","path":"font/coveredbyyourgrace-webfont.svg","modified":0},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.eot","path":"font/coveredbyyourgrace-webfont.eot","modified":0},{"_id":"themes/jacman/source/font/FontAwesome.otf","path":"font/FontAwesome.otf","modified":0},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.pack.js","path":"fancybox/jquery.fancybox.pack.js","modified":0},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.js","path":"fancybox/jquery.fancybox.js","modified":0},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.css","path":"fancybox/jquery.fancybox.css","modified":0},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-thumbs.js","path":"fancybox/helpers/jquery.fancybox-thumbs.js","modified":0},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-thumbs.css","path":"fancybox/helpers/jquery.fancybox-thumbs.css","modified":0},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-media.js","path":"fancybox/helpers/jquery.fancybox-media.js","modified":0},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-buttons.js","path":"fancybox/helpers/jquery.fancybox-buttons.js","modified":0},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-buttons.css","path":"fancybox/helpers/jquery.fancybox-buttons.css","modified":0},{"_id":"themes/jacman/source/fancybox/helpers/fancybox_buttons.png","path":"fancybox/helpers/fancybox_buttons.png","modified":0},{"_id":"themes/jacman/source/fancybox/fancybox_sprite@2x.png","path":"fancybox/fancybox_sprite@2x.png","modified":0},{"_id":"themes/jacman/source/fancybox/fancybox_sprite.png","path":"fancybox/fancybox_sprite.png","modified":0},{"_id":"themes/jacman/source/fancybox/fancybox_overlay.png","path":"fancybox/fancybox_overlay.png","modified":0},{"_id":"themes/jacman/source/fancybox/fancybox_loading@2x.gif","path":"fancybox/fancybox_loading@2x.gif","modified":0},{"_id":"themes/jacman/source/fancybox/fancybox_loading.gif","path":"fancybox/fancybox_loading.gif","modified":0},{"_id":"themes/jacman/source/fancybox/blank.gif","path":"fancybox/blank.gif","modified":0},{"_id":"themes/jacman/source/css/style.styl","path":"css/style.styl","modified":0}],"Cache":[{"_id":"source/_posts/article/cache/redis使用手记.md","shasum":"666bf08a8b55d39e28b33f538e5609625cdbe9b7","modified":1441601477573},{"_id":"source/_posts/article/cache/redis单机多实例部署.md","shasum":"83d9ca0a2b69061841f99a5d8ec744f8ff665141","modified":1441599782265},{"_id":"source/_posts/article/database/mysql数据库命令小记.md","shasum":"74aaac595848936e7a62f0a71d317555b168a3b5","modified":1437122236216},{"_id":"source/_posts/article/git/git命令小记.md","shasum":"75b3d0773c01d20a38814ae4fc983f56e1353ea7","modified":1437124093820},{"_id":"source/_posts/article/git/git拉取submodule.md","shasum":"37764ec946a6bf39116026b9c5c3c905fc4a2e89","modified":1443067988267},{"_id":"source/_posts/article/git/如何使用git回退部分修改.md","shasum":"ea7d4295d4360914a53dfed947252f41d2cf9a63","modified":1437122276272},{"_id":"source/_posts/article/git/推送本地git仓库.md","shasum":"59324e768854ed9709b10f284e7a468bbdd80c02","modified":1437122292872},{"_id":"source/_posts/article/hexo/hello-world.md","shasum":"774b507901d9b17991ace2a70263b6dd6d11999a","modified":1437100045589},{"_id":"source/_posts/article/hexo/hexo搭建github博客.md","shasum":"8ec6a95a5aeceac42d052f4a44ca68992995eb5f","modified":1437122413968},{"_id":"source/_posts/article/java/开发工具问题集锦.md","shasum":"92f37d8bd23fa533b06ee7787ec099aa303190b2","modified":1437122337324},{"_id":"source/_posts/article/java/服务器问题集锦.md","shasum":"cf2c8611c8d9fb9dedff5fffc467c0ac21589672","modified":1437122318852},{"_id":"source/_posts/article/java/项目开发问题集锦.md","shasum":"47c05647a4b81d552fbc0974ac3c9d648c4d3a80","modified":1437122357312},{"_id":"source/_posts/article/jenkins/jenkins中文乱码&服务启动.md","shasum":"713218074230dfed4253f184c339020d6dc3ba5d","modified":1438668413978},{"_id":"source/_posts/article/jenkins/jenkins任务等待下一次可用执行.md","shasum":"03d58efb144c863f51e672c0831cb1e8a3110db1","modified":1438669049222},{"_id":"source/_posts/article/jenkins/jenkins节点重启脚本.md","shasum":"9404d9fe87128476b7eeb1d00ca876a5d4947296","modified":1438683640047},{"_id":"source/_posts/article/jenkins/jenkin插件buildpipeline数值解析异常.md","shasum":"46c6644a22d38ef52c5cd59609651c5186b73677","modified":1438670046758},{"_id":"source/_posts/article/linux/Linux命令小记.md","shasum":"60e30d24b9edc487e6361557b90a71bf2c37b6a8","modified":1441593498620},{"_id":"source/_posts/article/linux/Linux安装极点五笔的方法.md","shasum":"86868dc443e8ee5303f3601c2750ccd211c2c752","modified":1437122372052},{"_id":"source/_posts/article/linux/Ubuntu更改截图默认保存位置.md","shasum":"da4aa5e142a715ad59062fbbea6b003e1da7b4b8","modified":1437969127197},{"_id":"source/_posts/article/linux/linux安装nginx.md","shasum":"2d2c96808600c70377073957a737fb682d5128f3","modified":1437461829434},{"_id":"source/_posts/article/linux/ubuntu如何使用抓包工具.md","shasum":"ab3e14c7cdc8cd0a7f60103bfb09cf17f479d772","modified":1437648317050},{"_id":"source/_posts/article/linux/ubuntu装机软件.md","shasum":"ddb338cb5a91e0cad62d5f1a87d55bafb405fd5a","modified":1437628845333},{"_id":"source/_posts/article/other/在线网站性能测试工具.md","shasum":"f37cc0a53c9834cfdfccb9b2a465463db96ccfc6","modified":1437119248232},{"_id":"source/_posts/article/spring/spring mvc service实例化二次问题.md","shasum":"89c22abee3aa5bea62b69d229d46248315b89eea","modified":1437122430920},{"_id":"source/_posts/article/spring/spring整合实践 - velocity.md","shasum":"4e4e561c3addc16eed2bf37f3e0597fb0d77c18d","modified":1437122489244},{"_id":"source/_posts/article/spring/spring特性实践 - AOP.md","shasum":"9dbef1ffc7a99006a72eeeeda7c711b21b8d7d87","modified":1437122442568},{"_id":"source/_posts/article/velocity/找不到自定义的velocity宏资源文件macro.vm.md","shasum":"7b439e80c4d8d818b0c28b1ff1290af604fa60ab","modified":1437122501508},{"_id":"source/_posts/article/web/自定义taglib.md","shasum":"cfd1a313ef0455be8ae95d9b89f4d5a8c06b0b87","modified":1437122510740},{"_id":"source/_posts/asserts/fiddler proxy settings.png","shasum":"7008573edd077718f9990efe18166f9a694b35a0","modified":1437647285390},{"_id":"source/_posts/asserts/ubuntu使用fiddler代理.png","shasum":"db76a37ef8b4adccdddf84163c20ae9dbd1e4b3e","modified":1437647734042},{"_id":"source/about/index.md","shasum":"87e5174b5155589a4a391a6445c64518f42c8a54","modified":1437121807232},{"_id":"themes/jacman/LICENSE","shasum":"931516aa36c53eb7843c83d82662eb50cc3c4367","modified":1437101750969},{"_id":"themes/jacman/README.md","shasum":"38698c732ca2c0fa48de89cfee9859bc09e74fd4","modified":1437101750969},{"_id":"themes/jacman/README_zh.md","shasum":"ee9eeb2b72e5597a3550d59d231f443d990d3115","modified":1437101750969},{"_id":"themes/jacman/_config.yml","shasum":"a23fa5725518b704f94b8b89b12668ca8bce402b","modified":1438742080450},{"_id":"themes/jacman/languages/default.yml","shasum":"ad0de3e82c7fc238cc067ffc37359b1420aef6b3","modified":1437101750969},{"_id":"themes/jacman/languages/zh-CN.yml","shasum":"5e4ac19d7b2bbf0d5b5aa55d33653380abda8b9a","modified":1437101750969},{"_id":"themes/jacman/languages/zh-TW.yml","shasum":"41c112162d79b4d3f97b417c7cd6ca6d70419ef2","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/after_footer.ejs","shasum":"806dc4349387eec9179000ad7c9fef4023a72aab","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/analytics.ejs","shasum":"fd004beb8d4500afd5fb3b3871a95afa2a375f16","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/archive.ejs","shasum":"2c7395e7563fe016521712a645c28a13f952d52a","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/article.ejs","shasum":"44901b6575221bdace25e0f4f57596b04cc02b59","modified":1437118372968},{"_id":"themes/jacman/layout/_partial/article_row.ejs","shasum":"4cb855d91ece7f67b2ca0992fffa55472d0b9c93","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/categories.ejs","shasum":"8a52d0344d5bce1925cf586ed73c11192925209b","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/footer.ejs","shasum":"75fb02860044bbbbf2d6d738d66bd8c22924414c","modified":1437640496942},{"_id":"themes/jacman/layout/_partial/head.ejs","shasum":"7582bf116efebfe958af629ecdefcfbdacdd0a0c","modified":1437129811163},{"_id":"themes/jacman/layout/_partial/header.ejs","shasum":"ff83dbf711b17449e7d3e4c6a044f123507ca486","modified":1437129532807},{"_id":"themes/jacman/layout/_partial/mathjax.ejs","shasum":"d42994ac696f52ba99c1cbac382cd76d5b04a3e8","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/pagination.ejs","shasum":"6146ac37dfb4f8613090bc52b3fc8cfa911a186a","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/article.ejs","shasum":"5125317359b4e0794159719a8354bf85ee770d39","modified":1437118508156},{"_id":"themes/jacman/layout/_partial/post/catetags.ejs","shasum":"0e37bababc8f4659f5b59a552a946b46d89e4158","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/comment.ejs","shasum":"c88bc8f5805173920a5fdd7e9234a850e3d8e151","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/footer.ejs","shasum":"b12ec08a5845a3d8c01257614f1dfead879c87d2","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/gallery.ejs","shasum":"fafc2501d7e65983b0f5c2b58151ca12e57c0574","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/header.ejs","shasum":"36a705942b691abe0d643ea8afa339981b32f6f2","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/jiathis.ejs","shasum":"d7f5960039ac74924559ab6ba03c64457b8f0966","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/post/pagination.ejs","shasum":"7de9c07a4c968429a8088c31a28b7f3a993ded1b","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/search.ejs","shasum":"1083824a6c6c3df02767f2f3b727aee78ebb76ec","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/sidebar.ejs","shasum":"13c922777f1a292eaf28314f47e812c36f2698b7","modified":1438740207014},{"_id":"themes/jacman/layout/_partial/tags.ejs","shasum":"b33b2b5d08f1d53a8de25a95f660f7f1cea7b3cb","modified":1437101750969},{"_id":"themes/jacman/layout/_partial/tinysou_search.ejs","shasum":"06ecddc8a9d40b480fe2e958af1dab857a9d5441","modified":1437101750973},{"_id":"themes/jacman/layout/_partial/totop.ejs","shasum":"bea5bb7cb9350b8af7d97a8d223af63a5b30ab78","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/archive.ejs","shasum":"39ea6b7888406fbd1b4cf236ebd718e881493374","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/category.ejs","shasum":"c1fae96b5053da021bcc04ab2ce5c2c8d30de8a2","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/douban.ejs","shasum":"94ce1fb7a1143f34ac1365924b00cae64e1a111e","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/links.ejs","shasum":"e49868063439c2092cdf9a8ec82cc295b0e42f66","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/recent-comments.ejs","shasum":"390051a62563f7830607e00249c15eca2afc2be6","modified":1438741454726},{"_id":"themes/jacman/layout/_widget/recent-visitors.ejs","shasum":"f69bc988e8e78bf7c076489affcfb0ed2c5df1b2","modified":1438740862414},{"_id":"themes/jacman/layout/_widget/rss.ejs","shasum":"0a4b5f2a2e36a1d504fe2e7c6c8372cbb4628aab","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/tag.ejs","shasum":"7e82ad9c916b9ce871b2f65ce8f283c5ba47947b","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/tagcloud.ejs","shasum":"10a1001189d5c28ce6d42494563b9637c302b454","modified":1437101750973},{"_id":"themes/jacman/layout/_widget/weibo.ejs","shasum":"a31c2b223d0feb2a227e203cac9e5d13b7d328a8","modified":1437101750973},{"_id":"themes/jacman/layout/archive.ejs","shasum":"a18842e3d719fe3ca9b977a6995f8facc75c8673","modified":1437101750973},{"_id":"themes/jacman/layout/category.ejs","shasum":"9b740fc33f6f028df60f0bc4312bf3ebd03aa8ea","modified":1437101750973},{"_id":"themes/jacman/layout/index.ejs","shasum":"75cef2172c286994af412e11ab7f4f5a0daaf1f5","modified":1437101750973},{"_id":"themes/jacman/layout/layout.ejs","shasum":"5b4289a4526899809b9c2facea535367ff51ba2b","modified":1437101750973},{"_id":"themes/jacman/layout/page.ejs","shasum":"bd6bbf2ea8e183bd835867ff617dc6366b56748c","modified":1437101750973},{"_id":"themes/jacman/layout/post.ejs","shasum":"3114134775bdde5a83cf14feb019606fa2b2b2be","modified":1437101750973},{"_id":"themes/jacman/layout/tag.ejs","shasum":"45150a2365768b6b67880193c9264ad2bb4814db","modified":1437101750973},{"_id":"themes/jacman/scripts/fancybox.js","shasum":"aa411cd072399df1ddc8e2181a3204678a5177d9","modified":1437101750973},{"_id":"themes/jacman/source/css/_base/font.styl","shasum":"c8a0faf43b08e37ad07a5669db76d595da966159","modified":1437101750973},{"_id":"themes/jacman/source/css/_base/highlight/highlight.styl","shasum":"91b62bfc58390b0d5db782a75be6965ee3665eb3","modified":1437101750973},{"_id":"themes/jacman/source/css/_base/highlight/theme.styl","shasum":"e3a59bd427ba37a54ead9eeba9a5356b3f720a48","modified":1437101750973},{"_id":"themes/jacman/source/css/_base/public.styl","shasum":"a29e4a4fbc288323b7f3ca2e501a6609e5646e2f","modified":1437101750973},{"_id":"themes/jacman/source/css/_base/variable.styl","shasum":"cb652eb83c28a208743fabab92de896f8b7cbf7b","modified":1437101750973},{"_id":"themes/jacman/source/css/_partial/article.styl","shasum":"c69641b4a34a8c62986b335414413dbde26de25e","modified":1437101750973},{"_id":"themes/jacman/source/css/_partial/aside.styl","shasum":"971e24f09ef08ea55a4031443c64b42120156d87","modified":1438741172086},{"_id":"themes/jacman/source/css/_partial/duoshuo.styl","shasum":"e85f1192283f043115c272a9deb3cb6ced793990","modified":1437101750973},{"_id":"themes/jacman/source/css/_partial/footer.styl","shasum":"1911613a19b605a58f801c21b03b5d4c83b90f9c","modified":1437101750973},{"_id":"themes/jacman/source/css/_partial/gallery.styl","shasum":"7246809f4ce3166ec1b259bf475cae1a48e29aad","modified":1437101750973},{"_id":"themes/jacman/source/css/_partial/header.styl","shasum":"5121ceb712be3f2dde98b8b6e589b546e19eab8f","modified":1437101750973},{"_id":"themes/jacman/source/css/_partial/helper.styl","shasum":"1136600932b97534b88465bf05ef313630b2de3d","modified":1437101750993},{"_id":"themes/jacman/source/css/_partial/index.styl","shasum":"864fba1fcb3830a9055c366a99ce5c951c2e9fe9","modified":1437101750993},{"_id":"themes/jacman/source/css/_partial/totop.styl","shasum":"96363d7c5aaed5f649667fc0752a62620a67e872","modified":1437101750993},{"_id":"themes/jacman/source/css/style.styl","shasum":"a0a45af186a72ae68979bf26f2a5d0d2303189ca","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/blank.gif","shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/fancybox_loading.gif","shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/fancybox_loading@2x.gif","shasum":"273b123496a42ba45c3416adb027cd99745058b0","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/fancybox_overlay.png","shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/fancybox_sprite.png","shasum":"17df19f97628e77be09c352bf27425faea248251","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/fancybox_sprite@2x.png","shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/helpers/fancybox_buttons.png","shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-buttons.css","shasum":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-buttons.js","shasum":"dc3645529a4bf72983a39fa34c1eb9146e082019","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-media.js","shasum":"294420f9ff20f4e3584d212b0c262a00a96ecdb3","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-thumbs.css","shasum":"4ac329c16a5277592fc12a37cca3d72ca4ec292f","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/helpers/jquery.fancybox-thumbs.js","shasum":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.css","shasum":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.js","shasum":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed","modified":1437101750993},{"_id":"themes/jacman/source/fancybox/jquery.fancybox.pack.js","shasum":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e","modified":1437101750997},{"_id":"themes/jacman/source/font/FontAwesome.otf","shasum":"b5b4f9be85f91f10799e87a083da1d050f842734","modified":1437101750997},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.eot","shasum":"a17d0f10534303e40f210c506ebb8703fa23b7de","modified":1437101750997},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.ttf","shasum":"194ccb4acf77a03dc25bcc174edb266143704fec","modified":1437101750997},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.woff","shasum":"c6f8dc1a2f6ce914f120e80a876b8fd77b98888e","modified":1437101750997},{"_id":"themes/jacman/source/font/fontawesome-webfont.eot","shasum":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e","modified":1437101750997},{"_id":"themes/jacman/source/font/fontawesome-webfont.woff","shasum":"04c3bf56d87a0828935bd6b4aee859995f321693","modified":1437101751001},{"_id":"themes/jacman/source/font/fontdiao.eot","shasum":"9544a0d7ba208989302bc4da5a184faeb0e883c9","modified":1437101751001},{"_id":"themes/jacman/source/font/fontdiao.ttf","shasum":"ee9fd7be2493c9bf6d2841044e69a0830d9d3fab","modified":1437101751001},{"_id":"themes/jacman/source/font/fontdiao.woff","shasum":"71f54eb6e98aa28cafeb04aab71c0e5b349ea89f","modified":1437101751001},{"_id":"themes/jacman/source/img/author.jpg","shasum":"26baad0efab8936d61f7e59f2d94c53b0f409fb0","modified":1432611295764},{"_id":"themes/jacman/source/img/cc-by-nc-nd.svg","shasum":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1437101751001},{"_id":"themes/jacman/source/img/cc-by-nc-sa.svg","shasum":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1437101751001},{"_id":"themes/jacman/source/img/cc-by-nc.svg","shasum":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1437101751001},{"_id":"themes/jacman/source/img/cc-by-nd.svg","shasum":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1437101751001},{"_id":"themes/jacman/source/img/cc-by-sa.svg","shasum":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1437101751001},{"_id":"themes/jacman/source/img/cc-by.svg","shasum":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1437101751001},{"_id":"themes/jacman/source/img/cc-zero.svg","shasum":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1437101751001},{"_id":"themes/jacman/source/img/favicon.ico","shasum":"532e35c2fe668107199d5d15eeae0620e4301c24","modified":1437098017545},{"_id":"themes/jacman/source/img/jacman.jpg","shasum":"0ba14a4a5e3be012826fc713c33479912126d34e","modified":1437101751001},{"_id":"themes/jacman/source/img/logo.png","shasum":"26baad0efab8936d61f7e59f2d94c53b0f409fb0","modified":1432611295764},{"_id":"themes/jacman/source/img/scrollup.png","shasum":"2137d4f1739aa8aa3fcb0348c3ddf1e41d62f2e3","modified":1437101751001},{"_id":"themes/jacman/source/js/gallery.js","shasum":"f8a4ba7fb8349cca374a3c69fff9b2bf21f742ed","modified":1437101751001},{"_id":"themes/jacman/source/js/jquery.imagesloaded.min.js","shasum":"4109837b1f6477bacc6b095a863b1b95b1b3693f","modified":1437101751005},{"_id":"themes/jacman/source/js/jquery.qrcode-0.12.0.min.js","shasum":"57c3987166a26415a71292162690e82c21e315ad","modified":1437101751005},{"_id":"themes/jacman/source/js/totop.js","shasum":"cad23c5ea7163d1e5c05a0fd3ef9233469da10cb","modified":1437101751005},{"_id":"source/_posts/article/jenkins/jenkins任务等待下一次可用执行.pdf","shasum":"d628bbee78d28a2a04977f50599b1c9c5fd7d5db","modified":1421742637487},{"_id":"themes/jacman/source/font/coveredbyyourgrace-webfont.svg","shasum":"eabdb262d8e246865dfb56031f01ff6e8d2f9d53","modified":1437101750997},{"_id":"themes/jacman/source/font/fontawesome-webfont.ttf","shasum":"7f09c97f333917034ad08fa7295e916c9f72fd3f","modified":1437101750997},{"_id":"themes/jacman/source/font/fontdiao.svg","shasum":"334a94e6a66a8b089be7315d876bec93efe38d2b","modified":1437101751001},{"_id":"themes/jacman/source/js/jquery-2.0.3.min.js","shasum":"a0ae3697b0ab8c0e8bd3186c80db42abd6d97a8d","modified":1437101751005},{"_id":"themes/jacman/source/font/fontawesome-webfont.svg","shasum":"46fcc0194d75a0ddac0a038aee41b23456784814","modified":1437101750997},{"_id":"themes/jacman/source/img/banner.jpg","shasum":"5104860c4f8b2e84ef734ba6c37fe7a288bf0d74","modified":1437101751001},{"_id":"public/js/totop.js","modified":1443067871024,"shasum":"cad23c5ea7163d1e5c05a0fd3ef9233469da10cb"},{"_id":"public/js/jquery.qrcode-0.12.0.min.js","modified":1443067871030,"shasum":"57c3987166a26415a71292162690e82c21e315ad"},{"_id":"public/js/jquery.imagesloaded.min.js","modified":1443067871033,"shasum":"4109837b1f6477bacc6b095a863b1b95b1b3693f"},{"_id":"public/js/jquery-2.0.3.min.js","modified":1443067871035,"shasum":"a0ae3697b0ab8c0e8bd3186c80db42abd6d97a8d"},{"_id":"public/js/gallery.js","modified":1443067871037,"shasum":"f8a4ba7fb8349cca374a3c69fff9b2bf21f742ed"},{"_id":"public/img/scrollup.png","modified":1443067871042,"shasum":"2137d4f1739aa8aa3fcb0348c3ddf1e41d62f2e3"},{"_id":"public/img/logo.png","modified":1443067871048,"shasum":"26baad0efab8936d61f7e59f2d94c53b0f409fb0"},{"_id":"public/img/jacman.jpg","modified":1443067871049,"shasum":"0ba14a4a5e3be012826fc713c33479912126d34e"},{"_id":"public/img/favicon.ico","modified":1443067871053,"shasum":"532e35c2fe668107199d5d15eeae0620e4301c24"},{"_id":"public/img/cc-zero.svg","modified":1443067871055,"shasum":"87669bf8ac268a91d027a0a4802c92a1473e9030"},{"_id":"public/img/cc-by.svg","modified":1443067871057,"shasum":"28a0a4fe355a974a5e42f68031652b76798d4f7e"},{"_id":"public/img/cc-by-sa.svg","modified":1443067871059,"shasum":"aa4742d733c8af8d38d4c183b8adbdcab045872e"},{"_id":"public/img/cc-by-nd.svg","modified":1443067871061,"shasum":"c563508ce9ced1e66948024ba1153400ac0e0621"},{"_id":"public/img/cc-by-nc.svg","modified":1443067871063,"shasum":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7"},{"_id":"public/img/cc-by-nc-sa.svg","modified":1443067871067,"shasum":"3031be41e8753c70508aa88e84ed8f4f653f157e"},{"_id":"public/img/cc-by-nc-nd.svg","modified":1443067871071,"shasum":"c6524ece3f8039a5f612feaf865d21ec8a794564"},{"_id":"public/img/banner.jpg","modified":1443067871075,"shasum":"5104860c4f8b2e84ef734ba6c37fe7a288bf0d74"},{"_id":"public/img/author.jpg","modified":1443067871078,"shasum":"26baad0efab8936d61f7e59f2d94c53b0f409fb0"},{"_id":"public/font/fontdiao.woff","modified":1443067871080,"shasum":"71f54eb6e98aa28cafeb04aab71c0e5b349ea89f"},{"_id":"public/font/fontdiao.ttf","modified":1443067871085,"shasum":"ee9fd7be2493c9bf6d2841044e69a0830d9d3fab"},{"_id":"public/font/fontdiao.svg","modified":1443067871088,"shasum":"334a94e6a66a8b089be7315d876bec93efe38d2b"},{"_id":"public/font/fontdiao.eot","modified":1443067871090,"shasum":"9544a0d7ba208989302bc4da5a184faeb0e883c9"},{"_id":"public/font/fontawesome-webfont.woff","modified":1443067871093,"shasum":"04c3bf56d87a0828935bd6b4aee859995f321693"},{"_id":"public/font/fontawesome-webfont.ttf","modified":1443067871097,"shasum":"7f09c97f333917034ad08fa7295e916c9f72fd3f"},{"_id":"public/font/fontawesome-webfont.svg","modified":1443067871101,"shasum":"46fcc0194d75a0ddac0a038aee41b23456784814"},{"_id":"public/font/fontawesome-webfont.eot","modified":1443067871121,"shasum":"7619748fe34c64fb157a57f6d4ef3678f63a8f5e"},{"_id":"public/font/coveredbyyourgrace-webfont.woff","modified":1443067871123,"shasum":"c6f8dc1a2f6ce914f120e80a876b8fd77b98888e"},{"_id":"public/font/coveredbyyourgrace-webfont.ttf","modified":1443067871125,"shasum":"194ccb4acf77a03dc25bcc174edb266143704fec"},{"_id":"public/font/coveredbyyourgrace-webfont.svg","modified":1443067871127,"shasum":"eabdb262d8e246865dfb56031f01ff6e8d2f9d53"},{"_id":"public/font/coveredbyyourgrace-webfont.eot","modified":1443067871130,"shasum":"a17d0f10534303e40f210c506ebb8703fa23b7de"},{"_id":"public/font/FontAwesome.otf","modified":1443067871133,"shasum":"b5b4f9be85f91f10799e87a083da1d050f842734"},{"_id":"public/fancybox/jquery.fancybox.pack.js","modified":1443067871135,"shasum":"9e0d51ca1dbe66f6c0c7aefd552dc8122e694a6e"},{"_id":"public/fancybox/jquery.fancybox.js","modified":1443067871141,"shasum":"d08b03a42d5c4ba456ef8ba33116fdbb7a9cabed"},{"_id":"public/fancybox/jquery.fancybox.css","modified":1443067871144,"shasum":"aaa582fb9eb4b7092dc69fcb2d5b1c20cca58ab6"},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.js","modified":1443067871148,"shasum":"47da1ae5401c24b5c17cc18e2730780f5c1a7a0c"},{"_id":"public/fancybox/helpers/jquery.fancybox-thumbs.css","modified":1443067871151,"shasum":"4ac329c16a5277592fc12a37cca3d72ca4ec292f"},{"_id":"public/fancybox/helpers/jquery.fancybox-media.js","modified":1443067871154,"shasum":"294420f9ff20f4e3584d212b0c262a00a96ecdb3"},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.js","modified":1443067871160,"shasum":"dc3645529a4bf72983a39fa34c1eb9146e082019"},{"_id":"public/fancybox/helpers/jquery.fancybox-buttons.css","modified":1443067871161,"shasum":"1a9d8e5c22b371fcc69d4dbbb823d9c39f04c0c8"},{"_id":"public/fancybox/helpers/fancybox_buttons.png","modified":1443067871164,"shasum":"e385b139516c6813dcd64b8fc431c364ceafe5f3"},{"_id":"public/fancybox/fancybox_sprite@2x.png","modified":1443067871166,"shasum":"30c58913f327e28f466a00f4c1ac8001b560aed8"},{"_id":"public/fancybox/fancybox_sprite.png","modified":1443067871172,"shasum":"17df19f97628e77be09c352bf27425faea248251"},{"_id":"public/fancybox/fancybox_overlay.png","modified":1443067871177,"shasum":"b3a4ee645ba494f52840ef8412015ba0f465dbe0"},{"_id":"public/fancybox/fancybox_loading@2x.gif","modified":1443067871178,"shasum":"273b123496a42ba45c3416adb027cd99745058b0"},{"_id":"public/fancybox/fancybox_loading.gif","modified":1443067871180,"shasum":"1a755fb2599f3a313cc6cfdb14df043f8c14a99c"},{"_id":"public/fancybox/blank.gif","modified":1443067871182,"shasum":"2daeaa8b5f19f0bc209d976c02bd6acb51b00b0a"},{"_id":"public/css/style.css","modified":1443067872499,"shasum":"0cb9ea97dc6081c1d4364198e6ca425688e15995"},{"_id":"public/about/index.html","modified":1443067872981,"shasum":"699ecb2d5792df584713314b9ef20805b38da489"},{"_id":"public/article/git/git拉取submodule/index.html","modified":1443067994199,"shasum":"b22052e997eda049b1b2003a3d0e12b4290b5c01"},{"_id":"public/article/cache/redis使用手记/index.html","modified":1443067873136,"shasum":"674e0157510ed16a03b75151e97648fa43bda9dc"},{"_id":"public/article/cache/redis单机多实例部署/index.html","modified":1443067873205,"shasum":"301806afc2af0d58f122d13a8a4f15ef4fc68669"},{"_id":"public/article/linux/Linux命令小记/index.html","modified":1443067873302,"shasum":"293c56d4975cafd043b0cdc686ce841b660845a7"},{"_id":"public/article/jenkins/jenkins节点重启脚本/index.html","modified":1443067873363,"shasum":"5621ff302e1e609878c034d641892a898a596d43"},{"_id":"public/article/jenkins/jenkin插件buildpipeline数值解析异常/index.html","modified":1443067873431,"shasum":"e79c90a1ad52e32c6aed7b9fc74910d790e02bad"},{"_id":"public/article/jenkins/jenkins任务等待下一次可用执行/index.html","modified":1443067873483,"shasum":"e588654d94b499ff67f5e77a3451ae603fa4a6e0"},{"_id":"public/article/jenkins/jenkins中文乱码&服务启动/index.html","modified":1443067873528,"shasum":"ddd449fcd7154d87afe8cec44e163429971086ed"},{"_id":"public/article/linux/Ubuntu更改截图默认保存位置/index.html","modified":1443067873572,"shasum":"0f54f679e9517608b297f9863fd28a582adac73e"},{"_id":"public/article/linux/ubuntu如何使用抓包工具/index.html","modified":1443067873613,"shasum":"60e47350c3937829f64948c65276c808847c3449"},{"_id":"public/article/hexo/hexo搭建github博客/index.html","modified":1443067873698,"shasum":"381210e76afd45e3ef96a7dafb2b67b03c450e81"},{"_id":"public/article/hexo/hello-world/index.html","modified":1443067873730,"shasum":"51187e26566661b2bf07b6c6f020cb4b53bc65a0"},{"_id":"public/article/linux/ubuntu装机软件/index.html","modified":1443067873771,"shasum":"f6984bcc6bfc99c63cbad53bb9405ce0ecade67e"},{"_id":"public/article/linux/linux安装nginx/index.html","modified":1443067873798,"shasum":"d07021441fae5b876524a99f89e42618b119fe85"},{"_id":"public/article/web/自定义taglib/index.html","modified":1443067873844,"shasum":"c4237b54d3d0b350c5ce99164b7aa63da9cb381e"},{"_id":"public/article/velocity/找不到自定义的velocity宏资源文件macro.vm/index.html","modified":1443067873872,"shasum":"0f8ed1061d1102692dfa940d0f45b332c3c1c059"},{"_id":"public/article/spring/spring mvc service实例化二次问题/index.html","modified":1443067873913,"shasum":"8be77b5c72fef2b64e69c10a6ce2adcae5e5be5f"},{"_id":"public/article/spring/spring特性实践 - AOP/index.html","modified":1443067873969,"shasum":"ecc313a247b6df9173c163943264dd48b20342cc"},{"_id":"public/article/spring/spring整合实践 - velocity/index.html","modified":1443067874017,"shasum":"9fb978901e57ce20223cf81b2c868a2489bdf99b"},{"_id":"public/article/other/在线网站性能测试工具/index.html","modified":1443067874046,"shasum":"a70fbaaf4bef3311d63ef736c93214e2f77731d2"},{"_id":"public/article/linux/Linux安装极点五笔的方法/index.html","modified":1443067874073,"shasum":"4007031200c62c849867b16210d5223f63bc6dfb"},{"_id":"public/article/java/开发工具问题集锦/index.html","modified":1443067874106,"shasum":"bda3eac474b9af5be5f1baa2da1dd42edf7c594c"},{"_id":"public/article/java/服务器问题集锦/index.html","modified":1443067874141,"shasum":"0708cbbbd1884bbda65a3bd9a19783028bbb33dd"},{"_id":"public/article/java/项目开发问题集锦/index.html","modified":1443067874190,"shasum":"dd83c7e4118d5f93ebc5a694f8dcbbc32cca31d8"},{"_id":"public/article/git/如何使用git回退部分修改/index.html","modified":1443067874234,"shasum":"ec14e8218b5e5d2aa97406371cdd93b7d0e597a9"},{"_id":"public/article/git/git命令小记/index.html","modified":1443067874268,"shasum":"c83e3dc78bf7d54aee0ca46165f8c8a17034037e"},{"_id":"public/article/git/推送本地git仓库/index.html","modified":1443067874301,"shasum":"4961ff192b7cf482b62036fbf3e49bc1956ded55"},{"_id":"public/article/database/mysql数据库命令小记/index.html","modified":1443067874349,"shasum":"3f5b7170548404af97200a86cb08085906f404fd"},{"_id":"public/categories/cache/index.html","modified":1443067874364,"shasum":"2175839665339f92d90d08eae322944329e8edc3"},{"_id":"public/categories/web/index.html","modified":1443067874373,"shasum":"e6e30b8dd6debbb51bccd9df6568daaabdb17da2"},{"_id":"public/categories/spring/index.html","modified":1443067874382,"shasum":"cab5744477d6b2e16baa0ca7163e235354e45127"},{"_id":"public/categories/linux/index.html","modified":1443067874394,"shasum":"788a506b619641b3af08cb8ea411f85b7fb50a03"},{"_id":"public/categories/jenkins/index.html","modified":1443067874407,"shasum":"5c9935f6d1bd4f97c5173a22a3c753f619db3b46"},{"_id":"public/categories/java/index.html","modified":1443067874431,"shasum":"60a063a85150bd4bcad4c6485cf812a35f8915ce"},{"_id":"public/categories/开发工具/index.html","modified":1443067874443,"shasum":"b37ed5f2dea4d0367cc17ef44270951060beddcc"},{"_id":"public/categories/git/index.html","modified":1443067995540,"shasum":"dc02a519fd2d34677499f7b52aabb9368232b9fa"},{"_id":"public/categories/数据库/index.html","modified":1443067874471,"shasum":"bbdce7124f330f517ef98066cddea1fea6d1d85e"},{"_id":"public/archives/index.html","modified":1443067995206,"shasum":"8a6db31501fa23f9dbedeb5e55c745fdb73873d6"},{"_id":"public/archives/page/2/index.html","modified":1443067874594,"shasum":"71d173f50e6809f578df23c11ba1d3d34b55a95a"},{"_id":"public/archives/page/3/index.html","modified":1443067874623,"shasum":"64e5fa155d5a02014a8e9293d64e13f1c3cecd30"},{"_id":"public/archives/2015/index.html","modified":1443067995303,"shasum":"d29b2640ccf07ac0e12074b49c99cf8fef914638"},{"_id":"public/archives/2015/page/2/index.html","modified":1443067874687,"shasum":"698119c6780c1946533c7ffb4d8d4dc17f80ee06"},{"_id":"public/archives/2015/page/3/index.html","modified":1443067874714,"shasum":"9fd3fcd3b046695dcd7a0f4f6ebd54b7b86ead7e"},{"_id":"public/archives/2015/07/index.html","modified":1443067874741,"shasum":"2cfc4c3cd4b7c28e5703077cd550059baa5790c5"},{"_id":"public/archives/2015/07/page/2/index.html","modified":1443067874771,"shasum":"78fbaa952e139f59ad0860dcb6fadd24d8af799d"},{"_id":"public/archives/2015/08/index.html","modified":1443067874804,"shasum":"171b8ff7a9d3cde8866e7b96381a4a29e2761caf"},{"_id":"public/archives/2015/09/index.html","modified":1443067995471,"shasum":"74d4fb25ec9bdea81dba1c8bd4641c568e5e33f8"},{"_id":"public/atom.xml","modified":1443067995551,"shasum":"34f16a99402ca624b80596533b872a0737b183c1"},{"_id":"public/index.html","modified":1443067995608,"shasum":"78de5acbeaf049d85ede8480a7809b8a68494aba"},{"_id":"public/page/2/index.html","modified":1443067874933,"shasum":"3c0d9ed28a4db77dc9ec2888161c9a8bd735c5ce"},{"_id":"public/page/3/index.html","modified":1443067874972,"shasum":"047a614e033e36adb4f0fd9018a160be502c4d67"},{"_id":"public/sitemap.xml","modified":1443067995693,"shasum":"821f2dde74d0ab95984ef86f0de494437617c24b"},{"_id":"public/tags/redis/index.html","modified":1443067874980,"shasum":"d8b1bc3aac6295a7c393337a3438e803d8478d0f"},{"_id":"public/tags/tablib/index.html","modified":1443067874991,"shasum":"a8883fbd6ac60eb2f959a63b3df72981a22a71de"},{"_id":"public/tags/velocity/index.html","modified":1443067874999,"shasum":"5d68b5b9d281e972f0a278b6f2ee69e8988d9337"},{"_id":"public/tags/spring特性实践/index.html","modified":1443067875005,"shasum":"1ba8601f4e16001ed5fc61fe5e4d5b82097e769e"},{"_id":"public/tags/spring/index.html","modified":1443067875015,"shasum":"7ea87201ee1bd84e47f072bf463ce0ae1a1ce536"},{"_id":"public/tags/spring整合实践/index.html","modified":1443067875021,"shasum":"2992607e39786ba153c0940e263a7521d78d4568"},{"_id":"public/tags/linux/index.html","modified":1443067875031,"shasum":"9c2858b02399b9956b5895320c69ea8e44e0c992"},{"_id":"public/tags/ubuntu/index.html","modified":1443067875042,"shasum":"bd9eeb10a1cf05752850a50ef5755e42f8342521"},{"_id":"public/tags/软件/index.html","modified":1443067875052,"shasum":"82cf1a5c0be3104aaf27d2b6a6a229bb75cdb515"},{"_id":"public/tags/抓包/index.html","modified":1443067875064,"shasum":"df3a9b0b3ddfc5fd226225f4b8b8c500d825f9ff"},{"_id":"public/tags/nginx/index.html","modified":1443067875072,"shasum":"0be976b13f1f45c61f32d8cd2052c2ee2132a9e2"},{"_id":"public/tags/五笔/index.html","modified":1443067875082,"shasum":"4d97fcce62ceb664cea4401e68cb3a087a06e43e"},{"_id":"public/tags/小记/index.html","modified":1443067875092,"shasum":"0f58e98ae5a40696386009337fccc7e8b45330f0"},{"_id":"public/tags/命令/index.html","modified":1443067875103,"shasum":"c94207cf138ce89aae74fa81b80602d0241bcde6"},{"_id":"public/tags/jenkins/index.html","modified":1443067875114,"shasum":"ddf7f0b6487160a81c3af38db6af3cd20c64d441"},{"_id":"public/tags/问题/index.html","modified":1443067875122,"shasum":"d2800a98514702192705b5bc91bfba67ef3537eb"},{"_id":"public/tags/持续集成/index.html","modified":1443067875131,"shasum":"399b66dd68132e19742bec4386e6909f4189f099"},{"_id":"public/tags/java/index.html","modified":1443067875141,"shasum":"984d98318604158fc72d7af85cb7a77ef19c74f8"},{"_id":"public/tags/集锦/index.html","modified":1443067875159,"shasum":"9bb042d74a3cac39099b545c96ffd0c668eeb709"},{"_id":"public/tags/服务器/index.html","modified":1443067875171,"shasum":"59285b969f9a4eac5d715af4aaeae5e195cdc8e1"},{"_id":"public/tags/开发工具/index.html","modified":1443067875183,"shasum":"54740ac393f9af3b2c40d7c5256d065352fceda1"},{"_id":"public/tags/git/index.html","modified":1443067995902,"shasum":"5f3d6766087dac47717e8be9b97287a648b4cc55"},{"_id":"public/tags/mysql/index.html","modified":1443067875205,"shasum":"b649ed1d06341dee7f55dbc92b7134d0593c9f59"}],"Category":[{"name":"cache","_id":"ciexpcmki0001x5vuvt06xu0l"},{"name":"web","_id":"ciexpcmks0007x5vuyq8dnh28"},{"name":"spring","_id":"ciexpcmky000fx5vuv417sm22"},{"name":"linux","_id":"ciexpcmlc000vx5vulr62ecxk"},{"name":"jenkins","_id":"ciexpcmmg001vx5vuv81qkgwr"},{"name":"java","_id":"ciexpcmn3002hx5vu9lgvuopf"},{"name":"开发工具","_id":"ciexpcmna002ux5vurwogequ2"},{"name":"git","_id":"ciexpcmnj0033x5vu50gne2xe"},{"name":"数据库","_id":"ciexpcmo2003ix5vuvwj1mmfo"}],"Data":[],"Page":[{"title":"关于","_content":"\n\n## 个人箴言\n我不是最棒的，但注定我是最有希望的。","source":"about/index.md","raw":"\ntitle: 关于\n---\n\n\n## 个人箴言\n我不是最棒的，但注定我是最有希望的。","date":"2015-07-17T08:30:07.232Z","updated":"2015-07-17T08:30:07.232Z","path":"about/index.html","comments":1,"layout":"page","_id":"ciexpcmko0005x5vum6yu4uhj"}],"Post":[{"title":"redis使用手记","_content":"\n## 服务监控\n\n## 性能测试\n\n1. redis-cli monitor\n使用如下命令查看redis GET/SET请求的频率\nredis-cli monitor | grep \"GET\"\nredis-cli monitor | grep \"SET\"\n\n","source":"_posts/article/cache/redis使用手记.md","raw":"\ncategories:\n  - cache\n\ntag:\n  - redis\n\ntitle: redis使用手记\n---\n\n## 服务监控\n\n## 性能测试\n\n1. redis-cli monitor\n使用如下命令查看redis GET/SET请求的频率\nredis-cli monitor | grep \"GET\"\nredis-cli monitor | grep \"SET\"\n\n","slug":"article/cache/redis使用手记","published":1,"date":"2015-09-07T04:51:17.573Z","updated":"2015-09-07T04:51:17.573Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmkb0000x5vuv21q5070"},{"title":"自定义taglib","_content":"\n[TOC]\n\n## 一、扩展函数库\n在taglib函数类中添加需要的函数randomElement、join等。\n``` java\n/**\n * @description JSTL function ext\n * \n * @author yeshaoting\n * @date 2015-06-29 14:52:57\n */\npublic class FunctionsExt extends Functions {\n  \n  /**\n   * <pre>\n   * jstl's fn:join only works with String[]. This one is more general.\n   * \n   * usage: ${nc:join(values, \", \")}\n   * @see http://stackoverflow.com/questions/3886211/taglib-in-java-tag-with-array-parameter\n   * </pre>\n   */\n  public static String join(Object values, String seperator) {\n    if (values == null)\n      return StringUtils.EMPTY;\n    if (values instanceof Collection<?>)\n      return StringUtils.join((Collection<?>) values, seperator);\n    else if (values instanceof Object[])\n      return StringUtils.join((Object[]) values, seperator);\n    else\n      return values.toString();\n  }\n  \n  /**\n   * get element from elementes by random\n   * \n   * @param elements\n   * @return\n   */\n  public static String randomElement(String[] elements) {\n    if (ArrayUtils.isEmpty(elements)) {\n      return StringUtils.EMPTY;\n    }\n    \n    int index = new Random().nextInt(elements.length);\n    return CollectionUtils.get(elements, index).toString();\n  }\n  \n}\n```\n\n<!-- more -->\n\n\n## 二、创建taglib fn-ext.tld\n放置文件位置：/martinye-demo-spring-web/src/main/webapp/WEB-INF/taglib/fn-ext.tld\n\n参考fn.tld内容修改：\n1. short-name改为我们自己的命令空间fnExt。\n2. uri：http://demo.martinye.com/jsp/jstl/functions-ext\n3. 定义functions，主要修改name, function-class, function-signature\n\n修改后的完整tld内容如下：\n``` xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n\n<taglib xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd\"\n  version=\"2.0\">\n\n  <description>JSTL 1.1 functions ext library</description>\n  <display-name>JSTL functions ext</display-name>\n  <tlib-version>1.1</tlib-version>\n  <short-name>fnExt</short-name>\n  <uri>http://demo.martinye.com/jsp/jstl/functions-ext</uri>\n\n  <function>\n    <description>\n      get element from elementes by random\n    </description>\n    <name>randomElement</name>\n    <function-class>com.martinye.demo.util.taglib.FunctionsExt</function-class>\n    <function-signature>java.lang.String randomElement(java.lang.String[])</function-signature>\n    <example>\n      &lt;c:if test=\"${fnExt:randomElement(elements)}\">\n    </example>\n  </function>\n  \n  <function>\n    <description>\n      Joins all elements of a collection into a string.\n    </description>\n    <name>join</name>\n    <function-class>com.martinye.demo.util.taglib.FunctionsExt</function-class>\n    <function-signature>java.lang.String join(java.lang.Object, java.lang.String)</function-signature>\n    <example>\n      ${fnExt:join(collection, \";\")}\n    </example>\n  </function>\n\n</taglib>\n```\n\n###  相关说明\n1. 函数式taglib prefix不允许包含特殊字符，标签类taglib可以包含部分特殊字符\n实际操作过程中，遇到不允许包含字符：`-`。\n例如：matinye-fn或者fn-ext这样的prefix都是不对的。\n**注**：有待考证。\n\n2. short-name, uri都要唯一。\n\n3. 当前命令空间fnExt下所有的函数名都不允许重复，即便是重载函数。\n例如：join(array)，join(array, String)不能都同时定义在taglib中。\n\n4. 不允许使用java.util.Collection类型作为参数，使用array或者Object代替。\n**注**：有待考证。\n\n\n## 三、web.xml配置taglib\n``` xml\n  <jsp-config>\n    <taglib>\n      <taglib-uri>http://demo.martinye.com/jsp/jstl/functions-ext</taglib-uri>\n      <taglib-location>/WEB-INF/taglib/fn-ext.tld</taglib-location>\n    </taglib>\n  </jsp-config>\n```\n\n## 四、使用taglib\n\n1. jsp页面定义\n``` xml\n<%@ taglib uri=\"http://demo.martinye.com/jsp/jstl/functions-ext\" prefix=\"fnExt\"%>\n```\n\n2. 页面使用\n``` xml\n${fnExt:join(cdnServers, \" \") }<br/>\n<img src=\"http://${fnExt:randomElement(cdnServerArr) }/resources/img/logo.png\" /><br/>\n```\n\n## 五、参考文档\n[Taglib in Java: tag with array parameter][^1]\n\n\n[^1]: http://stackoverflow.com/questions/3886211/taglib-in-java-tag-with-array-parameter","source":"_posts/article/web/自定义taglib.md","raw":"\ncategories:\n - web\n\ntags:\n - tablib\n\ntitle: 自定义taglib\n---\n\n[TOC]\n\n## 一、扩展函数库\n在taglib函数类中添加需要的函数randomElement、join等。\n``` java\n/**\n * @description JSTL function ext\n * \n * @author yeshaoting\n * @date 2015-06-29 14:52:57\n */\npublic class FunctionsExt extends Functions {\n  \n  /**\n   * <pre>\n   * jstl's fn:join only works with String[]. This one is more general.\n   * \n   * usage: ${nc:join(values, \", \")}\n   * @see http://stackoverflow.com/questions/3886211/taglib-in-java-tag-with-array-parameter\n   * </pre>\n   */\n  public static String join(Object values, String seperator) {\n    if (values == null)\n      return StringUtils.EMPTY;\n    if (values instanceof Collection<?>)\n      return StringUtils.join((Collection<?>) values, seperator);\n    else if (values instanceof Object[])\n      return StringUtils.join((Object[]) values, seperator);\n    else\n      return values.toString();\n  }\n  \n  /**\n   * get element from elementes by random\n   * \n   * @param elements\n   * @return\n   */\n  public static String randomElement(String[] elements) {\n    if (ArrayUtils.isEmpty(elements)) {\n      return StringUtils.EMPTY;\n    }\n    \n    int index = new Random().nextInt(elements.length);\n    return CollectionUtils.get(elements, index).toString();\n  }\n  \n}\n```\n\n<!-- more -->\n\n\n## 二、创建taglib fn-ext.tld\n放置文件位置：/martinye-demo-spring-web/src/main/webapp/WEB-INF/taglib/fn-ext.tld\n\n参考fn.tld内容修改：\n1. short-name改为我们自己的命令空间fnExt。\n2. uri：http://demo.martinye.com/jsp/jstl/functions-ext\n3. 定义functions，主要修改name, function-class, function-signature\n\n修改后的完整tld内容如下：\n``` xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n\n<taglib xmlns=\"http://java.sun.com/xml/ns/j2ee\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd\"\n  version=\"2.0\">\n\n  <description>JSTL 1.1 functions ext library</description>\n  <display-name>JSTL functions ext</display-name>\n  <tlib-version>1.1</tlib-version>\n  <short-name>fnExt</short-name>\n  <uri>http://demo.martinye.com/jsp/jstl/functions-ext</uri>\n\n  <function>\n    <description>\n      get element from elementes by random\n    </description>\n    <name>randomElement</name>\n    <function-class>com.martinye.demo.util.taglib.FunctionsExt</function-class>\n    <function-signature>java.lang.String randomElement(java.lang.String[])</function-signature>\n    <example>\n      &lt;c:if test=\"${fnExt:randomElement(elements)}\">\n    </example>\n  </function>\n  \n  <function>\n    <description>\n      Joins all elements of a collection into a string.\n    </description>\n    <name>join</name>\n    <function-class>com.martinye.demo.util.taglib.FunctionsExt</function-class>\n    <function-signature>java.lang.String join(java.lang.Object, java.lang.String)</function-signature>\n    <example>\n      ${fnExt:join(collection, \";\")}\n    </example>\n  </function>\n\n</taglib>\n```\n\n###  相关说明\n1. 函数式taglib prefix不允许包含特殊字符，标签类taglib可以包含部分特殊字符\n实际操作过程中，遇到不允许包含字符：`-`。\n例如：matinye-fn或者fn-ext这样的prefix都是不对的。\n**注**：有待考证。\n\n2. short-name, uri都要唯一。\n\n3. 当前命令空间fnExt下所有的函数名都不允许重复，即便是重载函数。\n例如：join(array)，join(array, String)不能都同时定义在taglib中。\n\n4. 不允许使用java.util.Collection类型作为参数，使用array或者Object代替。\n**注**：有待考证。\n\n\n## 三、web.xml配置taglib\n``` xml\n  <jsp-config>\n    <taglib>\n      <taglib-uri>http://demo.martinye.com/jsp/jstl/functions-ext</taglib-uri>\n      <taglib-location>/WEB-INF/taglib/fn-ext.tld</taglib-location>\n    </taglib>\n  </jsp-config>\n```\n\n## 四、使用taglib\n\n1. jsp页面定义\n``` xml\n<%@ taglib uri=\"http://demo.martinye.com/jsp/jstl/functions-ext\" prefix=\"fnExt\"%>\n```\n\n2. 页面使用\n``` xml\n${fnExt:join(cdnServers, \" \") }<br/>\n<img src=\"http://${fnExt:randomElement(cdnServerArr) }/resources/img/logo.png\" /><br/>\n```\n\n## 五、参考文档\n[Taglib in Java: tag with array parameter][^1]\n\n\n[^1]: http://stackoverflow.com/questions/3886211/taglib-in-java-tag-with-array-parameter","slug":"article/web/自定义taglib","published":1,"date":"2015-07-21T06:28:42.690Z","updated":"2015-07-17T08:41:50.740Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmkr0006x5vu8g8mgoy2"},{"title":"找不到自定义的velocity宏资源文件macro.vm","_content":"\n[TOC]\n\n异常描述：VelocityException: Velocimacro : Error using VM library : /WEB-INF/vm/macro.vm\n问题原因：路径配置错误。\n\n\n## 一、项目相关配置\n\n### 1. spring-beans.xml\nspring bean velocityEngine\n``` xml\n  <bean id=\"velocityEngine\" class=\"org.springframework.ui.velocity.VelocityEngineFactoryBean\">\n    <property name=\"resourceLoaderPath\" value=\"/WEB-INF/vm/\"/>\n    <property name=\"configLocation\" value=\"classpath:velocity.properties\"/>\n  </bean>\n```\n\n### 2. velocity.properties\n宏资源文件配置\n``` properties\nvelocimacro.library=/WEB-INF/vm/macro.vm\n```\n\n\n<!-- more -->\n\n\n## 二、解析异常原因\n首先，默认velocity模板加载方式为file，对应的资源加载类为：`org.apache.velocity.runtime.resource.loader.FileResourceLoader`。参见如下 **模板加载配置** 以及 **FileResourceLoader说明** 。\n\n从模板目录/WEB-INF/vm/加载模块文件(`ResourceManagerImpl.getResource`)。\n\n如果模板文件没有缓存(`ResourceManagerImpl.globalCacheglobalCache`)，则从目录文件中加载(`ResourceManagerImpl.loadResource`)。\n\n加载过程中，加载资源文件流，解析并初始化。`org.apache.velocity.Template.process()`\n此时，调用资源文件加载类FileResourceLoader加载文件。\n\nFileResourceLoader在file.resource.loader.path目录，即spring-beans.xml中配置的resourceLoaderPath目录通过模板名查找并加载模板。\n如果resourceLoaderPath未配置或者为空的话，则通过绝对路径加载模板；否则，相对于resourceLoaderPath查找模板。\n如果resourceLoaderPath不为空，模板路径velocimacro.library以/开头，则直接去除/。\n\n### 模板加载配置\n默认的velocity.properties in package `org.apache.velocity.runtime.defaults`。\n``` properties\nresource.loader = file\n\nfile.resource.loader.description = Velocity File Resource Loader\nfile.resource.loader.class = org.apache.velocity.runtime.resource.loader.FileResourceLoader\nfile.resource.loader.path = .\nfile.resource.loader.cache = false\nfile.resource.loader.modificationCheckInterval = 2\n```\n\n### FileResourceLoader说明\nA loader for templates stored on the file system. Treats the template as relative to the configured root path. If the root path is empty treats the template name as an absolute path.\n\n\n## 三、小结\n因此，对于当前的项目配置来说，velocity框架实际上是在/WEB-INF/vm/WEB-INF/vm/macro.vm目录加载模板文件macro.vm。\n\n**注**：如果希望在class目录加载模板文件，可以考试设置资源文件加载类为：org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader。\n\n修改velocity.properties配置：\n``` properties\nresource.loader = class\nclass.resource.loader.class = org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader\n\nvelocimacro.library=macro.vm\n```\n\n## 四、参考文档\nhttp://stackoverflow.com/questions/3443819/velocity-cant-find-resource\nhttp://velocity.apache.org/engine/releases/velocity-1.6.4/developer-guide.html#Configuring_Resource_Loaders\nhttp://velocity.apache.org/engine/releases/velocity-1.6.4/apidocs/org/apache/velocity/runtime/resource/loader/ClasspathResourceLoader.html","source":"_posts/article/velocity/找不到自定义的velocity宏资源文件macro.vm.md","raw":"\ntags:\n - velocity\n\ntitle: 找不到自定义的velocity宏资源文件macro.vm\n---\n\n[TOC]\n\n异常描述：VelocityException: Velocimacro : Error using VM library : /WEB-INF/vm/macro.vm\n问题原因：路径配置错误。\n\n\n## 一、项目相关配置\n\n### 1. spring-beans.xml\nspring bean velocityEngine\n``` xml\n  <bean id=\"velocityEngine\" class=\"org.springframework.ui.velocity.VelocityEngineFactoryBean\">\n    <property name=\"resourceLoaderPath\" value=\"/WEB-INF/vm/\"/>\n    <property name=\"configLocation\" value=\"classpath:velocity.properties\"/>\n  </bean>\n```\n\n### 2. velocity.properties\n宏资源文件配置\n``` properties\nvelocimacro.library=/WEB-INF/vm/macro.vm\n```\n\n\n<!-- more -->\n\n\n## 二、解析异常原因\n首先，默认velocity模板加载方式为file，对应的资源加载类为：`org.apache.velocity.runtime.resource.loader.FileResourceLoader`。参见如下 **模板加载配置** 以及 **FileResourceLoader说明** 。\n\n从模板目录/WEB-INF/vm/加载模块文件(`ResourceManagerImpl.getResource`)。\n\n如果模板文件没有缓存(`ResourceManagerImpl.globalCacheglobalCache`)，则从目录文件中加载(`ResourceManagerImpl.loadResource`)。\n\n加载过程中，加载资源文件流，解析并初始化。`org.apache.velocity.Template.process()`\n此时，调用资源文件加载类FileResourceLoader加载文件。\n\nFileResourceLoader在file.resource.loader.path目录，即spring-beans.xml中配置的resourceLoaderPath目录通过模板名查找并加载模板。\n如果resourceLoaderPath未配置或者为空的话，则通过绝对路径加载模板；否则，相对于resourceLoaderPath查找模板。\n如果resourceLoaderPath不为空，模板路径velocimacro.library以/开头，则直接去除/。\n\n### 模板加载配置\n默认的velocity.properties in package `org.apache.velocity.runtime.defaults`。\n``` properties\nresource.loader = file\n\nfile.resource.loader.description = Velocity File Resource Loader\nfile.resource.loader.class = org.apache.velocity.runtime.resource.loader.FileResourceLoader\nfile.resource.loader.path = .\nfile.resource.loader.cache = false\nfile.resource.loader.modificationCheckInterval = 2\n```\n\n### FileResourceLoader说明\nA loader for templates stored on the file system. Treats the template as relative to the configured root path. If the root path is empty treats the template name as an absolute path.\n\n\n## 三、小结\n因此，对于当前的项目配置来说，velocity框架实际上是在/WEB-INF/vm/WEB-INF/vm/macro.vm目录加载模板文件macro.vm。\n\n**注**：如果希望在class目录加载模板文件，可以考试设置资源文件加载类为：org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader。\n\n修改velocity.properties配置：\n``` properties\nresource.loader = class\nclass.resource.loader.class = org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader\n\nvelocimacro.library=macro.vm\n```\n\n## 四、参考文档\nhttp://stackoverflow.com/questions/3443819/velocity-cant-find-resource\nhttp://velocity.apache.org/engine/releases/velocity-1.6.4/developer-guide.html#Configuring_Resource_Loaders\nhttp://velocity.apache.org/engine/releases/velocity-1.6.4/apidocs/org/apache/velocity/runtime/resource/loader/ClasspathResourceLoader.html","slug":"article/velocity/找不到自定义的velocity宏资源文件macro.vm","published":1,"date":"2015-07-21T06:28:42.674Z","updated":"2015-07-17T08:41:41.508Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmku000bx5vuxl1hw5rw"},{"title":"spring特性实践 - AOP","_content":"\n此段内容说明如何使用spring aop，并通过一个函数耗时统计切面demo来讲述使用具体步骤。\n\n[TOC]\n\n\n## 一、创建maven工程\n\n通过STS创建一个maven工程martinye-demo-spring-support。\n\n修改pom.xml文件，添加项目相关依赖如下：\n\n**servlet**\n- javax.servlet-api\n- jstl\n- standard\n- jsp-api\n\n**spring**\n- spring-webmvc\n- aspectjweaver\n\n**log**\n- slf4j-api\n- slf4j-log4j12\n\n**utils**\n- commons-lang3\n- commons-collections\n- commons-io\n- guava\n- fastjson\n\n**test**\n- junit\n- spring-test\n\n\n<!-- more -->\n\n## 二、配置servlet容器\n配置路径：/martinye-demo-spring-velocity/src/main/webapp/WEB-INF/web.xml\n\nweb servlet容器web.xml，添加加载spring容器的配置。\n根据关注点不同，我们把spring容器配置定义分开，如下所示：\n\n### 定义spring root容器\n实例化类对象。\n\n配置如下：\n``` xml\n  <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->\n  <context-param>\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:spring-beans.xml</param-value>\n  </context-param>\n\n  <!-- Creates the Spring Container shared by all Servlets and Filters -->\n  <listener>\n    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n  </listener>\n```\n\n### 定义spring mvc容器\n处理用户请求。\nspring mvc容器对应的ApplicationContext是spring root容器对应的ApplicationContext的子类对象，可持有spring root容器中注入的类对象。\n\n配置如下：\n``` xml\n  <!-- Processes application requests -->\n  <servlet>\n    <servlet-name>spring</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:spring-mvc.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>spring</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n```\n\n\n## 三、配置spring-beans.xml\n配置如下：\n``` xml\n  <context:property-placeholder ignore-resource-not-found=\"true\" location=\"classpath*:app.properties\" />\n\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\" use-default-filters=\"true\">\n    <context:include-filter type=\"annotation\" expression=\"org.aspectj.lang.annotation.Aspect\"/>\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n\n  <aop:aspectj-autoproxy expose-proxy=\"true\" proxy-target-class=\"false\"/>\n```\n\n**配置描述**：\n\n1. 加载配置资源：app.properties。\n\n2. 启用注解功能\n除Controller以外的Component注解注释的类，自动注入@Required, @Autowired, @PostConstruct, @PreDestroy, @Resource, @PersistenceContext and @PersistenceUnit注释的属性。\n\n3. 开启aop，启用@AspectJ注解。\n在注入当前容器的类对象方法上，支持AOP注解。\n\n\n## 四、配置spring-mvc.xml\n配置如下：\n``` xml\n  <context:property-placeholder ignore-resource-not-found=\"true\" location=\"classpath*:app.properties\" />\n\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\" use-default-filters=\"false\">\n    <context:include-filter type=\"annotation\" expression=\"org.aspectj.lang.annotation.Aspect\"/>\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n\n  <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->\n  <bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n    <property name=\"prefix\" value=\"/WEB-INF/views/\" />\n    <property name=\"suffix\" value=\".jsp\" />\n  </bean>\n\n  <aop:aspectj-autoproxy expose-proxy=\"true\" proxy-target-class=\"false\"/>\n```\n\n**配置描述**：\n\n1. 加载配置资源：app.properties。\n\n2. 启用注解功能\n禁用默认的包扫描过滤策略，只扫描Controller注解。\n\n3. 开启aop，启用@AspectJ注解。\n在注入当前容器的类对象方法上，支持AOP注解。\n\n\n## 五、创建TimeCost注解\n通过注解来开关是否需要进行方法耗时统计。\n\n``` java\npackage com.martinye.demo.support.annotation;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n/**\n * @description\n * \n * @author yeshaoting\n * @date 2015-05-07 13:45:29\n */\n@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface TimeCost {\n\n\n}\n\n```\n\n\n## 六、创建TimeCost切面\n\n切面检测加有TimeCost的方法。\n\n为了保证统计完整性，防止多个切面逻辑耗时未计算的问题，我们为切面添加切面优先级。\n此优先级通过在切面类上添加`@Order`注解来完成。\n\n``` java\npackage com.martinye.demo.support.aspect;\n\nimport org.apache.commons.lang3.time.StopWatch;\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.Signature;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.AfterReturning;\nimport org.aspectj.lang.annotation.AfterThrowing;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.core.annotation.Order;\n\n/**\n * @description 方法耗时切面\n * \n * @author yeshaoting\n * @date 2015-06-11 11:18:06\n */\n@Aspect\n@Order(8)\npublic class TimeCostAspect {\n  \n  private Logger logger = LoggerFactory.getLogger(this.getClass());\n  \n  @Pointcut(\"@annotation(com.martinye.demo.support.annotation.TimeCost)\")\n  public void point() {};\n  \n  @Before(value = \"point()\")\n  public void beforeAdvice(JoinPoint joinPoint) {\n    logger.info(\"======= before advice {} ======\", joinPoint.getSignature().getName());\n  }\n  \n  @After(value = \"point()\")\n  public void afterAdvice(JoinPoint joinPoint) {\n    logger.info(\"======= after advice {} ======\", joinPoint.getSignature().getName());\n  }\n  \n  @Around(value = \"point()\")\n  public void aroundAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\n    logger.info(\"======= before around advice {} ======\", joinPoint.getSignature().getName());\n    \n    StopWatch clock = new StopWatch();\n    clock.start(); // 计时开始\n    \n    try {\n      joinPoint.proceed();\n    } catch (Exception e) {\n      throw e;\n    } finally {\n      clock.stop(); // 计时结束\n      long timeCost = clock.getTime();\n      Signature sig = joinPoint.getSignature();\n      logger.info(\"execute method {}.{} take time: {}(ms)\", sig.getDeclaringTypeName(),\n          sig.getName(), timeCost);\n      \n      logger.info(\"======= after around advice {} ======\", joinPoint.getSignature().getName());\n    }\n    \n  }\n  \n  @AfterThrowing(value = \"point()\", throwing = \"e\")\n  public void afterThrowingAdvice(JoinPoint joinPoint, Throwable e) {\n    logger.info(\"======= after throwing advice {} ======\", joinPoint.getSignature().getName());\n    logger.info(\" > error info：\" + e.getMessage());\n  }\n  \n  @AfterReturning(value = \"point()\")\n  public void afteReturningAdvice(JoinPoint joinPoint) {\n    logger.info(\"======= after returning advice {} ======\", joinPoint.getSignature().getName());\n  }\n  \n}\n```\n","source":"_posts/article/spring/spring特性实践 - AOP.md","raw":"\ncategories:\n\t- spring\ntags:\n\t- spring特性实践\n\t- spring\ntitle: spring特性实践 - AOP\n---\n\n此段内容说明如何使用spring aop，并通过一个函数耗时统计切面demo来讲述使用具体步骤。\n\n[TOC]\n\n\n## 一、创建maven工程\n\n通过STS创建一个maven工程martinye-demo-spring-support。\n\n修改pom.xml文件，添加项目相关依赖如下：\n\n**servlet**\n- javax.servlet-api\n- jstl\n- standard\n- jsp-api\n\n**spring**\n- spring-webmvc\n- aspectjweaver\n\n**log**\n- slf4j-api\n- slf4j-log4j12\n\n**utils**\n- commons-lang3\n- commons-collections\n- commons-io\n- guava\n- fastjson\n\n**test**\n- junit\n- spring-test\n\n\n<!-- more -->\n\n## 二、配置servlet容器\n配置路径：/martinye-demo-spring-velocity/src/main/webapp/WEB-INF/web.xml\n\nweb servlet容器web.xml，添加加载spring容器的配置。\n根据关注点不同，我们把spring容器配置定义分开，如下所示：\n\n### 定义spring root容器\n实例化类对象。\n\n配置如下：\n``` xml\n  <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->\n  <context-param>\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:spring-beans.xml</param-value>\n  </context-param>\n\n  <!-- Creates the Spring Container shared by all Servlets and Filters -->\n  <listener>\n    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n  </listener>\n```\n\n### 定义spring mvc容器\n处理用户请求。\nspring mvc容器对应的ApplicationContext是spring root容器对应的ApplicationContext的子类对象，可持有spring root容器中注入的类对象。\n\n配置如下：\n``` xml\n  <!-- Processes application requests -->\n  <servlet>\n    <servlet-name>spring</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:spring-mvc.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>spring</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n```\n\n\n## 三、配置spring-beans.xml\n配置如下：\n``` xml\n  <context:property-placeholder ignore-resource-not-found=\"true\" location=\"classpath*:app.properties\" />\n\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\" use-default-filters=\"true\">\n    <context:include-filter type=\"annotation\" expression=\"org.aspectj.lang.annotation.Aspect\"/>\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n\n  <aop:aspectj-autoproxy expose-proxy=\"true\" proxy-target-class=\"false\"/>\n```\n\n**配置描述**：\n\n1. 加载配置资源：app.properties。\n\n2. 启用注解功能\n除Controller以外的Component注解注释的类，自动注入@Required, @Autowired, @PostConstruct, @PreDestroy, @Resource, @PersistenceContext and @PersistenceUnit注释的属性。\n\n3. 开启aop，启用@AspectJ注解。\n在注入当前容器的类对象方法上，支持AOP注解。\n\n\n## 四、配置spring-mvc.xml\n配置如下：\n``` xml\n  <context:property-placeholder ignore-resource-not-found=\"true\" location=\"classpath*:app.properties\" />\n\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\" use-default-filters=\"false\">\n    <context:include-filter type=\"annotation\" expression=\"org.aspectj.lang.annotation.Aspect\"/>\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n\n  <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->\n  <bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\n    <property name=\"prefix\" value=\"/WEB-INF/views/\" />\n    <property name=\"suffix\" value=\".jsp\" />\n  </bean>\n\n  <aop:aspectj-autoproxy expose-proxy=\"true\" proxy-target-class=\"false\"/>\n```\n\n**配置描述**：\n\n1. 加载配置资源：app.properties。\n\n2. 启用注解功能\n禁用默认的包扫描过滤策略，只扫描Controller注解。\n\n3. 开启aop，启用@AspectJ注解。\n在注入当前容器的类对象方法上，支持AOP注解。\n\n\n## 五、创建TimeCost注解\n通过注解来开关是否需要进行方法耗时统计。\n\n``` java\npackage com.martinye.demo.support.annotation;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n/**\n * @description\n * \n * @author yeshaoting\n * @date 2015-05-07 13:45:29\n */\n@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface TimeCost {\n\n\n}\n\n```\n\n\n## 六、创建TimeCost切面\n\n切面检测加有TimeCost的方法。\n\n为了保证统计完整性，防止多个切面逻辑耗时未计算的问题，我们为切面添加切面优先级。\n此优先级通过在切面类上添加`@Order`注解来完成。\n\n``` java\npackage com.martinye.demo.support.aspect;\n\nimport org.apache.commons.lang3.time.StopWatch;\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.Signature;\nimport org.aspectj.lang.annotation.After;\nimport org.aspectj.lang.annotation.AfterReturning;\nimport org.aspectj.lang.annotation.AfterThrowing;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.core.annotation.Order;\n\n/**\n * @description 方法耗时切面\n * \n * @author yeshaoting\n * @date 2015-06-11 11:18:06\n */\n@Aspect\n@Order(8)\npublic class TimeCostAspect {\n  \n  private Logger logger = LoggerFactory.getLogger(this.getClass());\n  \n  @Pointcut(\"@annotation(com.martinye.demo.support.annotation.TimeCost)\")\n  public void point() {};\n  \n  @Before(value = \"point()\")\n  public void beforeAdvice(JoinPoint joinPoint) {\n    logger.info(\"======= before advice {} ======\", joinPoint.getSignature().getName());\n  }\n  \n  @After(value = \"point()\")\n  public void afterAdvice(JoinPoint joinPoint) {\n    logger.info(\"======= after advice {} ======\", joinPoint.getSignature().getName());\n  }\n  \n  @Around(value = \"point()\")\n  public void aroundAdvice(ProceedingJoinPoint joinPoint) throws Throwable {\n    logger.info(\"======= before around advice {} ======\", joinPoint.getSignature().getName());\n    \n    StopWatch clock = new StopWatch();\n    clock.start(); // 计时开始\n    \n    try {\n      joinPoint.proceed();\n    } catch (Exception e) {\n      throw e;\n    } finally {\n      clock.stop(); // 计时结束\n      long timeCost = clock.getTime();\n      Signature sig = joinPoint.getSignature();\n      logger.info(\"execute method {}.{} take time: {}(ms)\", sig.getDeclaringTypeName(),\n          sig.getName(), timeCost);\n      \n      logger.info(\"======= after around advice {} ======\", joinPoint.getSignature().getName());\n    }\n    \n  }\n  \n  @AfterThrowing(value = \"point()\", throwing = \"e\")\n  public void afterThrowingAdvice(JoinPoint joinPoint, Throwable e) {\n    logger.info(\"======= after throwing advice {} ======\", joinPoint.getSignature().getName());\n    logger.info(\" > error info：\" + e.getMessage());\n  }\n  \n  @AfterReturning(value = \"point()\")\n  public void afteReturningAdvice(JoinPoint joinPoint) {\n    logger.info(\"======= after returning advice {} ======\", joinPoint.getSignature().getName());\n  }\n  \n}\n```\n","slug":"article/spring/spring特性实践 - AOP","published":1,"date":"2015-07-21T06:28:42.646Z","updated":"2015-07-17T08:40:42.568Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmkx000ex5vulc4t68bo"},{"title":"spring整合实践 - velocity","_content":"\n[TOC]\n\n此段内容说明如何整合spring与velocity。\n此文并不介绍如何使用velocity代替jsp作为页面渲染配置(参考：VelocityAndSpringStepByStep)，仅仅只是输出特定格式的html、xml或文本等内容的整合实践。\n\n\n## 一、配置spring mvc\n首先，web.xml添加spring容器配置:spring-beans.xml, spring-mvc.xml.\n\n\n## velocity engine实例化\n对于spring父容器spring-beans.xml，除开启注解，注入配置文件等基本配置外，向容器添加velocity engine对象定义，注入velocityEngine对象。\n\n具体配置片段如下：\n``` xml\n  <bean id=\"velocityEngine\" class=\"org.springframework.ui.velocity.VelocityEngineFactoryBean\">\n    <property name=\"resourceLoaderPath\" value=\"/WEB-INF/vm/\" />\n    <property name=\"configLocation\" value=\"classpath:velocity.properties\" />\n  </bean>\n```\n\n其中，将velocity模板放置在/martinye-demo-spring-velocity/src/main/webapp/WEB-INF/vm目录，将velocity.properties文件放置在/martinye-demo-spring-velocity/src/main/resources目录。\n**注**：vm模板也可以放置到src/main/resources目录下。\n\n\n<!-- more -->\n\n## 二、velocity配置\nvelocity.properties配置会覆盖默认配置。\n默认配置文件的位置：velocity.jar包路径org.apache.velocity.runtime.defaults下（velocity.properties）。\n\n更详细参数配置可参考：configuring_resource_loaders\n\n根据需要我们自定义的配置文件内容，如下所示：\n``` properties\n\n# encoding\ninput.encoding=UTF-8\noutput.encoding=UTF-8\ncontentType=text/html;charset=UTF-8\n\n\n# autoreload when vm changed\nfile.resource.loader.cache=false\nfile.resource.loader.modificationCheckInterval=1\nvelocimacro.library.autoreload=true\n\n\n# macro config\n# 默认情况，velocimacro.library相对于resourceLoaderPath目录\nvelocimacro.library=macro.vm\n#velocimacro.permissions.allow.inline=true\n#velocimacro.permissions.allow.inline.to.replace.global=false\n#velocimacro.permissions.allow.inline.local.scope=false\n\n#layout\n#tools.view.servlet.layout.directory=/WEB-INF/vm/layout/\n#tools.view.servlet.error.template=/WEB-INF/vm/error.vm\n#tools.view.servlet.layout.default.template=default.vm\n\n\n# runtime log\nruntime.log=velocity.log\nruntime.log.logsystem.class=org.springframework.ui.velocity.CommonsLoggingLogSystem\nruntime.log.error.stacktrace=true\nruntime.log.warn.stacktrace=true\nruntime.log.info.stacktrace=false\nruntime.log.invalid.reference=true\n\n```\n\n\n## 三、简单模板\n``` xml\n<html>\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/>\n  <title>$!title</title>\n</head>\n<body>\n  <h1>标题：$!title</h1>\n  <div>\n    <p>内容：$!content</p>\n    <p>macro函数测试：#test()</p>\n  </div>\n</body>\n</html>\n```\n\n\n## 四、模板渲染\n使用VelocityEngineUtils能很方便的merge template。\n需要准备一个Map，用于传递变量到VLT中。\n\n**代码样例**：\n``` java\n    Map<String, Object> model = Maps.newHashMap();\n    model.put(\"title\", \"Velocity Template\");\n    model.put(\"content\", \"Content in Velocity Template\");\n    \n    String text = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, \"test.vm\", Constants.ENCODING, model);\n```\n\n## 五、参考文档\n1. [VelocityAndSpringStepByStep](http://wiki.apache.org/velocity/VelocityAndSpringStepByStep)\n2. [velocity.properties配置说明](http://mj4d.iteye.com/blog/1524050)\n3. [springmvc 3.1整合velocity](http://blog.csdn.net/glarystar/article/details/6636574)\n4. [configuring_resource_loaders](http://velocity.apache.org/engine/releases/velocity-1.5/developer-guide.html#configuring_resource_loaders)\n\n","source":"_posts/article/spring/spring整合实践 - velocity.md","raw":"\ncategories:\n\t- spring\ntags:\n\t- spring整合实践\n\t- spring\ntitle: spring整合实践 - velocity\n---\n\n[TOC]\n\n此段内容说明如何整合spring与velocity。\n此文并不介绍如何使用velocity代替jsp作为页面渲染配置(参考：VelocityAndSpringStepByStep)，仅仅只是输出特定格式的html、xml或文本等内容的整合实践。\n\n\n## 一、配置spring mvc\n首先，web.xml添加spring容器配置:spring-beans.xml, spring-mvc.xml.\n\n\n## velocity engine实例化\n对于spring父容器spring-beans.xml，除开启注解，注入配置文件等基本配置外，向容器添加velocity engine对象定义，注入velocityEngine对象。\n\n具体配置片段如下：\n``` xml\n  <bean id=\"velocityEngine\" class=\"org.springframework.ui.velocity.VelocityEngineFactoryBean\">\n    <property name=\"resourceLoaderPath\" value=\"/WEB-INF/vm/\" />\n    <property name=\"configLocation\" value=\"classpath:velocity.properties\" />\n  </bean>\n```\n\n其中，将velocity模板放置在/martinye-demo-spring-velocity/src/main/webapp/WEB-INF/vm目录，将velocity.properties文件放置在/martinye-demo-spring-velocity/src/main/resources目录。\n**注**：vm模板也可以放置到src/main/resources目录下。\n\n\n<!-- more -->\n\n## 二、velocity配置\nvelocity.properties配置会覆盖默认配置。\n默认配置文件的位置：velocity.jar包路径org.apache.velocity.runtime.defaults下（velocity.properties）。\n\n更详细参数配置可参考：configuring_resource_loaders\n\n根据需要我们自定义的配置文件内容，如下所示：\n``` properties\n\n# encoding\ninput.encoding=UTF-8\noutput.encoding=UTF-8\ncontentType=text/html;charset=UTF-8\n\n\n# autoreload when vm changed\nfile.resource.loader.cache=false\nfile.resource.loader.modificationCheckInterval=1\nvelocimacro.library.autoreload=true\n\n\n# macro config\n# 默认情况，velocimacro.library相对于resourceLoaderPath目录\nvelocimacro.library=macro.vm\n#velocimacro.permissions.allow.inline=true\n#velocimacro.permissions.allow.inline.to.replace.global=false\n#velocimacro.permissions.allow.inline.local.scope=false\n\n#layout\n#tools.view.servlet.layout.directory=/WEB-INF/vm/layout/\n#tools.view.servlet.error.template=/WEB-INF/vm/error.vm\n#tools.view.servlet.layout.default.template=default.vm\n\n\n# runtime log\nruntime.log=velocity.log\nruntime.log.logsystem.class=org.springframework.ui.velocity.CommonsLoggingLogSystem\nruntime.log.error.stacktrace=true\nruntime.log.warn.stacktrace=true\nruntime.log.info.stacktrace=false\nruntime.log.invalid.reference=true\n\n```\n\n\n## 三、简单模板\n``` xml\n<html>\n<head>\n  <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\"/>\n  <title>$!title</title>\n</head>\n<body>\n  <h1>标题：$!title</h1>\n  <div>\n    <p>内容：$!content</p>\n    <p>macro函数测试：#test()</p>\n  </div>\n</body>\n</html>\n```\n\n\n## 四、模板渲染\n使用VelocityEngineUtils能很方便的merge template。\n需要准备一个Map，用于传递变量到VLT中。\n\n**代码样例**：\n``` java\n    Map<String, Object> model = Maps.newHashMap();\n    model.put(\"title\", \"Velocity Template\");\n    model.put(\"content\", \"Content in Velocity Template\");\n    \n    String text = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, \"test.vm\", Constants.ENCODING, model);\n```\n\n## 五、参考文档\n1. [VelocityAndSpringStepByStep](http://wiki.apache.org/velocity/VelocityAndSpringStepByStep)\n2. [velocity.properties配置说明](http://mj4d.iteye.com/blog/1524050)\n3. [springmvc 3.1整合velocity](http://blog.csdn.net/glarystar/article/details/6636574)\n4. [configuring_resource_loaders](http://velocity.apache.org/engine/releases/velocity-1.5/developer-guide.html#configuring_resource_loaders)\n\n","slug":"article/spring/spring整合实践 - velocity","published":1,"date":"2015-07-21T06:28:42.646Z","updated":"2015-07-17T08:41:29.244Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcml1000lx5vuqjr2rtxm"},{"title":"spring mvc service实例化二次问题","_content":"\n描述：错误地spring容器配置，导致spring实例service二次。\n\n\n## 项目现状\n\n### web.xml配置\nweb容器，首先加载spring-beans.xml配置，再加载spring-mvc.xml配置。\n``` xml\n  <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->\n  <context-param>\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:spring-beans.xml</param-value>\n  </context-param>\n\n  <!-- Creates the Spring Container shared by all Servlets and Filters -->\n  <listener>\n    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n  </listener>\n\n  <!-- Processes application requests -->\n  <servlet>\n    <servlet-name>spring</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:spring-mvc.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>spring</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n```\n\n\n<!-- more -->\n\n\n### root spring配置\n**期望**通过注解实例化除Controller之外的对象。\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\">\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n### mvc spring配置\n**期望**通过注解实例化只有Controller的对象。\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\">\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n\n## 问题小析\n通过如此配置，发现spring在加载spring-beans.xml时，实例化了一次service，再加载spring-mvc.xml时，实例化了一次controller和一次service，导致spring先后总共实例化二次service的情况发生。\n\n### 解析方案1\nspring-mvc.xml扫描时，base-package设置更细粒度的子包。如：\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo.controller\">\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n此配置的含义：只扫描com.martinye.demo.controller包路径下子标签指明的类型，以及**默认的**@Component、@ManagedBean、@Named注解类型。\n\n**注**：子标签与注解类型冲突，以子标签配置为准。\n\n\n### 解析方案2\n设置use-default-filters值为false，其值默认为true。如：\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\" use-default-filters＝\"false\">\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n此配置的含义：只扫描com.martinye.demo包路径下子标签指明的类型，不自动注册**默认的**@Component、@ManagedBean、@Named注解类型。\n\n**注**：子标签与注解类型冲突，以子标签配置为准。\n\n\n### 结语\n查阅了相关文档，发现：\n1. spring`<context:component-scan>`标签处理逻辑会交给org.springframework.context.config.ContextNamespaceHandler处理，然后季托ComponentScanBeanDefinitionParser会读取配置文件信息并组装成org.springframework.context.annotation.ClassPathBeanDefinitionScanner进行处理。\n2. context:component-scan的子标签，作用有先后顺序，越上面的子标签优先越高。\n3. use-default-filters为true时，实例化ClassPathBeanDefinitionScanner时，会调用registerDefaultFilters，include @Component、@ManagedBean、@Named注解类；否则不include。之后再添加include-filter和exclude-filter里的逻辑。\n\n\n\n## 参考文档\n- [context:component-scan扫描使用上的容易忽略的use-default-filters](http://jinnianshilongnian.iteye.com/blog/1762632)\n- [spring配置中<context:component-scan/>的use-default-filters的作用](http://liuluo129.iteye.com/blog/1943412)\n\n\n","source":"_posts/article/spring/spring mvc service实例化二次问题.md","raw":"categories:\n - spring\n\ntags:\n - spring\n\ntitle: spring mvc service实例化二次问题\n---\n\n描述：错误地spring容器配置，导致spring实例service二次。\n\n\n## 项目现状\n\n### web.xml配置\nweb容器，首先加载spring-beans.xml配置，再加载spring-mvc.xml配置。\n``` xml\n  <!-- The definition of the Root Spring Container shared by all Servlets and Filters -->\n  <context-param>\n    <param-name>contextConfigLocation</param-name>\n    <param-value>classpath:spring-beans.xml</param-value>\n  </context-param>\n\n  <!-- Creates the Spring Container shared by all Servlets and Filters -->\n  <listener>\n    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n  </listener>\n\n  <!-- Processes application requests -->\n  <servlet>\n    <servlet-name>spring</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <init-param>\n      <param-name>contextConfigLocation</param-name>\n      <param-value>classpath:spring-mvc.xml</param-value>\n    </init-param>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>spring</servlet-name>\n    <url-pattern>/</url-pattern>\n  </servlet-mapping>\n```\n\n\n<!-- more -->\n\n\n### root spring配置\n**期望**通过注解实例化除Controller之外的对象。\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\">\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:exclude-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n### mvc spring配置\n**期望**通过注解实例化只有Controller的对象。\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\">\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n\n## 问题小析\n通过如此配置，发现spring在加载spring-beans.xml时，实例化了一次service，再加载spring-mvc.xml时，实例化了一次controller和一次service，导致spring先后总共实例化二次service的情况发生。\n\n### 解析方案1\nspring-mvc.xml扫描时，base-package设置更细粒度的子包。如：\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo.controller\">\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n此配置的含义：只扫描com.martinye.demo.controller包路径下子标签指明的类型，以及**默认的**@Component、@ManagedBean、@Named注解类型。\n\n**注**：子标签与注解类型冲突，以子标签配置为准。\n\n\n### 解析方案2\n设置use-default-filters值为false，其值默认为true。如：\n``` xml\n  <!-- 使用annotation 自动注册bean, 并保证@Required、@Autowired的属性被注入 -->\n  <context:component-scan base-package=\"com.martinye.demo\" use-default-filters＝\"false\">\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    <context:include-filter type=\"annotation\" expression=\"org.springframework.web.bind.annotation.ControllerAdvice\" />\n  </context:component-scan>\n```\n\n此配置的含义：只扫描com.martinye.demo包路径下子标签指明的类型，不自动注册**默认的**@Component、@ManagedBean、@Named注解类型。\n\n**注**：子标签与注解类型冲突，以子标签配置为准。\n\n\n### 结语\n查阅了相关文档，发现：\n1. spring`<context:component-scan>`标签处理逻辑会交给org.springframework.context.config.ContextNamespaceHandler处理，然后季托ComponentScanBeanDefinitionParser会读取配置文件信息并组装成org.springframework.context.annotation.ClassPathBeanDefinitionScanner进行处理。\n2. context:component-scan的子标签，作用有先后顺序，越上面的子标签优先越高。\n3. use-default-filters为true时，实例化ClassPathBeanDefinitionScanner时，会调用registerDefaultFilters，include @Component、@ManagedBean、@Named注解类；否则不include。之后再添加include-filter和exclude-filter里的逻辑。\n\n\n\n## 参考文档\n- [context:component-scan扫描使用上的容易忽略的use-default-filters](http://jinnianshilongnian.iteye.com/blog/1762632)\n- [spring配置中<context:component-scan/>的use-default-filters的作用](http://liuluo129.iteye.com/blog/1943412)\n\n\n","slug":"article/spring/spring mvc service实例化二次问题","published":1,"date":"2015-07-21T06:28:42.646Z","updated":"2015-07-17T08:40:30.920Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcml5000qx5vu6pdrjx1r"},{"title":"在线网站性能测试工具","_content":"\n\n## 推荐工具\n[GT Matrix](http://gtmetrix.com/)\n[Show Slow](http://www.oschina.net/p/show-slow)\n[Google PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights/)\n\n\n## 参考文档\n[推荐10个免费在线测试网页性能工具](http://www.daqianduan.com/3962.html)\n[12 个最好的免费网站速度和性能测试工具](http://segmentfault.com/a/1190000000447171)\n[12 个免费在线的 Web 网站性能测试工具](http://www.oschina.net/news/21033/12-free-online-tools-for-website-testing)\n\n","source":"_posts/article/other/在线网站性能测试工具.md","raw":"\ntitle: 在线网站性能测试工具\n---\n\n\n## 推荐工具\n[GT Matrix](http://gtmetrix.com/)\n[Show Slow](http://www.oschina.net/p/show-slow)\n[Google PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights/)\n\n\n## 参考文档\n[推荐10个免费在线测试网页性能工具](http://www.daqianduan.com/3962.html)\n[12 个最好的免费网站速度和性能测试工具](http://segmentfault.com/a/1190000000447171)\n[12 个免费在线的 Web 网站性能测试工具](http://www.oschina.net/news/21033/12-free-online-tools-for-website-testing)\n\n","slug":"article/other/在线网站性能测试工具","published":1,"date":"2015-07-21T06:28:42.614Z","updated":"2015-07-17T07:47:28.232Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcml9000tx5vucv6rrgwl"},{"title":"ubuntu装机软件","_content":"\n修改软件源为163的源。\n\n[TOC]\n\n\n## 一、应用软件\n\n### 1. 安装vim\n命令：\n> sudo apt-get install vim\n\n\n### 2. chrome\n直接登录官方网站下载deb包。\nhttps://www.google.com/intl/zh-CN/chrome/browser/\n\n**注**：由于访问google需要翻墙，可以暂时下载百度网盘里的旧版本。\n\n\n### 3. 截图工具shutter\nubuntu软件中心可下载。\n\n14.04的shutter不提供自定义快捷键，可以利用系统自带的键盘快捷键设置来达到目的。\n\n**设置自定义快捷键方法**：设置 -> 键盘 -> 快捷键 -> 自定义快捷键\n\n命令：\n> shutter -s\n\n**注**：系统自带的截图工具也不错。\n\n\n<!-- more -->\n\n### 4. unity-tweak-tool\nunity桌面配置工具, ubuntu软件中心可下载。\n\n命令：\n> sudo apt-get install unity-tweak-tool\n\n\n### 5. 极点五笔输入法\n使用系统自带的极点五笔输入法\n14.04的ibus与系统软件捆绑，ibus坏了，可能导致系统崩溃。慎装，更加不要做任何删除ibus操作。\n\n\n### 6. 安装gnome-panel\ngnome面板工具，包含 **gnome-desktop-item-edit** 命令，用于创建桌面图标。\n\n命令：\n> sudo apt-get install gnome-panel\n\n例如：\n> `gnome-desktop-item-edit ~/Desktop/ --create-new`\n> gnome-desktop-item-edit ~/Desktop/app.desktop\n\n\n### 7. 百度准入go-bnac\n百度网盘里应该有。\n在百度工作专用，用于linux环境下连接百度准入。\n\n\n### 8. bcompare\n安装包，百度网盘有。\n**注**：依赖ia32-libs\n\n\n### 9. RabbitVCS\n安装步骤：\n> sudo add-apt-repository ppa:rabbitvcs/ppa\n> sudo apt-get update\n> sudo apt-get install rabbitvcs-core rabbitvcs-cli rabbitvcs-nautilus3 rabbitvcs-gedit\n\n**说明**：重启文档管理器，使用rabbitvcs-nautilus3生效。\n> nautilus -q\n\n**注**：不同的系统版本可能需要替换 rabbitvcs-nautilus3 为 rabbitvcs-nautilus 。另外，rabbitvcs-gedit 如无需要的话，可以不安装。\n\n**参考**：[ubuntu软件—RabbitVCS : TortoiseSVN 的替代者][^1]\n\n\n### 10. VPN工具\n优先使用cisco Anyconnect VPN Tool。\n\n如果连接不成功，则可以考虑安装openconnect。\n安装命令：\n> sudo apt-get install network-manager-openconnect-gnome\n\n连接VPN命令：\n> sudo openconnect vpn.sohu-inc.com\n\n\n### 11. 右键在当前位置打开终端\n命令：\n> sudo apt-get install nautilus-open-terminal\n\n**注**：安装完成后，需要重启文件管理器\n> nautilus -q\n\n\n### 12. 设置chrome代理\n**百度工作**：使用chrome插件 **Proxy SwitchySharp** 加载公司代理配置。\n**搜狐工作**：购买红杏网页浏览代理服务，并下载红杏chrome插件使用。\n\n\n### 13. ubuntu打印机\n**百度工作**：\n参考http://wiki.babel.baidu.com/twiki/bin/view/Com/Pmo/Iit/Babel/Ubuntu%E5%AE%89%E8%A3%85%E5%85%AC%E5%8F%B8%E6%89%93%E5%8D%B0%E6%9C%BA\n\n\n### 14. 经典菜单classicmenu-indicator\nubuntu软件中心有下载。\n\n命令：\n> `sudo apt-get install --fix-missing classicmenu-indicator`\n\n\n### 15. rar/zip格式压缩工具\n压缩&解压功能，能与ubuntu自带的归档管理器集成。\n\n安装命令：\n> sudo apt-get install rar unrar p7zip-full\n\n卸载命令：\n> sudo apt-get remove rar unrar p7zip-full\n\n\n### 16. chmsee\n命令：\n> sudo apt-get install chmsee\n\n软件源里可能没有chmsee，网上有已经打包好的deb包。\n**注**：由于ubuntu14.04软件库未提供命令下载，网上有已经打包好的deb包。百度网盘里有下载好的64位chmsee：chmsee_1.3.1.1-1~getdeb2_amd64.deb\n\n**参考**：[chmsee_1.3.1.1-1~getdeb2_amd64.deb][^2]\n\n\n### 17. virtualbox\n命令：\n> sudo apt-get install virtualbox-qt\n\n\n### 18. LONGENE QQ2013\n**前提条件**：64位系统需要安装ia32-libs\n\n安装步骤：\n> deb http://archive.ubuntu.com/ubuntu/ raring main restricted universe multiverse\n> sudo apt-get update\n> sudo apt-get install ia32-libs\n> sudo dpkg -i WineQQ2013-20131120-Longene.deb\n\n**注**：WineQQ2012-20121221-Longene.deb已经不让用，而新版本WineQQ2013SP6-20140102-Longene.deb界面又有问题。可以考虑使用webqq + 虚拟机的方式工作。\n\n**参考**：[wine qq 2013 for linux Ubuntu 64位兼容][^3]\n\n\n### 19. markdown编辑器haroopad\n**下载地址**：http://pad.haroopress.com/user.html\n\n\n### 20. wps-office\n**下载地址**：http://linux.wps.cn/\n\n安装字体管理器命令：\n> sudo apt-get install font-manager\n\n**注**：字体安装有问题，过程可能需要执行exe程序，比较坑，建议不使用需要的字段。(使用过程不会报错)\n\n\n### 21. 有道词典\n**下载地址**：http://cidian.youdao.com/index-linux.html\n\n**说明**：\n使用过程发现会系统出现卡顿的现象。所以，不使用时，最好关闭客户端。\n英文发音有问题。\n\n\n### 22. flashplayer独立播放器\n**下载地址**：http://fpdownload.macromedia.com/pub/flashplayer/updaters/11/flashplayer_11_sa.i386.tar.gz\n\n\n### 23. 切换默认的shell版本\n> sudo dpkg-reconfigure dash\n\n**参考**：[Shell编程笔记——Syntax error: \"(\" unexpected][^5]\n\n\n### 24. 百度网盘linux版\nDebian及基于Debian的发行版(比如ubuntu, linuxmint)请直接下载 bcloud-x.x.x.deb这个包, 然后双击deb包就能安装了;\n有些用户并没有安装apt包管理器的GUI界面, 也可以在终端里面安装:\n> $ sudo dpkg -i bcloud-x.x.x.deb\n> $ sudo apt-get -f install\n\n**参考**：\nhttps://github.com/LiuLang/bcloud\nhttps://github.com/LiuLang/bcloud-packages\n\n\n### 25. Ubuntu 14.04 64位字体美化(使用文泉驿微黑)\n> sudo aptitude install ttf-wqy-microhei\n\n**参考**：[Ubuntu 14.04 64位字体美化(使用文泉驿微黑)][^6]\n\n\n### 26. 安装gstreamer0.10-ffmpeg\n``` shell\nsudo add-apt-repository ppa:mc3man/trusty-media\nsudo apt-get update\nsudo apt-get install gstreamer0.10-ffmpeg\n```\n\n**参考**：[Ubuntu 14.04如何轻松启用H.264视频支持][11]\n\n\n\n### 27. 安装curl\n> sudo apt-get install curl\n\n\n\n## 二、开发软件\n\n### 1. 安装git\n命令：\n> sudo apt-get install git\n\n\n### 2. securecrt\nsecurecrt(使用securecrt_linux_crack.pl破解时，需要切换到root用户操作：su root)\n\n\n### 3. subversion\n**注**：可能安装rabbitvcs时已经安装\n\n命令：\n> sudo apt-get install subversion\n> sudo apt-get install libapache2-svn\n\n\n### 4. 安装mysql\n命令：\n> sudo apt-get install mysql-server\n> sudo apt-get install mysql-workbench\n\n\n### 5. java\n下载jdk bin或者tar.gz包，并安装。\n\n修改java配置 ~/.profile\n``` shell\nJAVA_HOME=/home/yeshaoting/java/jdk/jdk1.7.0_51\nCLASSPATH=$JAVA_HOME/jre/lib\nPATH=$PATH:$JAVA_HOME/bin\nexport JAVA_HOME CLASSPATH PATH\n```\n\n\n### 6. eclipse／STS\n**最新的STS下载地址**：http://spring.io/tools/sts/\n\n\n### 7. maven\n\n\n## 三、系统配置\n\n### 1. 设置root密码\n命令：\n> sudo passwd root\n\n\n### 2. 合上笔记本不休眠\n编辑/etc/default/acpi-support\n找到内容：LOCK_SCREEN=true，并修改为：LOCK_SCREEN=false\n\n\n### 3. 中文语言支持\n\n\n### 4. 用户目录英文名\n中文ubuntu里用户目录里的路径改成英文\n\n执行命令：\n> export LANG=en_US\n> xdg-user-dirs-gtk-update\n\n接下来，会跳出对话框询问：是否将目录转化为英文路径，同意并关闭。\n在终端中输入命令：export LANG=zh_CN\n关闭终端，并重起。下次进入系统，系统会提示是否把转化好的目录改回中文。\n选择不再提示，并取消修改。\n主目录的中文转英文就完成了~\n\n\n### 5. 自动挂载windows分区\n查看硬盘的分区情况：\n`df -h` 或者 `sudo fdisk -l` 或者使用GParted分区编辑器查看。\n\n编辑/etc/fstab文件，添加如下内容：\n``` shell\n# auto mount C disk\n/dev/sda1 /home/yeshaoting/windows/C ntfs-3g defaults,locale=zh_CN.UTF-8,umask=022 0 0\n\n# auto mount D disk\n/dev/sda5 /home/yeshaoting/windows/D ntfs-3g defaults,locale=zh_CN.UTF-8,umask=0,uid=1000,gid=1000 0 0\n\n# auto mount E disk\n/dev/sda6 /home/yeshaoting/windows/E ntfs-3g defaults,locale=zh_CN.UTF-8,umask=0,uid=1000,gid=1000 0 0\n```\n\n**说明**：umask=022表示只读，umask=0表示可读写，uid和gid设置所属权限（可以通过id username命令）。\n\n\n### 6. Eclipse设置 Javadoc背景色\n命令：\n> cd /usr/share/themes/Ambiance/gtk-2.0\n> sudo gedit gtkrc\n\n最终12.04及14.04修改gtkrc文件内容如下：\n``` shell\ngtk-color-scheme = \"base_color:#C7EDCC\\nfg_color:#4c4c4c\\ntooltip_fg_color:#000000\\nselected_bg_color:#f07746\\nselected_fg_color:#FFFFFF\\ntext_color:#3C3C3C\\nbg_color:#f6f4f2\\ntooltip_bg_color:#f2edbc\\nlink_color:#DD4814\"\n```\n\n**参考**：[Ubuntu 12.04 Eclipse设置 Javadoc背景色][^4]\n\n\n### 7. thundbird exchange插件ExQuilla\n\n\n\n## 四、软件储备\n\n### 1. Ubuntu下的阿里旺旺软件\n阿里旺旺的 Ubuntu 下的版本，下载地址是：http://ge.tt/8sPpGIA\n**注**：百度网盘里有。\n\n如遇无法登陆的情况，解除登陆限制即可。\n\n**参考**：http://wowubuntu.com/aliwangwang.html\n\n\n### 3.UltraEdit\n下载页面：http://www.ultraedit.com/downloads/uex.html\n下载地址：http://www.ultraedit.com/files/uex/Ubuntu/\n**注**：百度网盘里有。\n\n#### 关于破解\n1. 下载破解器：keygen_ue(百度网盘里有)\n2. 删除配置目录：~/.idm/uex/uex.conf\n\n**参考**：\n[UltraEdit for Linux破解][^7]\n[UltraEdit for linux 不断试用30天的方法 ][^8]\n\n\n### 4. UltraCompareX\n下载页面：http://www.ultraedit.com/downloads/ucx.html\n下载地址：http://www.ultraedit.com/files/ucx/Ubuntu/\n\n**注**：百度网盘里有。\n\n\n### 5. 飞鸽传书GNU/Linux版\n命令：\n> sudo apt-get install iptux\n\n下载地址：https://code.google.com/p/iptux/downloads/list\n\n**参考**：[信使][^10]\n\n\n### 6. winusb\n安装命令：\n``` shell\nsudo add-apt-repository ppa:colingille/freshlight\nsudo apt-get update\nsudo apt-get install winusb\n```\n\n**参考**：[WinUSB][^9]\n\n\n### 7. kwplayer\n需要下载 python3-xlib_xx.deb, python3-keybinder_xx.deb, kwplayer_xx.deb 这 三个软件包. 直接双击就能安装deb包.\n先安装python3-xlib, 之后是python3-keybinder, 最后是kwplayer.\n当然, 也可以在终端里安装, 比如:\n``` shell\nsudo dpkg -i kwplayer_xx.deb\nsudo apt-get -f install\n```\n\n**参考**：\nhttps://github.com/LiuLang/kwplayer\nhttps://github.com/LiuLang/kwplayer-packages\n\n\n### 8. Folder Color\n该软件已经集成到Ubuntu 15.04默认库中。\nubuntu14或ubuntu12想要安装此软件的话，需要额外添加软件库。\n\n安装命令如下：\n``` shell\nsudo add-apt-repository ppa:costales/folder-color\nsudo apt-get update\nsudo apt-get install folder-color\nnautilus -q\n```\n\n**参考**：[Folder Color 已添加到 Ubuntu 15.04 默认库中][^12]\n\n\n### ubuntu截图默认保存位置\n**参考**：[Default save directory for gnome-screenshot?][^13]\n\n\n\n[^1]: http://www.elain.org/?p=742\n[^2]: http://pkgs.org/ubuntu-14.04/getdeb-apps-amd64/chmsee_1.3.1.1-1~getdeb2_amd64.deb.html\n[^3]: http://www.longene.org/forum/viewtopic.php?t=4700\n[^4]: http://blog.csdn.net/qxb1229/article/details/8265616\n[^5]: http://blog.csdn.net/breeze5428/article/details/27353583\n[^6]: http://blog.csdn.net/tao_627/article/details/24180781\n[^7]: http://mjzhou.com/?p=158\n[^8]: http://blog.itpub.net/12216142/viewspace-708801\n[^9]: http://wiki.deepin.org/index.php?title=WinUSB\n[^10]: http://wiki.deepin.org/index.php?title=%E4%BF%A1%E4%BD%BF\n[^11]: http://imcn.me/html/y2014/19624.html\n[^12]: http://imcn.me/html/y2015/23176.html\n[^13]: http://askubuntu.com/a/134469","source":"_posts/article/linux/ubuntu装机软件.md","raw":"\ncategories:\n - linux\n\ntags:\n - linux\n - ubuntu\n - 软件\n\ntitle: ubuntu装机软件\n---\n\n修改软件源为163的源。\n\n[TOC]\n\n\n## 一、应用软件\n\n### 1. 安装vim\n命令：\n> sudo apt-get install vim\n\n\n### 2. chrome\n直接登录官方网站下载deb包。\nhttps://www.google.com/intl/zh-CN/chrome/browser/\n\n**注**：由于访问google需要翻墙，可以暂时下载百度网盘里的旧版本。\n\n\n### 3. 截图工具shutter\nubuntu软件中心可下载。\n\n14.04的shutter不提供自定义快捷键，可以利用系统自带的键盘快捷键设置来达到目的。\n\n**设置自定义快捷键方法**：设置 -> 键盘 -> 快捷键 -> 自定义快捷键\n\n命令：\n> shutter -s\n\n**注**：系统自带的截图工具也不错。\n\n\n<!-- more -->\n\n### 4. unity-tweak-tool\nunity桌面配置工具, ubuntu软件中心可下载。\n\n命令：\n> sudo apt-get install unity-tweak-tool\n\n\n### 5. 极点五笔输入法\n使用系统自带的极点五笔输入法\n14.04的ibus与系统软件捆绑，ibus坏了，可能导致系统崩溃。慎装，更加不要做任何删除ibus操作。\n\n\n### 6. 安装gnome-panel\ngnome面板工具，包含 **gnome-desktop-item-edit** 命令，用于创建桌面图标。\n\n命令：\n> sudo apt-get install gnome-panel\n\n例如：\n> `gnome-desktop-item-edit ~/Desktop/ --create-new`\n> gnome-desktop-item-edit ~/Desktop/app.desktop\n\n\n### 7. 百度准入go-bnac\n百度网盘里应该有。\n在百度工作专用，用于linux环境下连接百度准入。\n\n\n### 8. bcompare\n安装包，百度网盘有。\n**注**：依赖ia32-libs\n\n\n### 9. RabbitVCS\n安装步骤：\n> sudo add-apt-repository ppa:rabbitvcs/ppa\n> sudo apt-get update\n> sudo apt-get install rabbitvcs-core rabbitvcs-cli rabbitvcs-nautilus3 rabbitvcs-gedit\n\n**说明**：重启文档管理器，使用rabbitvcs-nautilus3生效。\n> nautilus -q\n\n**注**：不同的系统版本可能需要替换 rabbitvcs-nautilus3 为 rabbitvcs-nautilus 。另外，rabbitvcs-gedit 如无需要的话，可以不安装。\n\n**参考**：[ubuntu软件—RabbitVCS : TortoiseSVN 的替代者][^1]\n\n\n### 10. VPN工具\n优先使用cisco Anyconnect VPN Tool。\n\n如果连接不成功，则可以考虑安装openconnect。\n安装命令：\n> sudo apt-get install network-manager-openconnect-gnome\n\n连接VPN命令：\n> sudo openconnect vpn.sohu-inc.com\n\n\n### 11. 右键在当前位置打开终端\n命令：\n> sudo apt-get install nautilus-open-terminal\n\n**注**：安装完成后，需要重启文件管理器\n> nautilus -q\n\n\n### 12. 设置chrome代理\n**百度工作**：使用chrome插件 **Proxy SwitchySharp** 加载公司代理配置。\n**搜狐工作**：购买红杏网页浏览代理服务，并下载红杏chrome插件使用。\n\n\n### 13. ubuntu打印机\n**百度工作**：\n参考http://wiki.babel.baidu.com/twiki/bin/view/Com/Pmo/Iit/Babel/Ubuntu%E5%AE%89%E8%A3%85%E5%85%AC%E5%8F%B8%E6%89%93%E5%8D%B0%E6%9C%BA\n\n\n### 14. 经典菜单classicmenu-indicator\nubuntu软件中心有下载。\n\n命令：\n> `sudo apt-get install --fix-missing classicmenu-indicator`\n\n\n### 15. rar/zip格式压缩工具\n压缩&解压功能，能与ubuntu自带的归档管理器集成。\n\n安装命令：\n> sudo apt-get install rar unrar p7zip-full\n\n卸载命令：\n> sudo apt-get remove rar unrar p7zip-full\n\n\n### 16. chmsee\n命令：\n> sudo apt-get install chmsee\n\n软件源里可能没有chmsee，网上有已经打包好的deb包。\n**注**：由于ubuntu14.04软件库未提供命令下载，网上有已经打包好的deb包。百度网盘里有下载好的64位chmsee：chmsee_1.3.1.1-1~getdeb2_amd64.deb\n\n**参考**：[chmsee_1.3.1.1-1~getdeb2_amd64.deb][^2]\n\n\n### 17. virtualbox\n命令：\n> sudo apt-get install virtualbox-qt\n\n\n### 18. LONGENE QQ2013\n**前提条件**：64位系统需要安装ia32-libs\n\n安装步骤：\n> deb http://archive.ubuntu.com/ubuntu/ raring main restricted universe multiverse\n> sudo apt-get update\n> sudo apt-get install ia32-libs\n> sudo dpkg -i WineQQ2013-20131120-Longene.deb\n\n**注**：WineQQ2012-20121221-Longene.deb已经不让用，而新版本WineQQ2013SP6-20140102-Longene.deb界面又有问题。可以考虑使用webqq + 虚拟机的方式工作。\n\n**参考**：[wine qq 2013 for linux Ubuntu 64位兼容][^3]\n\n\n### 19. markdown编辑器haroopad\n**下载地址**：http://pad.haroopress.com/user.html\n\n\n### 20. wps-office\n**下载地址**：http://linux.wps.cn/\n\n安装字体管理器命令：\n> sudo apt-get install font-manager\n\n**注**：字体安装有问题，过程可能需要执行exe程序，比较坑，建议不使用需要的字段。(使用过程不会报错)\n\n\n### 21. 有道词典\n**下载地址**：http://cidian.youdao.com/index-linux.html\n\n**说明**：\n使用过程发现会系统出现卡顿的现象。所以，不使用时，最好关闭客户端。\n英文发音有问题。\n\n\n### 22. flashplayer独立播放器\n**下载地址**：http://fpdownload.macromedia.com/pub/flashplayer/updaters/11/flashplayer_11_sa.i386.tar.gz\n\n\n### 23. 切换默认的shell版本\n> sudo dpkg-reconfigure dash\n\n**参考**：[Shell编程笔记——Syntax error: \"(\" unexpected][^5]\n\n\n### 24. 百度网盘linux版\nDebian及基于Debian的发行版(比如ubuntu, linuxmint)请直接下载 bcloud-x.x.x.deb这个包, 然后双击deb包就能安装了;\n有些用户并没有安装apt包管理器的GUI界面, 也可以在终端里面安装:\n> $ sudo dpkg -i bcloud-x.x.x.deb\n> $ sudo apt-get -f install\n\n**参考**：\nhttps://github.com/LiuLang/bcloud\nhttps://github.com/LiuLang/bcloud-packages\n\n\n### 25. Ubuntu 14.04 64位字体美化(使用文泉驿微黑)\n> sudo aptitude install ttf-wqy-microhei\n\n**参考**：[Ubuntu 14.04 64位字体美化(使用文泉驿微黑)][^6]\n\n\n### 26. 安装gstreamer0.10-ffmpeg\n``` shell\nsudo add-apt-repository ppa:mc3man/trusty-media\nsudo apt-get update\nsudo apt-get install gstreamer0.10-ffmpeg\n```\n\n**参考**：[Ubuntu 14.04如何轻松启用H.264视频支持][11]\n\n\n\n### 27. 安装curl\n> sudo apt-get install curl\n\n\n\n## 二、开发软件\n\n### 1. 安装git\n命令：\n> sudo apt-get install git\n\n\n### 2. securecrt\nsecurecrt(使用securecrt_linux_crack.pl破解时，需要切换到root用户操作：su root)\n\n\n### 3. subversion\n**注**：可能安装rabbitvcs时已经安装\n\n命令：\n> sudo apt-get install subversion\n> sudo apt-get install libapache2-svn\n\n\n### 4. 安装mysql\n命令：\n> sudo apt-get install mysql-server\n> sudo apt-get install mysql-workbench\n\n\n### 5. java\n下载jdk bin或者tar.gz包，并安装。\n\n修改java配置 ~/.profile\n``` shell\nJAVA_HOME=/home/yeshaoting/java/jdk/jdk1.7.0_51\nCLASSPATH=$JAVA_HOME/jre/lib\nPATH=$PATH:$JAVA_HOME/bin\nexport JAVA_HOME CLASSPATH PATH\n```\n\n\n### 6. eclipse／STS\n**最新的STS下载地址**：http://spring.io/tools/sts/\n\n\n### 7. maven\n\n\n## 三、系统配置\n\n### 1. 设置root密码\n命令：\n> sudo passwd root\n\n\n### 2. 合上笔记本不休眠\n编辑/etc/default/acpi-support\n找到内容：LOCK_SCREEN=true，并修改为：LOCK_SCREEN=false\n\n\n### 3. 中文语言支持\n\n\n### 4. 用户目录英文名\n中文ubuntu里用户目录里的路径改成英文\n\n执行命令：\n> export LANG=en_US\n> xdg-user-dirs-gtk-update\n\n接下来，会跳出对话框询问：是否将目录转化为英文路径，同意并关闭。\n在终端中输入命令：export LANG=zh_CN\n关闭终端，并重起。下次进入系统，系统会提示是否把转化好的目录改回中文。\n选择不再提示，并取消修改。\n主目录的中文转英文就完成了~\n\n\n### 5. 自动挂载windows分区\n查看硬盘的分区情况：\n`df -h` 或者 `sudo fdisk -l` 或者使用GParted分区编辑器查看。\n\n编辑/etc/fstab文件，添加如下内容：\n``` shell\n# auto mount C disk\n/dev/sda1 /home/yeshaoting/windows/C ntfs-3g defaults,locale=zh_CN.UTF-8,umask=022 0 0\n\n# auto mount D disk\n/dev/sda5 /home/yeshaoting/windows/D ntfs-3g defaults,locale=zh_CN.UTF-8,umask=0,uid=1000,gid=1000 0 0\n\n# auto mount E disk\n/dev/sda6 /home/yeshaoting/windows/E ntfs-3g defaults,locale=zh_CN.UTF-8,umask=0,uid=1000,gid=1000 0 0\n```\n\n**说明**：umask=022表示只读，umask=0表示可读写，uid和gid设置所属权限（可以通过id username命令）。\n\n\n### 6. Eclipse设置 Javadoc背景色\n命令：\n> cd /usr/share/themes/Ambiance/gtk-2.0\n> sudo gedit gtkrc\n\n最终12.04及14.04修改gtkrc文件内容如下：\n``` shell\ngtk-color-scheme = \"base_color:#C7EDCC\\nfg_color:#4c4c4c\\ntooltip_fg_color:#000000\\nselected_bg_color:#f07746\\nselected_fg_color:#FFFFFF\\ntext_color:#3C3C3C\\nbg_color:#f6f4f2\\ntooltip_bg_color:#f2edbc\\nlink_color:#DD4814\"\n```\n\n**参考**：[Ubuntu 12.04 Eclipse设置 Javadoc背景色][^4]\n\n\n### 7. thundbird exchange插件ExQuilla\n\n\n\n## 四、软件储备\n\n### 1. Ubuntu下的阿里旺旺软件\n阿里旺旺的 Ubuntu 下的版本，下载地址是：http://ge.tt/8sPpGIA\n**注**：百度网盘里有。\n\n如遇无法登陆的情况，解除登陆限制即可。\n\n**参考**：http://wowubuntu.com/aliwangwang.html\n\n\n### 3.UltraEdit\n下载页面：http://www.ultraedit.com/downloads/uex.html\n下载地址：http://www.ultraedit.com/files/uex/Ubuntu/\n**注**：百度网盘里有。\n\n#### 关于破解\n1. 下载破解器：keygen_ue(百度网盘里有)\n2. 删除配置目录：~/.idm/uex/uex.conf\n\n**参考**：\n[UltraEdit for Linux破解][^7]\n[UltraEdit for linux 不断试用30天的方法 ][^8]\n\n\n### 4. UltraCompareX\n下载页面：http://www.ultraedit.com/downloads/ucx.html\n下载地址：http://www.ultraedit.com/files/ucx/Ubuntu/\n\n**注**：百度网盘里有。\n\n\n### 5. 飞鸽传书GNU/Linux版\n命令：\n> sudo apt-get install iptux\n\n下载地址：https://code.google.com/p/iptux/downloads/list\n\n**参考**：[信使][^10]\n\n\n### 6. winusb\n安装命令：\n``` shell\nsudo add-apt-repository ppa:colingille/freshlight\nsudo apt-get update\nsudo apt-get install winusb\n```\n\n**参考**：[WinUSB][^9]\n\n\n### 7. kwplayer\n需要下载 python3-xlib_xx.deb, python3-keybinder_xx.deb, kwplayer_xx.deb 这 三个软件包. 直接双击就能安装deb包.\n先安装python3-xlib, 之后是python3-keybinder, 最后是kwplayer.\n当然, 也可以在终端里安装, 比如:\n``` shell\nsudo dpkg -i kwplayer_xx.deb\nsudo apt-get -f install\n```\n\n**参考**：\nhttps://github.com/LiuLang/kwplayer\nhttps://github.com/LiuLang/kwplayer-packages\n\n\n### 8. Folder Color\n该软件已经集成到Ubuntu 15.04默认库中。\nubuntu14或ubuntu12想要安装此软件的话，需要额外添加软件库。\n\n安装命令如下：\n``` shell\nsudo add-apt-repository ppa:costales/folder-color\nsudo apt-get update\nsudo apt-get install folder-color\nnautilus -q\n```\n\n**参考**：[Folder Color 已添加到 Ubuntu 15.04 默认库中][^12]\n\n\n### ubuntu截图默认保存位置\n**参考**：[Default save directory for gnome-screenshot?][^13]\n\n\n\n[^1]: http://www.elain.org/?p=742\n[^2]: http://pkgs.org/ubuntu-14.04/getdeb-apps-amd64/chmsee_1.3.1.1-1~getdeb2_amd64.deb.html\n[^3]: http://www.longene.org/forum/viewtopic.php?t=4700\n[^4]: http://blog.csdn.net/qxb1229/article/details/8265616\n[^5]: http://blog.csdn.net/breeze5428/article/details/27353583\n[^6]: http://blog.csdn.net/tao_627/article/details/24180781\n[^7]: http://mjzhou.com/?p=158\n[^8]: http://blog.itpub.net/12216142/viewspace-708801\n[^9]: http://wiki.deepin.org/index.php?title=WinUSB\n[^10]: http://wiki.deepin.org/index.php?title=%E4%BF%A1%E4%BD%BF\n[^11]: http://imcn.me/html/y2014/19624.html\n[^12]: http://imcn.me/html/y2015/23176.html\n[^13]: http://askubuntu.com/a/134469","slug":"article/linux/ubuntu装机软件","published":1,"date":"2015-07-23T05:20:45.333Z","updated":"2015-07-23T05:20:45.333Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmlc000ux5vuyqx0hsom"},{"title":"ubuntu如何使用抓包工具","_content":"\n## 借助fiddler\n\n**参考**：[回归 Windows 下的 Fiddler][^1]\n\n要说起抓包工具，当算顶顶大名的fiddler。\n只是fiddler程序依赖net framework，而非跨平台工具，只能在window环境下进行抓包。\n\n为了完成ubuntu的浏览行为被window下的fiddler抓包，可以借助虚拟机，里面安装window系统，并安装fiddler，然后开启fiddler的代理功能。\n\n\n### 设置fiddler代理\n\n进入fiddler options，点击Connections选项卡。\n勾选 **Allow remote computers to connect**，并设置 fiddler listens on port值为8080。\n如图所示：\n![fiddler代理设置](http://7xkl4i.com1.z0.glb.clouddn.com/fiddler%20proxy%20settings.png)\n\n\n### ubuntu使用fiddler代理\n打开ubuntu的网络设置，网络代理处添加HTTP代理。\n\n如图所示：\n![ubuntu使用fiddler代理](http://7xkl4i.com1.z0.glb.clouddn.com/ubuntu使用fiddler代理.png)\n\n\n### 补充说明:虚拟机网络连接\n\n**参考**：[VirtualBox虚拟机网络连接设置的四种方式][^2]\n\n如果使用虚拟机里的fiddler，则需要注意网络的连接方式为\"桥接网卡\"方式，这样虚拟机里的系统能分配到一个IP地址，主机能通过这个IP地址及对应的端口访问到fiddler开启的代理。\n\n其实，只要主机能通过虚拟机IP ping通即可。\n\n\n## 借助charles\n\n\n\n\n[^1]: http://imququ.com/post/user-fiddler-on-macos.html#toc-4\n[^2]: http://pengranxiang.iteye.com/blog/715829","source":"_posts/article/linux/ubuntu如何使用抓包工具.md","raw":"\ncategories:\n - linux\n\ntags:\n  - 抓包\n  - ubuntu\n  - linux\n\ntitle: ubuntu如何使用抓包工具\n---\n\n## 借助fiddler\n\n**参考**：[回归 Windows 下的 Fiddler][^1]\n\n要说起抓包工具，当算顶顶大名的fiddler。\n只是fiddler程序依赖net framework，而非跨平台工具，只能在window环境下进行抓包。\n\n为了完成ubuntu的浏览行为被window下的fiddler抓包，可以借助虚拟机，里面安装window系统，并安装fiddler，然后开启fiddler的代理功能。\n\n\n### 设置fiddler代理\n\n进入fiddler options，点击Connections选项卡。\n勾选 **Allow remote computers to connect**，并设置 fiddler listens on port值为8080。\n如图所示：\n![fiddler代理设置](http://7xkl4i.com1.z0.glb.clouddn.com/fiddler%20proxy%20settings.png)\n\n\n### ubuntu使用fiddler代理\n打开ubuntu的网络设置，网络代理处添加HTTP代理。\n\n如图所示：\n![ubuntu使用fiddler代理](http://7xkl4i.com1.z0.glb.clouddn.com/ubuntu使用fiddler代理.png)\n\n\n### 补充说明:虚拟机网络连接\n\n**参考**：[VirtualBox虚拟机网络连接设置的四种方式][^2]\n\n如果使用虚拟机里的fiddler，则需要注意网络的连接方式为\"桥接网卡\"方式，这样虚拟机里的系统能分配到一个IP地址，主机能通过这个IP地址及对应的端口访问到fiddler开启的代理。\n\n其实，只要主机能通过虚拟机IP ping通即可。\n\n\n## 借助charles\n\n\n\n\n[^1]: http://imququ.com/post/user-fiddler-on-macos.html#toc-4\n[^2]: http://pengranxiang.iteye.com/blog/715829","slug":"article/linux/ubuntu如何使用抓包工具","published":1,"date":"2015-07-23T10:45:17.050Z","updated":"2015-07-23T10:45:17.050Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmlj0013x5vum9kpmmwc"},{"title":"linux安装nginx","_content":"\nNginx服务器的安装配置\n\n\n## 1. 下载并解压安装包\n下载地址：http://nginx.org/en/download.html\n\n> tar -zxvf nginx-x.x.xx.tar.gz （x.x.xx：为版本号）\n\n\n## 2. 编译\n``` shell\ncd nginx-x.x.xx\n./configure --with-http_stub_status_module --prefix=/home/yeshaoting/java/server/nginx/nginx-1.8.0 --without-http_rewrite_module --without-http_gzip_module\n```\n\n\n参考：[Nginx服务器的安装配置](http://minitoo.blog.51cto.com/4201040/850654)","source":"_posts/article/linux/linux安装nginx.md","raw":"\ncategories:\n- linux\n\ntags:\n- linux\n- nginx\n\ntitle: linux安装nginx\n---\n\nNginx服务器的安装配置\n\n\n## 1. 下载并解压安装包\n下载地址：http://nginx.org/en/download.html\n\n> tar -zxvf nginx-x.x.xx.tar.gz （x.x.xx：为版本号）\n\n\n## 2. 编译\n``` shell\ncd nginx-x.x.xx\n./configure --with-http_stub_status_module --prefix=/home/yeshaoting/java/server/nginx/nginx-1.8.0 --without-http_rewrite_module --without-http_gzip_module\n```\n\n\n参考：[Nginx服务器的安装配置](http://minitoo.blog.51cto.com/4201040/850654)","slug":"article/linux/linux安装nginx","published":1,"date":"2015-07-21T06:57:09.434Z","updated":"2015-07-21T06:57:09.434Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmlr0019x5vu5rrrkdap"},{"title":"Ubuntu更改截图默认保存位置","_content":"\n## 图形界面\n\n安装dconf-editor\n> sudo apt-get install dconf-editor\n\n打开dconf-editor，进入org -> gnome -> gnome-screenshot，修改auto-save-directory值为 file:///home/yeshaoting/Pictures/screenshot/。\n\n\n## 命令行\n> gsettings set org.gnome.gnome-screenshot auto-save-directory \"file:///home/yeshaoting/Pictures/screenshot/\"\n\n参考文档：[Default save directory for gnome-screenshot?](http://askubuntu.com/a/134469)","source":"_posts/article/linux/Ubuntu更改截图默认保存位置.md","raw":"\ncategories:\n - linux\n\ntags:\n  - linux\n  - ubuntu\n\ntitle: Ubuntu更改截图默认保存位置\n---\n\n## 图形界面\n\n安装dconf-editor\n> sudo apt-get install dconf-editor\n\n打开dconf-editor，进入org -> gnome -> gnome-screenshot，修改auto-save-directory值为 file:///home/yeshaoting/Pictures/screenshot/。\n\n\n## 命令行\n> gsettings set org.gnome.gnome-screenshot auto-save-directory \"file:///home/yeshaoting/Pictures/screenshot/\"\n\n参考文档：[Default save directory for gnome-screenshot?](http://askubuntu.com/a/134469)","slug":"article/linux/Ubuntu更改截图默认保存位置","published":1,"date":"2015-07-27T03:52:07.197Z","updated":"2015-07-27T03:52:07.197Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmlv001ex5vu9zv8y3qg"},{"title":"Linux安装极点五笔的方法","_content":"\n参考：http://hi.baidu.com/hkdog/item/8ae75ea5938e23de5af191ff\n\n\n## 1.下载附件文件vissible-ibus.tar.gz\n免费下载地址在http://linux.linuxidc.com/\n用户名与密码都是www.linuxidc.com\n具体下载目录在/pub/2011/10/23/Ubuntu 11.10安装极点五笔/\n\n\n## 2.安装\n$ tar xvzf vissible-ibus.tar.gz\n$ cd vissible-ibus\n$ sudo cp vissible.db /usr/share/ibus-table/tables\n$ sudo cp vissible.gif /usr/share/ibus-table/icons\n\n\n<!-- more -->\n\n## 3.删除文件\n$ rm vissible-ibus.tar.gz\n$ rm vissible.db\n$ rm vissible.gif\n$ rm vissible.txt\n\n\n## 4.启动输入法\n在任务栏右键点那个键盘小图标，在下拉菜单选“重新重启”（这个重新启动并不是重并报启动系统，\n而是重新启动ibus输入法），然后再右键点那个键盘小图标并在下拉菜单中选“首选项”，然后在弹\n出的窗口中点击“输入法”选项卡，接着点“选择输入法”，然后添加极点五笔就可以了。\n\n\n## 5.修改右shift为中英文切换\n$ sudo vim table.py\n/match Match mode switch hotkey\n\n\\# Match mode switch hotkey\nif not self._editor._t_chars and ( self._match_hotkey (key, keysyms.Shift_L, modifier.SHIFT_MASK + modifier.RELEASE_MASK)):\n把Shift_L 改为Shift_R\n/match because we ignore all Release event below\n\n\\# because we ignore all Release event below.\nif self._match_hotkey (key, keysyms.Shift_R, modifier.SHIFT_MASK + modifier.RELEASE_MASK) and self._ime_py:\n把Shift_R 改为Shift_L\n","source":"_posts/article/linux/Linux安装极点五笔的方法.md","raw":"\ncategories:\n - linux\n\ntags:\n - linux\n - 五笔\n\ntitle: Linux安装极点五笔的方法\n---\n\n参考：http://hi.baidu.com/hkdog/item/8ae75ea5938e23de5af191ff\n\n\n## 1.下载附件文件vissible-ibus.tar.gz\n免费下载地址在http://linux.linuxidc.com/\n用户名与密码都是www.linuxidc.com\n具体下载目录在/pub/2011/10/23/Ubuntu 11.10安装极点五笔/\n\n\n## 2.安装\n$ tar xvzf vissible-ibus.tar.gz\n$ cd vissible-ibus\n$ sudo cp vissible.db /usr/share/ibus-table/tables\n$ sudo cp vissible.gif /usr/share/ibus-table/icons\n\n\n<!-- more -->\n\n## 3.删除文件\n$ rm vissible-ibus.tar.gz\n$ rm vissible.db\n$ rm vissible.gif\n$ rm vissible.txt\n\n\n## 4.启动输入法\n在任务栏右键点那个键盘小图标，在下拉菜单选“重新重启”（这个重新启动并不是重并报启动系统，\n而是重新启动ibus输入法），然后再右键点那个键盘小图标并在下拉菜单中选“首选项”，然后在弹\n出的窗口中点击“输入法”选项卡，接着点“选择输入法”，然后添加极点五笔就可以了。\n\n\n## 5.修改右shift为中英文切换\n$ sudo vim table.py\n/match Match mode switch hotkey\n\n\\# Match mode switch hotkey\nif not self._editor._t_chars and ( self._match_hotkey (key, keysyms.Shift_L, modifier.SHIFT_MASK + modifier.RELEASE_MASK)):\n把Shift_L 改为Shift_R\n/match because we ignore all Release event below\n\n\\# because we ignore all Release event below.\nif self._match_hotkey (key, keysyms.Shift_R, modifier.SHIFT_MASK + modifier.RELEASE_MASK) and self._ime_py:\n把Shift_R 改为Shift_L\n","slug":"article/linux/Linux安装极点五笔的方法","published":1,"date":"2015-07-21T06:28:42.538Z","updated":"2015-07-17T08:39:32.052Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmly001ix5vubtv3mo77"},{"title":"Linux命令小记","_content":"\n[TOC]\n\n\n## 1. cpu/内存占用率排序\n``` shell\nps auxw --sort=%cpu\nps auxw --sort=%mem\n```\n\n\n## 2. 批量关闭进程\n``` shell\nkill -9 `ps -ef | grep QQ | grep -v 'grep' | awk {'print $2'}`\n```\n\n\n## 3. vim显示/隐藏行号\n``` shell\n:set nu 或 :set number\n:set nonu 或 :set nonumber\n```\n\n\n## 4. 磁盘格式转换为ntfs( 会格式化磁盘 )\n`convert X: /fs:ntfs`\n\n\n## 5. 打印时间\n``` shell\necho `date '+%Y-%m-%d %H:%M:%S'`\n```\n\n<!-- more -->\n\n## 6. 批量解压zip文件\n`for z in ./*.zip; do unzip -o $z -d ./peixun-logger ; done;`\n\n\n## 7. 查找特定文件指定字符串\n`grep \"no object DCH for MIME type multipart/mixed\" *.log > MIME.log`\n\n\n## 8. 查看端口占用\n``` shell\nlsof -i:8080\nps -aux | grep java\nps -aux | grep pid\n```\n\n\n## 9. 进程批量中止\n``` shell\nkill -9 `ps -ef | grep QQ | grep -v grep | awk {'print $2'}`\n```\n\n\n## 10. 命令后台处理\n`nohup command &`\n\n\n## 11. 查看日历\ncal\n\n\n## 12. 时间显示\ndata\n\n## 13. 查找文本内容\n`grep -i -r --exclude=*.jar --exclude=*.log* noah .`\n\n\n## 14. 查看tomcat日志特定内容\n`tail -f catalina.out | grep timecost | grep FamilyController | awk '{if($10 > 100) print $0}'`\n\n\n## 15. 查看tomcat某天日志\n`tail -800000 catalina.out | grep 2014-06-30 > 2014-06-30.log`\n\n\n## 16. 记录统计\n``` shell\ngrep searchAddressForFamily 3.all.txt | wc -l\nls | wc -l\n```\n\n\n## 17. 查看文件或文件夹命令\nlinux 下查看文件个数及大小\n`ls -l |grep \"^-\"|wc -l 或 find ./company -type f | wc -l`\n\n查看某文件夹下文件的个数，包括子文件夹里的。\n`ls -lR|grep \"^-\"|wc -l`\n\n查看某文件夹下文件夹的个数，包括子文件夹里的。\n`ls -lR|grep \"^d\"|wc -l`\n\n\n## 18. 获取shell脚本位置/当前脚本目录\n不能解决软链接问题：`$(cd \"$(dirname \"$0\")\"; pwd)`\n最靠谱，能处理软链接的情况以及source加载脚本的情况：`echo $( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )`\n\n\n## 19. tar打包文件，exclude选项排除指定文件或目录\n`tar zcvf ../fetch-wiki.tar.gz * --exclude=*.txt* --exclude=logs`\n\n\n## 20. 删除 - 开头的文件\n``` shell\nrm --  -filename\nrm -- ./-filename\n```\n\n\n## 21. 查找特定字符串在文件中出现位置\n`tail -2000000 catalina.out | cat -n | grep \"2014-07-10\" | head  -2 (对于出现在文末)`\n\n\n## 22. 判断shell脚本输入参数个数\n`if [ $# -eq 0 ]; then`\n\n\n## 23. 逐行读取文本文件的 shell 脚本\n``` shell\nwhile read line\ndo\necho $line\ndone < $1\n```\n\n## 24. echo输出制表符方式\n`echo -e \"123\\t345\"`\n\n\n## 25. for循环\n``` shell\nfor index in {1..31}\ndo\n    ……\ndone\n```\n\n\n## 26. 按修改先后，列出文件\n`ls -lt`\n\n\n## 27. 上条命令是否成功执行\n``` shell\nEXCODE=$?\nif [ \"$EXCODE\" == \"0\" ]; then\necho \"O.K\"\nelse\necho \"NOT O.K\"\nfi\n```\n\n## 28. 加载配置\n``` shell\n. slave.conf\nsource slave.conf\n```\n\n**注**：slave.conf里的值格式为K=V\n\n\n## 29. 执行字符串命令\n``` shell\nSLAVE_PID_COMMAND=\"ps -ef | grep $SECRET_ID | grep -v grep | awk '{print \\$2}'\"\nSLAVE_PID=$(eval $SLAVE_PID_COMMAND)\n```\n\n**注**：\n\\$要转义处理执行\n执行字符串里的命令，使用eval命令\n获取命令执行结果，可以用$()把命令包里来。\n\n\n## 30. 去除空白行的sed\n``` shell\nSECRET=`sed '/^$/d' file.txt | head -1`\n```\n\n\n## 31. shell换行\n`echo -e \"123\\n34\"`\n\n-e 表示特殊处理字符串里的特殊字符。\n\n\n## 32. 获取某文件路径文件名\nbasename soft_install/jenkins-job-install/archive/jdk1.7.0_60.tar.gz .tar.gz => jdk1.7.0_60\n\n\n## 33. 通过sed替换字特殊字符\n`echo \"12,34,56\" | sed 's/,/ /g'`\n\n\n## 34. 通过sed替换二者之间的字符串内容\n文本内容：\n``` xml\n<server   id=\"film-web\"   address=\"127.0.0.1\" port=\"6881\">\n</server>\n```\n\n``` shell\nsed -n \"s/\\( *server.*port=\\\"\\).*\\(\\\".*\\)/\\1abc\\2/p\" 1.txt\nsed -n \"s/\\( *server.*address=\\\"\\).*\\(\\\" *port\\)/\\1abc\\2/p\" 1.txt\n```\n\n**注**：sed里，使用圆括号括起来的内容，可以看做是变量。使用\\1和\\2来输出。\n**参见**：http://coolshell.cn/articles/9104.html 圆括号匹配\n\n\n\n## 35. vim替换指定区域匹配文本\n```\n: 41,57 s/10.13.92.143/10.13.92.157/g\n```\n\n\n## 36. 从替换开始匹配行到行尾或结束匹配行区间内替换内容\n``` shell\nsed -i \"/ *server *id=/,\\${s/\\(\\<watchdog-port>\\).*\\(<\\/watchdog-port>\\)/\\18000\\2/g;}\" resin.conf\nsed \"/ *server *id=\\\"/,/<\\/server>/{s/\\(\\<watchdog-port>\\).*\\(<\\/watchdog-port>\\)/\\18888\\2/g;}\" resin.conf\n```\n\n**注**：每个匹配前后都需要加/，见上面红色部分。$表示最后一行，不需要加/\n\n\n## 37. shell注释\n``` shell\n:<<comment\n这里是个注释哈。\ncomment\n```\n\n\n## 38. 截取程序日志中某个时间范围内的文本\n``` xml\nsed -n '/^2015-05-14 15:32:30/,/^2015-05-14 16:12:09/p' access_log > log.txt\n```\n\n\n## 39. 重启ibus\nkillall ibus-daemon\nibus-daemon -drx\n\n\n## 40. 删除重复的、非连续的行\n`awk '! a[$0]++'`\n\n\n## 41. awk使用特殊分隔符分隔列\n``` shell\necho \"192.168.102.134\" | awk -F . '{print $4}'\n```\n\n## 42. 查看当前bash shell版本\necho $BASH_VERSION\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","source":"_posts/article/linux/Linux命令小记.md","raw":"\ncategories:\n - linux\n\ntags:\n - linux\n - 小记\n - 命令\n\ntitle: Linux命令小记\n---\n\n[TOC]\n\n\n## 1. cpu/内存占用率排序\n``` shell\nps auxw --sort=%cpu\nps auxw --sort=%mem\n```\n\n\n## 2. 批量关闭进程\n``` shell\nkill -9 `ps -ef | grep QQ | grep -v 'grep' | awk {'print $2'}`\n```\n\n\n## 3. vim显示/隐藏行号\n``` shell\n:set nu 或 :set number\n:set nonu 或 :set nonumber\n```\n\n\n## 4. 磁盘格式转换为ntfs( 会格式化磁盘 )\n`convert X: /fs:ntfs`\n\n\n## 5. 打印时间\n``` shell\necho `date '+%Y-%m-%d %H:%M:%S'`\n```\n\n<!-- more -->\n\n## 6. 批量解压zip文件\n`for z in ./*.zip; do unzip -o $z -d ./peixun-logger ; done;`\n\n\n## 7. 查找特定文件指定字符串\n`grep \"no object DCH for MIME type multipart/mixed\" *.log > MIME.log`\n\n\n## 8. 查看端口占用\n``` shell\nlsof -i:8080\nps -aux | grep java\nps -aux | grep pid\n```\n\n\n## 9. 进程批量中止\n``` shell\nkill -9 `ps -ef | grep QQ | grep -v grep | awk {'print $2'}`\n```\n\n\n## 10. 命令后台处理\n`nohup command &`\n\n\n## 11. 查看日历\ncal\n\n\n## 12. 时间显示\ndata\n\n## 13. 查找文本内容\n`grep -i -r --exclude=*.jar --exclude=*.log* noah .`\n\n\n## 14. 查看tomcat日志特定内容\n`tail -f catalina.out | grep timecost | grep FamilyController | awk '{if($10 > 100) print $0}'`\n\n\n## 15. 查看tomcat某天日志\n`tail -800000 catalina.out | grep 2014-06-30 > 2014-06-30.log`\n\n\n## 16. 记录统计\n``` shell\ngrep searchAddressForFamily 3.all.txt | wc -l\nls | wc -l\n```\n\n\n## 17. 查看文件或文件夹命令\nlinux 下查看文件个数及大小\n`ls -l |grep \"^-\"|wc -l 或 find ./company -type f | wc -l`\n\n查看某文件夹下文件的个数，包括子文件夹里的。\n`ls -lR|grep \"^-\"|wc -l`\n\n查看某文件夹下文件夹的个数，包括子文件夹里的。\n`ls -lR|grep \"^d\"|wc -l`\n\n\n## 18. 获取shell脚本位置/当前脚本目录\n不能解决软链接问题：`$(cd \"$(dirname \"$0\")\"; pwd)`\n最靠谱，能处理软链接的情况以及source加载脚本的情况：`echo $( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )`\n\n\n## 19. tar打包文件，exclude选项排除指定文件或目录\n`tar zcvf ../fetch-wiki.tar.gz * --exclude=*.txt* --exclude=logs`\n\n\n## 20. 删除 - 开头的文件\n``` shell\nrm --  -filename\nrm -- ./-filename\n```\n\n\n## 21. 查找特定字符串在文件中出现位置\n`tail -2000000 catalina.out | cat -n | grep \"2014-07-10\" | head  -2 (对于出现在文末)`\n\n\n## 22. 判断shell脚本输入参数个数\n`if [ $# -eq 0 ]; then`\n\n\n## 23. 逐行读取文本文件的 shell 脚本\n``` shell\nwhile read line\ndo\necho $line\ndone < $1\n```\n\n## 24. echo输出制表符方式\n`echo -e \"123\\t345\"`\n\n\n## 25. for循环\n``` shell\nfor index in {1..31}\ndo\n    ……\ndone\n```\n\n\n## 26. 按修改先后，列出文件\n`ls -lt`\n\n\n## 27. 上条命令是否成功执行\n``` shell\nEXCODE=$?\nif [ \"$EXCODE\" == \"0\" ]; then\necho \"O.K\"\nelse\necho \"NOT O.K\"\nfi\n```\n\n## 28. 加载配置\n``` shell\n. slave.conf\nsource slave.conf\n```\n\n**注**：slave.conf里的值格式为K=V\n\n\n## 29. 执行字符串命令\n``` shell\nSLAVE_PID_COMMAND=\"ps -ef | grep $SECRET_ID | grep -v grep | awk '{print \\$2}'\"\nSLAVE_PID=$(eval $SLAVE_PID_COMMAND)\n```\n\n**注**：\n\\$要转义处理执行\n执行字符串里的命令，使用eval命令\n获取命令执行结果，可以用$()把命令包里来。\n\n\n## 30. 去除空白行的sed\n``` shell\nSECRET=`sed '/^$/d' file.txt | head -1`\n```\n\n\n## 31. shell换行\n`echo -e \"123\\n34\"`\n\n-e 表示特殊处理字符串里的特殊字符。\n\n\n## 32. 获取某文件路径文件名\nbasename soft_install/jenkins-job-install/archive/jdk1.7.0_60.tar.gz .tar.gz => jdk1.7.0_60\n\n\n## 33. 通过sed替换字特殊字符\n`echo \"12,34,56\" | sed 's/,/ /g'`\n\n\n## 34. 通过sed替换二者之间的字符串内容\n文本内容：\n``` xml\n<server   id=\"film-web\"   address=\"127.0.0.1\" port=\"6881\">\n</server>\n```\n\n``` shell\nsed -n \"s/\\( *server.*port=\\\"\\).*\\(\\\".*\\)/\\1abc\\2/p\" 1.txt\nsed -n \"s/\\( *server.*address=\\\"\\).*\\(\\\" *port\\)/\\1abc\\2/p\" 1.txt\n```\n\n**注**：sed里，使用圆括号括起来的内容，可以看做是变量。使用\\1和\\2来输出。\n**参见**：http://coolshell.cn/articles/9104.html 圆括号匹配\n\n\n\n## 35. vim替换指定区域匹配文本\n```\n: 41,57 s/10.13.92.143/10.13.92.157/g\n```\n\n\n## 36. 从替换开始匹配行到行尾或结束匹配行区间内替换内容\n``` shell\nsed -i \"/ *server *id=/,\\${s/\\(\\<watchdog-port>\\).*\\(<\\/watchdog-port>\\)/\\18000\\2/g;}\" resin.conf\nsed \"/ *server *id=\\\"/,/<\\/server>/{s/\\(\\<watchdog-port>\\).*\\(<\\/watchdog-port>\\)/\\18888\\2/g;}\" resin.conf\n```\n\n**注**：每个匹配前后都需要加/，见上面红色部分。$表示最后一行，不需要加/\n\n\n## 37. shell注释\n``` shell\n:<<comment\n这里是个注释哈。\ncomment\n```\n\n\n## 38. 截取程序日志中某个时间范围内的文本\n``` xml\nsed -n '/^2015-05-14 15:32:30/,/^2015-05-14 16:12:09/p' access_log > log.txt\n```\n\n\n## 39. 重启ibus\nkillall ibus-daemon\nibus-daemon -drx\n\n\n## 40. 删除重复的、非连续的行\n`awk '! a[$0]++'`\n\n\n## 41. awk使用特殊分隔符分隔列\n``` shell\necho \"192.168.102.134\" | awk -F . '{print $4}'\n```\n\n## 42. 查看当前bash shell版本\necho $BASH_VERSION\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"article/linux/Linux命令小记","published":1,"date":"2015-09-07T02:38:18.652Z","updated":"2015-09-07T02:38:18.620Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmm8001nx5vu8nb4apoy"},{"title":"jenkins build-pipeline-plugin 数值解析异常","_content":"\n[TOC]\n\njenkins version: 1.574\n\n## 问题分析\n这是jenkins 里使用了 build-pipeline-plugin，这个插件解析有问题。\n目前，这个bug已经有人修复，处于resolved状态，等待异常报告者验收，修改代码目前是应该处于未发布状态。\n\n**参考**：[Jenkins gives strack trace on main page](https://issues.jenkins-ci.org/browse/JENKINS-24102)\n\n<!-- more -->\n\n## 异常堆栈\n遇到的异常堆栈内容如下：\n``` java\nA problem occurred while processing the request. Please check our bug tracker to see if a similar problem has already been reported. If it is already reported, please vote and put a comment on it to let us gauge the impact of the problem. If you think this is a new issue, please file a new issue. When you file an issue, make sure to add the entire stack trace, along with the version of Jenkins and relevant plugins. The users list might be also useful in understanding what has happened.\n\nStack trace\n\njavax.servlet.ServletException: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/hudson/model/View/index.jelly:42:43: <st:include> org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.kohsuke.stapler.jelly.JellyClassTearOff.serveIndexJelly(JellyClassTearOff.java:117)\n\tat org.kohsuke.stapler.jelly.JellyFacet.handleIndexRequest(JellyFacet.java:127)\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:717)\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:858)\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:795)\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:858)\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:631)\n\tat org.kohsuke.stapler.Stapler.service(Stapler.java:225)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:848)\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:686)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1494)\n\tat hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:96)\n\tat hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:88)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:48)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)\n\tat hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat jenkins.security.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:117)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:174)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:79)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)\n\tat hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:67)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)\n\tat hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:46)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1474)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:499)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:533)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:428)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:370)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:949)\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1011)\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644)\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n\tat org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:668)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)\n\tat winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1156)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:626)\n\tat java.lang.Thread.run(Thread.java:804)\nCaused by: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/hudson/model/View/index.jelly:42:43: <st:include> org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.apache.commons.jelly.impl.TagScript.handleException(TagScript.java:726)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:281)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:99)\n\tat org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$1.run(CoreTagLibrary.java:98)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:120)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:99)\n\tat org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:120)\n\tat org.kohsuke.stapler.jelly.CompressTag.doTag(CompressTag.java:44)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\tat org.kohsuke.stapler.jelly.JellyViewScript.run(JellyViewScript.java:81)\n\tat org.kohsuke.stapler.jelly.DefaultScriptInvoker.invokeScript(DefaultScriptInvoker.java:63)\n\tat org.kohsuke.stapler.jelly.DefaultScriptInvoker.invokeScript(DefaultScriptInvoker.java:53)\n\tat org.kohsuke.stapler.jelly.JellyClassTearOff.serveIndexJelly(JellyClassTearOff.java:112)\n\t... 63 more\nCaused by: java.lang.RuntimeException: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.kohsuke.stapler.jelly.groovy.JellyBuilder.doInvokeMethod(JellyBuilder.java:280)\n\tat org.kohsuke.stapler.jelly.groovy.Namespace$ProxyImpl.invoke(Namespace.java:92)\n\tat com.sun.proxy.$Proxy56.projectView(Unknown Source)\n\tat lib.JenkinsTagLib$projectView.call(Unknown Source)\n\tat hudson.model.View.main.run(main.groovy:14)\n\tat org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:74)\n\tat org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:62)\n\tat org.kohsuke.stapler.jelly.IncludeTag.doTag(IncludeTag.java:147)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\t... 95 more\nCaused by: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.apache.commons.jelly.impl.TagScript.handleException(TagScript.java:726)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:281)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$1.run(CoreTagLibrary.java:98)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:120)\n\tat org.kohsuke.stapler.jelly.groovy.JellyBuilder.doInvokeMethod(JellyBuilder.java:276)\n\t... 103 more\nCaused by: java.lang.NumberFormatException: null\n\tat java.lang.Integer.parseInt(Integer.java:465)\n\tat java.lang.Integer.valueOf(Integer.java:593)\n\tat au.com.centrumsystems.hudson.plugin.buildpipeline.BuildPipelineView.getBuildPipelineForm(BuildPipelineView.java:400)\n\tat au.com.centrumsystems.hudson.plugin.buildpipeline.BuildPipelineView.getItems(BuildPipelineView.java:866)\n\tat au.com.centrumsystems.hudson.plugin.buildpipeline.BuildPipelineView.hasPermission(BuildPipelineView.java:932)\n\tat hudson.model.ViewGroupMixIn.getViews(ViewGroupMixIn.java:115)\n\tat jenkins.model.Jenkins.getViews(Jenkins.java:1444)\n\tat sun.reflect.GeneratedMethodAccessor255.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n\tat java.lang.reflect.Method.invoke(Method.java:618)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\n\tat groovy.lang.MetaClassImpl$GetBeanMethodMetaProperty.getProperty(MetaClassImpl.java:3500)\n\tat org.codehaus.groovy.runtime.callsite.GetEffectivePojoPropertySite.getProperty(GetEffectivePojoPropertySite.java:61)\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetProperty(AbstractCallSite.java:227)\n\tat hudson.model.View.main$_run_closure1.doCall(main.groovy:15)\n\tat sun.reflect.GeneratedMethodAccessor382.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n\tat java.lang.reflect.Method.invoke(Method.java:618)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:903)\n\tat org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)\n\tat hudson.model.View.main$_run_closure1.doCall(main.groovy)\n\tat sun.reflect.GeneratedMethodAccessor381.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n\tat java.lang.reflect.Method.invoke(Method.java:618)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:903)\n\tat groovy.lang.Closure.call(Closure.java:415)\n\tat groovy.lang.Closure.call(Closure.java:409)\n\tat org.kohsuke.stapler.jelly.groovy.JellyBuilder$1.run(JellyBuilder.java:264)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:99)\n\tat org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\t... 111 more\n```\n\n\n## 解决方案\n1. 重启jenkins服务(自己发现的)\n服务出异常后，发现只要jenkins页面刷新后，jenkins cpu使用率会达到200％+，物理内存占用1.1g，虚拟内存占用2.7g。不知道跟这个异常有没关系。\n\n2. 尝试升级build-pipeline-plugin。\n\n3. 尝试升级jenkins版本。","source":"_posts/article/jenkins/jenkin插件buildpipeline数值解析异常.md","raw":"\ncategories:\n  - jenkins\n\ntags:\n  - jenkins\n  - 问题\n\ntitle: jenkins build-pipeline-plugin 数值解析异常\n---\n\n[TOC]\n\njenkins version: 1.574\n\n## 问题分析\n这是jenkins 里使用了 build-pipeline-plugin，这个插件解析有问题。\n目前，这个bug已经有人修复，处于resolved状态，等待异常报告者验收，修改代码目前是应该处于未发布状态。\n\n**参考**：[Jenkins gives strack trace on main page](https://issues.jenkins-ci.org/browse/JENKINS-24102)\n\n<!-- more -->\n\n## 异常堆栈\n遇到的异常堆栈内容如下：\n``` java\nA problem occurred while processing the request. Please check our bug tracker to see if a similar problem has already been reported. If it is already reported, please vote and put a comment on it to let us gauge the impact of the problem. If you think this is a new issue, please file a new issue. When you file an issue, make sure to add the entire stack trace, along with the version of Jenkins and relevant plugins. The users list might be also useful in understanding what has happened.\n\nStack trace\n\njavax.servlet.ServletException: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/hudson/model/View/index.jelly:42:43: <st:include> org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.kohsuke.stapler.jelly.JellyClassTearOff.serveIndexJelly(JellyClassTearOff.java:117)\n\tat org.kohsuke.stapler.jelly.JellyFacet.handleIndexRequest(JellyFacet.java:127)\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:717)\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:858)\n\tat org.kohsuke.stapler.Stapler.tryInvoke(Stapler.java:795)\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:858)\n\tat org.kohsuke.stapler.Stapler.invoke(Stapler.java:631)\n\tat org.kohsuke.stapler.Stapler.service(Stapler.java:225)\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:848)\n\tat org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:686)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1494)\n\tat hudson.util.PluginServletFilter$1.doFilter(PluginServletFilter.java:96)\n\tat hudson.util.PluginServletFilter.doFilter(PluginServletFilter.java:88)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat hudson.security.csrf.CrumbFilter.doFilter(CrumbFilter.java:48)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:84)\n\tat hudson.security.UnwrapSecurityExceptionFilter.doFilter(UnwrapSecurityExceptionFilter.java:51)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat jenkins.security.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:117)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.ui.basicauth.BasicProcessingFilter.doFilter(BasicProcessingFilter.java:174)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat jenkins.security.ApiTokenFilter.doFilter(ApiTokenFilter.java:79)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)\n\tat hudson.security.HttpSessionContextIntegrationFilter2.doFilter(HttpSessionContextIntegrationFilter2.java:67)\n\tat hudson.security.ChainedServletFilter$1.doFilter(ChainedServletFilter.java:87)\n\tat hudson.security.ChainedServletFilter.doFilter(ChainedServletFilter.java:76)\n\tat hudson.security.HudsonFilter.doFilter(HudsonFilter.java:164)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat org.kohsuke.stapler.compression.CompressionFilter.doFilter(CompressionFilter.java:46)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1482)\n\tat hudson.util.CharacterEncodingFilter.doFilter(CharacterEncodingFilter.java:81)\n\tat org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1474)\n\tat org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:499)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137)\n\tat org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:533)\n\tat org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1086)\n\tat org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:428)\n\tat org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193)\n\tat org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1020)\n\tat org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135)\n\tat org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116)\n\tat org.eclipse.jetty.server.Server.handle(Server.java:370)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489)\n\tat org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:949)\n\tat org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:1011)\n\tat org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:644)\n\tat org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)\n\tat org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:82)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:668)\n\tat org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:52)\n\tat winstone.BoundedExecutorService$1.run(BoundedExecutorService.java:77)\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1156)\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:626)\n\tat java.lang.Thread.run(Thread.java:804)\nCaused by: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/hudson/model/View/index.jelly:42:43: <st:include> org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.apache.commons.jelly.impl.TagScript.handleException(TagScript.java:726)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:281)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:99)\n\tat org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$1.run(CoreTagLibrary.java:98)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:120)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:99)\n\tat org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:120)\n\tat org.kohsuke.stapler.jelly.CompressTag.doTag(CompressTag.java:44)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\tat org.kohsuke.stapler.jelly.JellyViewScript.run(JellyViewScript.java:81)\n\tat org.kohsuke.stapler.jelly.DefaultScriptInvoker.invokeScript(DefaultScriptInvoker.java:63)\n\tat org.kohsuke.stapler.jelly.DefaultScriptInvoker.invokeScript(DefaultScriptInvoker.java:53)\n\tat org.kohsuke.stapler.jelly.JellyClassTearOff.serveIndexJelly(JellyClassTearOff.java:112)\n\t... 63 more\nCaused by: java.lang.RuntimeException: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.kohsuke.stapler.jelly.groovy.JellyBuilder.doInvokeMethod(JellyBuilder.java:280)\n\tat org.kohsuke.stapler.jelly.groovy.Namespace$ProxyImpl.invoke(Namespace.java:92)\n\tat com.sun.proxy.$Proxy56.projectView(Unknown Source)\n\tat lib.JenkinsTagLib$projectView.call(Unknown Source)\n\tat hudson.model.View.main.run(main.groovy:14)\n\tat org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:74)\n\tat org.kohsuke.stapler.jelly.groovy.GroovierJellyScript.run(GroovierJellyScript.java:62)\n\tat org.kohsuke.stapler.jelly.IncludeTag.doTag(IncludeTag.java:147)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\t... 95 more\nCaused by: org.apache.commons.jelly.JellyTagException: jar:file:/var/cache/jenkins/war/WEB-INF/lib/jenkins-core-1.574.jar!/lib/hudson/projectView.jelly:66:22: <d:invokeBody> null\n\tat org.apache.commons.jelly.impl.TagScript.handleException(TagScript.java:726)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:281)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$1.run(CoreTagLibrary.java:98)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.kohsuke.stapler.jelly.ReallyStaticTagLibrary$1.run(ReallyStaticTagLibrary.java:99)\n\tat org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:95)\n\tat org.apache.commons.jelly.tags.core.CoreTagLibrary$2.run(CoreTagLibrary.java:105)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript.run(CallTagLibScript.java:120)\n\tat org.kohsuke.stapler.jelly.groovy.JellyBuilder.doInvokeMethod(JellyBuilder.java:276)\n\t... 103 more\nCaused by: java.lang.NumberFormatException: null\n\tat java.lang.Integer.parseInt(Integer.java:465)\n\tat java.lang.Integer.valueOf(Integer.java:593)\n\tat au.com.centrumsystems.hudson.plugin.buildpipeline.BuildPipelineView.getBuildPipelineForm(BuildPipelineView.java:400)\n\tat au.com.centrumsystems.hudson.plugin.buildpipeline.BuildPipelineView.getItems(BuildPipelineView.java:866)\n\tat au.com.centrumsystems.hudson.plugin.buildpipeline.BuildPipelineView.hasPermission(BuildPipelineView.java:932)\n\tat hudson.model.ViewGroupMixIn.getViews(ViewGroupMixIn.java:115)\n\tat jenkins.model.Jenkins.getViews(Jenkins.java:1444)\n\tat sun.reflect.GeneratedMethodAccessor255.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n\tat java.lang.reflect.Method.invoke(Method.java:618)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\n\tat groovy.lang.MetaClassImpl$GetBeanMethodMetaProperty.getProperty(MetaClassImpl.java:3500)\n\tat org.codehaus.groovy.runtime.callsite.GetEffectivePojoPropertySite.getProperty(GetEffectivePojoPropertySite.java:61)\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callGetProperty(AbstractCallSite.java:227)\n\tat hudson.model.View.main$_run_closure1.doCall(main.groovy:15)\n\tat sun.reflect.GeneratedMethodAccessor382.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n\tat java.lang.reflect.Method.invoke(Method.java:618)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:903)\n\tat org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)\n\tat org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)\n\tat hudson.model.View.main$_run_closure1.doCall(main.groovy)\n\tat sun.reflect.GeneratedMethodAccessor381.invoke(Unknown Source)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:55)\n\tat java.lang.reflect.Method.invoke(Method.java:618)\n\tat org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)\n\tat groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)\n\tat org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)\n\tat groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:903)\n\tat groovy.lang.Closure.call(Closure.java:415)\n\tat groovy.lang.Closure.call(Closure.java:409)\n\tat org.kohsuke.stapler.jelly.groovy.JellyBuilder$1.run(JellyBuilder.java:264)\n\tat org.kohsuke.stapler.jelly.CallTagLibScript$1.run(CallTagLibScript.java:99)\n\tat org.apache.commons.jelly.tags.define.InvokeBodyTag.doTag(InvokeBodyTag.java:91)\n\tat org.apache.commons.jelly.impl.TagScript.run(TagScript.java:269)\n\t... 111 more\n```\n\n\n## 解决方案\n1. 重启jenkins服务(自己发现的)\n服务出异常后，发现只要jenkins页面刷新后，jenkins cpu使用率会达到200％+，物理内存占用1.1g，虚拟内存占用2.7g。不知道跟这个异常有没关系。\n\n2. 尝试升级build-pipeline-plugin。\n\n3. 尝试升级jenkins版本。","slug":"article/jenkins/jenkin插件buildpipeline数值解析异常","published":1,"date":"2015-08-04T06:34:06.758Z","updated":"2015-08-04T06:34:06.758Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmmf001ux5vuuixwsih2"},{"title":"jenkins节点重启脚本","_content":"\n\n## 远程重启jenkins节点脚本\n``` shell\nNODE_CONFIG=nodes.ini\nJENKINS_CLIENT_COMMAND=/opt/work/local/jenkins/jenkins-client/bin/client.sh\n\n\nstart_nodes() {\n        while read node\n        do\n                if [ -z \"$node\" ]; then\n                        continue;\n                fi\n\n                echo \"current node: $node\";\n                start_remote_jenkins $node;\n        done < $NODE_CONFIG\n}\n\nstart_remote_jenkins() {\n        remote_ip=$1\n        ssh $remote_ip 2>&1 << remote_command\n        sh $JENKINS_CLIENT_COMMAND;\n        exit;\nremote_command\n}\n\n\nstart_nodes\n```\n\n<!-- more -->\n\n## jenkins slave脚本\njenkins slave重启脚本\n\n``` shell\n\n\nfunction file_source() {\n  if [ -f $1 ]; then\n    source $1;\n  fi\n}\n\n\nfile_source /etc/profile\nfile_source ~/.profile\nfile_source ~/bash_profile\n\n\nif test -z \"${JAVA_HOME}\"; then\n  echo \"please config JAVA_HOME~\"\n  exit 1;\nfi\n\n\nBIN_PARAM='start'\nif [ $# -ge 1 ]; then\n  BIN_PARAM=$1\nfi\n\n\nJAVA_EXE=$JAVA_HOME/bin/java\n\nBIN_PATH=$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\nSLAVE_CONFIG=$BIN_PATH/slave.conf\nsource $SLAVE_CONFIG \n\nSLAVE_HOME=$(dirname $BIN_PATH)\nLOG_FILE=$SLAVE_HOME/logs/jenkins_slave.log\n\nSLAVE_PID_COMMAND=\"ps -ef | grep $SECRET_ID | grep -v grep | awk '{print \\$2}'\"\nSLAVE_PID=$(eval $SLAVE_PID_COMMAND)\n\nSTART_COMMAND=\"nohup $JAVA_EXE -jar ${BIN_PATH}/slave.jar -jnlpUrl http://${SERVER_HOST}:${SERVER_PORT}/computer/${SLAVE_NAME}/slave-agent.jnlp -secret $SECRET_ID 1>>$LOG_FILE 2>&1 &\"\n\n\necho \"========================================\"\necho \"java bin path: $JAVA_EXE\"\necho \"slave client home path: $SLAVE_HOME\"\necho \"slave client bin path: $BIN_PATH\"\necho \"load slave client conf: $SLAVE_CONFIG\"\necho \"========================================\"\necho \"jenkins connection params:\"\necho \"  - server host: $SERVER_HOST\"\necho \"  - server port: $SERVER_PORT\"\necho \"  - slave name: $SLAVE_NAME\"\necho \"  - secret id: $SECRET_ID\"\necho \"========================================\"\n\n\n\nfunction startup() {\n  echo \"execute get process command: $SLAVE_PID_COMMAND\"\n  if [ -n \"$SLAVE_PID\" ]; then\n    echo \"process with $SECRET_ID has existed.\"\n    echo \"jenkins slave client pid: $SLAVE_PID\"\n    exit 0;\n  fi\n\n  echo \"execute script shell: $START_COMMAND\"\n  eval $START_COMMAND\n  \n  if [ $? -ne 0 ]; then\n    echo \"fail to startup the jenkins slave client.\"\n    exit 1;\n  fi\n\n  SLAVE_PID=$(eval $SLAVE_PID_COMMAND)\n  echo \"the jenkins slave client process id: $SLAVE_PID\"\n  return;\n}\n\n\nfunction shutdown() {\n  echo \"execute get process command: $SLAVE_PID_COMMAND\"\n  if [ -z \"$SLAVE_PID\" ]; then\n    echo \"no process with $SECRET_ID\"\n    exit 0;\n  fi\n  \n  echo \"killing process with pid: $SLAVE_PID\"\n  kill -9 $SLAVE_PID\n\n  if [ $? -ne 0 ]; then\n    echo \"fail to shutdown the jenkins slave client with pid: $SLAVE_PID\"\n    exit 1;\n  fi\n\n  echo \"the jenkins slave client has stoped.\"\n  return;\n}\n\n\nfunction bootstrap() {\n  if [ $BIN_PARAM == \"start\" ] || [ $BIN_PARAM == \"startup\" ]; then\n    echo \"startup jenkins slave client...\"\n    startup\n    exit 0;\n  elif [ $BIN_PARAM == \"stop\" ] || [ $BIN_PARAM == \"shutdown\" ]; then\n    echo \"shutdown jenkins slave client...\"\n    shutdown\n    exit 0;\n  else\n    echo \"not support param: $1\"\n    exit 1;\n  fi\n}\n\n\nbootstrap\n\n```\n\n\n## node节点\n``` javascript\nvar links = document.getElementsByClassName(\"model-link\");\nfor (var i=0;i<links.length;i++)\n{\n\tconsole.log(links[i].innerText);\n}\n```\n``` ini\n10.10.1.11\n10.10.1.12\n10.10.1.13\n10.13.2.14\n10.13.2.15\n10.13.2.16\n```","source":"_posts/article/jenkins/jenkins节点重启脚本.md","raw":"\ncategories:\n  - jenkins\n\ntags:\n  - jenkins\n  - 持续集成\n\ntitle: jenkins节点重启脚本\n---\n\n\n## 远程重启jenkins节点脚本\n``` shell\nNODE_CONFIG=nodes.ini\nJENKINS_CLIENT_COMMAND=/opt/work/local/jenkins/jenkins-client/bin/client.sh\n\n\nstart_nodes() {\n        while read node\n        do\n                if [ -z \"$node\" ]; then\n                        continue;\n                fi\n\n                echo \"current node: $node\";\n                start_remote_jenkins $node;\n        done < $NODE_CONFIG\n}\n\nstart_remote_jenkins() {\n        remote_ip=$1\n        ssh $remote_ip 2>&1 << remote_command\n        sh $JENKINS_CLIENT_COMMAND;\n        exit;\nremote_command\n}\n\n\nstart_nodes\n```\n\n<!-- more -->\n\n## jenkins slave脚本\njenkins slave重启脚本\n\n``` shell\n\n\nfunction file_source() {\n  if [ -f $1 ]; then\n    source $1;\n  fi\n}\n\n\nfile_source /etc/profile\nfile_source ~/.profile\nfile_source ~/bash_profile\n\n\nif test -z \"${JAVA_HOME}\"; then\n  echo \"please config JAVA_HOME~\"\n  exit 1;\nfi\n\n\nBIN_PARAM='start'\nif [ $# -ge 1 ]; then\n  BIN_PARAM=$1\nfi\n\n\nJAVA_EXE=$JAVA_HOME/bin/java\n\nBIN_PATH=$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" && pwd )\nSLAVE_CONFIG=$BIN_PATH/slave.conf\nsource $SLAVE_CONFIG \n\nSLAVE_HOME=$(dirname $BIN_PATH)\nLOG_FILE=$SLAVE_HOME/logs/jenkins_slave.log\n\nSLAVE_PID_COMMAND=\"ps -ef | grep $SECRET_ID | grep -v grep | awk '{print \\$2}'\"\nSLAVE_PID=$(eval $SLAVE_PID_COMMAND)\n\nSTART_COMMAND=\"nohup $JAVA_EXE -jar ${BIN_PATH}/slave.jar -jnlpUrl http://${SERVER_HOST}:${SERVER_PORT}/computer/${SLAVE_NAME}/slave-agent.jnlp -secret $SECRET_ID 1>>$LOG_FILE 2>&1 &\"\n\n\necho \"========================================\"\necho \"java bin path: $JAVA_EXE\"\necho \"slave client home path: $SLAVE_HOME\"\necho \"slave client bin path: $BIN_PATH\"\necho \"load slave client conf: $SLAVE_CONFIG\"\necho \"========================================\"\necho \"jenkins connection params:\"\necho \"  - server host: $SERVER_HOST\"\necho \"  - server port: $SERVER_PORT\"\necho \"  - slave name: $SLAVE_NAME\"\necho \"  - secret id: $SECRET_ID\"\necho \"========================================\"\n\n\n\nfunction startup() {\n  echo \"execute get process command: $SLAVE_PID_COMMAND\"\n  if [ -n \"$SLAVE_PID\" ]; then\n    echo \"process with $SECRET_ID has existed.\"\n    echo \"jenkins slave client pid: $SLAVE_PID\"\n    exit 0;\n  fi\n\n  echo \"execute script shell: $START_COMMAND\"\n  eval $START_COMMAND\n  \n  if [ $? -ne 0 ]; then\n    echo \"fail to startup the jenkins slave client.\"\n    exit 1;\n  fi\n\n  SLAVE_PID=$(eval $SLAVE_PID_COMMAND)\n  echo \"the jenkins slave client process id: $SLAVE_PID\"\n  return;\n}\n\n\nfunction shutdown() {\n  echo \"execute get process command: $SLAVE_PID_COMMAND\"\n  if [ -z \"$SLAVE_PID\" ]; then\n    echo \"no process with $SECRET_ID\"\n    exit 0;\n  fi\n  \n  echo \"killing process with pid: $SLAVE_PID\"\n  kill -9 $SLAVE_PID\n\n  if [ $? -ne 0 ]; then\n    echo \"fail to shutdown the jenkins slave client with pid: $SLAVE_PID\"\n    exit 1;\n  fi\n\n  echo \"the jenkins slave client has stoped.\"\n  return;\n}\n\n\nfunction bootstrap() {\n  if [ $BIN_PARAM == \"start\" ] || [ $BIN_PARAM == \"startup\" ]; then\n    echo \"startup jenkins slave client...\"\n    startup\n    exit 0;\n  elif [ $BIN_PARAM == \"stop\" ] || [ $BIN_PARAM == \"shutdown\" ]; then\n    echo \"shutdown jenkins slave client...\"\n    shutdown\n    exit 0;\n  else\n    echo \"not support param: $1\"\n    exit 1;\n  fi\n}\n\n\nbootstrap\n\n```\n\n\n## node节点\n``` javascript\nvar links = document.getElementsByClassName(\"model-link\");\nfor (var i=0;i<links.length;i++)\n{\n\tconsole.log(links[i].innerText);\n}\n```\n``` ini\n10.10.1.11\n10.10.1.12\n10.10.1.13\n10.13.2.14\n10.13.2.15\n10.13.2.16\n```","slug":"article/jenkins/jenkins节点重启脚本","published":1,"date":"2015-08-04T10:20:40.047Z","updated":"2015-08-04T10:20:40.047Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmml0021x5vu42vi2fod"},{"title":"jenkins任务等待下一次可用执行","_content":"\n[TOC]\n\n英文：pending-waiting for next available executor\n\n## 问题分析\n查阅网上的资料，出现pending-waiting for next available executor的情况主要有二：\n\n### 磁盘存储空间已满\n1. jenkins所在的服务器\n2. 任务运行涉及到的slave服务器\n\n### 节点离线\njenkins服务正常时，master节点有可能处于离线状态。此时，可以进入系统管理->管理节点，查看一下节点状态。\n![节点状态](http://7xkl4i.com1.z0.glb.clouddn.com/jenkins_node_status.png)\n\n\n## 问题解决\n\n### jenkins所在服务器\n重启jenkins服务后，可能需要过段时间节点才会正常加载并工作。\n\n### 任务运行涉及到的slave服务器\n重启过程导致slave服务器连接master失败，可以考虑重启一下jenkins slave服务。\n\n\n## 参考文档\n1. http://stackoverflow.com/questions/15112890/jenkins-not-executing-jobs-pending-waiting-for-next-executor\n2. http://blog.csdn.net/jinhuiyu/article/details/4827051\n","source":"_posts/article/jenkins/jenkins任务等待下一次可用执行.md","raw":"\ncategories:\n  - jenkins\n\ntags:\n  - jenkins\n  - 持续集成\n  - 问题\n\ntitle: jenkins任务等待下一次可用执行\n---\n\n[TOC]\n\n英文：pending-waiting for next available executor\n\n## 问题分析\n查阅网上的资料，出现pending-waiting for next available executor的情况主要有二：\n\n### 磁盘存储空间已满\n1. jenkins所在的服务器\n2. 任务运行涉及到的slave服务器\n\n### 节点离线\njenkins服务正常时，master节点有可能处于离线状态。此时，可以进入系统管理->管理节点，查看一下节点状态。\n![节点状态](http://7xkl4i.com1.z0.glb.clouddn.com/jenkins_node_status.png)\n\n\n## 问题解决\n\n### jenkins所在服务器\n重启jenkins服务后，可能需要过段时间节点才会正常加载并工作。\n\n### 任务运行涉及到的slave服务器\n重启过程导致slave服务器连接master失败，可以考虑重启一下jenkins slave服务。\n\n\n## 参考文档\n1. http://stackoverflow.com/questions/15112890/jenkins-not-executing-jobs-pending-waiting-for-next-executor\n2. http://blog.csdn.net/jinhuiyu/article/details/4827051\n","slug":"article/jenkins/jenkins任务等待下一次可用执行","published":1,"date":"2015-08-04T06:19:57.526Z","updated":"2015-08-04T06:17:29.222Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmms0026x5vupp31bnlg"},{"title":"jenkins中文乱码&服务启动","_content":"\n\n## 问题描述\n项目构建**最新修改记录**中文乱码。\n\n\n## 问题查看与分析\n首先，查看jenkins管理界面的**系统属性**功能。\n对应URL地址为：http://jenkins.go.sohuno.com/systemInfo\n\n可以看到jenkins启动环境变量file.encoding值为默认的**ISO-8859-1**(Latin-1字符集)。\n不希望jenkins乱码，需要设置其编码方式为UTF-8。(参考：[Jenkins控制台中乱码问题][^1])\n\n\n## 问题解决\n当前jenkins启动命令为：\n``` shell\njava -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=8009 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20\n```\n\n在启动jenkins时，需要额外添加参数**file.encoding**，并设置其参数值为UTF-8。\n修改后的启动命令如下：\n``` shell\njava -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=8009 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20 -Dfile.encoding=UTF-8\n```\n\n\n### 扩展说明\n由jenkins启动命令可看出：\n\n1. jenkins安装目录\n/var/lib/jenkins\n\n2. jenkins服务部署代码\n/usr/lib/jenkins/jenkins.war\n\n3. 运行日志\n/var/log/jenkins/jenkins.log\n\n4. jenkins代码部署位置\n/var/cache/jenkins/war\n\n5. jenkins服务端口\nhttp: 8080\najp13: 8009\n\n6. jenkins servlet容器\njenkins服务运行在winstone servlet容器，类似于tomcat, jetty等。\njenkins命令启动接收的参数`--logfile`, `--webroot`, `--httpPort`, `--ajp13Port`等都是winstone的。\n另外，查看了webroot参数对应的目录，发现目录包含类库**winstone.jar**，也可知jenkins可能是放在winstone容器里运行的。\n\n关于winstone可参考：[Winstone Servlet Container v0.9.10][^6]\n\n\n\n[^1]: http://blog.csdn.net/hunterno4/article/details/38424715\n[^2]: http://lee2013.iteye.com/blog/2108612\n[^3]: http://zhidao.baidu.com/question/177248555728533364.html\n[^4]: http://lee2013.iteye.com/blog/2108612\n[^5]: http://www.xuebuyuan.com/2108588.html\n[^6]: http://winstone.sourceforge.net/\n\n","source":"_posts/article/jenkins/jenkins中文乱码&服务启动.md","raw":"\ncategories:\n  - jenkins\n\ntags:\n  - jenkins\n  - 持续集成\n  - 问题\n\ntitle: jenkins中文乱码&服务启动\n---\n\n\n## 问题描述\n项目构建**最新修改记录**中文乱码。\n\n\n## 问题查看与分析\n首先，查看jenkins管理界面的**系统属性**功能。\n对应URL地址为：http://jenkins.go.sohuno.com/systemInfo\n\n可以看到jenkins启动环境变量file.encoding值为默认的**ISO-8859-1**(Latin-1字符集)。\n不希望jenkins乱码，需要设置其编码方式为UTF-8。(参考：[Jenkins控制台中乱码问题][^1])\n\n\n## 问题解决\n当前jenkins启动命令为：\n``` shell\njava -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=8009 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20\n```\n\n在启动jenkins时，需要额外添加参数**file.encoding**，并设置其参数值为UTF-8。\n修改后的启动命令如下：\n``` shell\njava -Djava.awt.headless=true -DJENKINS_HOME=/var/lib/jenkins -jar /usr/lib/jenkins/jenkins.war --logfile=/var/log/jenkins/jenkins.log --webroot=/var/cache/jenkins/war --httpPort=8080 --ajp13Port=8009 --debug=5 --handlerCountMax=100 --handlerCountMaxIdle=20 -Dfile.encoding=UTF-8\n```\n\n\n### 扩展说明\n由jenkins启动命令可看出：\n\n1. jenkins安装目录\n/var/lib/jenkins\n\n2. jenkins服务部署代码\n/usr/lib/jenkins/jenkins.war\n\n3. 运行日志\n/var/log/jenkins/jenkins.log\n\n4. jenkins代码部署位置\n/var/cache/jenkins/war\n\n5. jenkins服务端口\nhttp: 8080\najp13: 8009\n\n6. jenkins servlet容器\njenkins服务运行在winstone servlet容器，类似于tomcat, jetty等。\njenkins命令启动接收的参数`--logfile`, `--webroot`, `--httpPort`, `--ajp13Port`等都是winstone的。\n另外，查看了webroot参数对应的目录，发现目录包含类库**winstone.jar**，也可知jenkins可能是放在winstone容器里运行的。\n\n关于winstone可参考：[Winstone Servlet Container v0.9.10][^6]\n\n\n\n[^1]: http://blog.csdn.net/hunterno4/article/details/38424715\n[^2]: http://lee2013.iteye.com/blog/2108612\n[^3]: http://zhidao.baidu.com/question/177248555728533364.html\n[^4]: http://lee2013.iteye.com/blog/2108612\n[^5]: http://www.xuebuyuan.com/2108588.html\n[^6]: http://winstone.sourceforge.net/\n\n","slug":"article/jenkins/jenkins中文乱码&服务启动","published":1,"date":"2015-08-04T06:07:42.722Z","updated":"2015-08-04T06:06:53.978Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmmw002bx5vurqipvno4"},{"title":"项目开发问题集锦","_content":"\n\n[TOC]\n\n\n## 1. spring容器标签前缀\n一般地，spring容器标签bean元数据格式为`<bean></bean>`。但是，奇怪的是有的时候必须使用`<beans:bean></beans:bean>`，否则会报错。\n\n### 为什么会这样？\n这与spring容器xml配置当前主要的命名空间(xmlns)设置有关。\n由于在同一个xml配置文件中可能会加载多个文档结构定义(DTD)，因此需要使用命名空间来区分开多个DTD中可能相同的文档标签。\n\n例如：spring **tx** schema包含annotation-driven(`<tx:annotation-driven/>`)，同时，spring mvc schema也包含annotation-driven(`<mvc:annotation-driven/>`)\n\n### 小结\n对于以上问题描述情况，不需要使用beans前缀的，xmlns是如下情况：\n``` xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\t   xmlns:beans=\"http://www.springframework.org/schema/beans\">\n</beans>\n```\n\n而对于需要使用beans前缀的，xmlns被修改了，可能是：\n``` xml\n<beans xmlns=\"http://www.springframework.org/schema/mvc\"\n\t   xmlns:beans=\"http://www.springframework.org/schema/beans\">\n</beans>\n```\n\n**由此可知**：\n> 使用主命名空间里的标签，命名空间前缀并不是必须的。\n\n### 参考文档\nhttp://bbs.csdn.net/topics/340026084\nhttp://www.w3school.com.cn/tags/tag_prop_xmlns.asp\n\n\n<!-- more -->\n\n## 2. error at ::0 formal unbound in pointcut[spring aop]\n\n### 传递注解参数给切面缺少注解参数\n例如：\n``` java\n  @Around(value = \"point()\")\n  public void aroundAdvice(ProceedingJoinPoint joinPoint, Retry retry) throws Throwable\n```\n\n**正确样例**：\n``` java\n  @Around(value = \"point() && @annotation(retry)\")\n  public void aroundAdvice(ProceedingJoinPoint joinPoint, Retry retry) throws Throwable\n```\n\n\n\n## 3. jsp el数值取整\nel表达式除法结果为浮点型。\n\n保留整除\n<fmt:formatNumber type=\"number\" value=\"${8/7)}\" maxFractionDigits=\"0\"/>\nformatNumber\n\n**参考文档**：\nhttp://blog.csdn.net/debbykindom/article/details/5854750\n\n\n## 4. @ResponseBody返回JSON 不返回值为 null 的字段\n``` xml\n<mvc:annotation-driven>\n    <mvc:message-converters register-defaults=\"true\">\n        <bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\">\n            <property name=\"objectMapper\">\n                <bean class=\"com.fasterxml.jackson.databind.ObjectMapper\">\n                    <property name=\"serializationInclusion\">\n                        <value type=\"com.fasterxml.jackson.annotation.JsonInclude.Include\">NON_NULL</value>\n                    </property>\n                </bean>\n            </property>\n        </bean>\n    </mvc:message-converters>\n</mvc:annotation-driven>\n```\n\n**参考文档**：\nhttp://segmentfault.com/q/1010000002522525\n\n\n## 5. mvc:view-controller用法\n\n### 重定向\n``` xml\n<mvc:view-controller path=\"/\" view-name=\"redirect:/admin/index\"/>\n```\n说明：即如果当前路径是/，则重定向到/admin/index\n\n### view name\n```\n<mvc:view-controller path=\"/\" view-name=\"admin/index\"/>\n```\n如果当前路径是/，则交给相应的视图解析器直接解析为视图\n如：\n``` xml\n<bean id=\"defaultViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\" p:order=\"2\">\n\t<property name=\"viewClass\" value=\"org.springframework.web.servlet.view.JstlView\"/>\n\t<property name=\"contentType\" value=\"text/html\"/>\n\t<property name=\"prefix\" value=\"/WEB-INF/jsp/\"/>\n\t<property name=\"suffix\" value=\".jsp\"/>\n</bean>\n```\n则得到的视图是：/WEB-INF/jsp/admin/index.jsp\n\n**参考**：http://www.iteye.com/topic/1129445\n\n\n## 6. EL access a map value by Integer key\n\nel表达式中，默认数值类型为Long型。\n\n### 问题描述\n\n**举例说明**：\nservlet定义并返回map数据如下：\n``` java\nMap<Integer, String> map = new HashMap<Integer, String>();\nmap.put(1, \"One\");\nmap.put(2, \"Two\");\nmap.put(3, \"Three\");\n```\n\n在jsp页面，通过map[2]不能获取数据Two。因为数值2被装箱成Long型，而map键类型为Integer。\n因此，在前端不能通过\n\n### 解决方案\n\n**参考**：http://stackoverflow.com/questions/924451/el-access-a-map-value-by-integer-key\n\n","source":"_posts/article/java/项目开发问题集锦.md","raw":"\ncategories:\n - java\n\ntags:\n - java\n - 集锦\n\ntitle: 项目开发问题集锦\n---\n\n\n[TOC]\n\n\n## 1. spring容器标签前缀\n一般地，spring容器标签bean元数据格式为`<bean></bean>`。但是，奇怪的是有的时候必须使用`<beans:bean></beans:bean>`，否则会报错。\n\n### 为什么会这样？\n这与spring容器xml配置当前主要的命名空间(xmlns)设置有关。\n由于在同一个xml配置文件中可能会加载多个文档结构定义(DTD)，因此需要使用命名空间来区分开多个DTD中可能相同的文档标签。\n\n例如：spring **tx** schema包含annotation-driven(`<tx:annotation-driven/>`)，同时，spring mvc schema也包含annotation-driven(`<mvc:annotation-driven/>`)\n\n### 小结\n对于以上问题描述情况，不需要使用beans前缀的，xmlns是如下情况：\n``` xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n\t   xmlns:beans=\"http://www.springframework.org/schema/beans\">\n</beans>\n```\n\n而对于需要使用beans前缀的，xmlns被修改了，可能是：\n``` xml\n<beans xmlns=\"http://www.springframework.org/schema/mvc\"\n\t   xmlns:beans=\"http://www.springframework.org/schema/beans\">\n</beans>\n```\n\n**由此可知**：\n> 使用主命名空间里的标签，命名空间前缀并不是必须的。\n\n### 参考文档\nhttp://bbs.csdn.net/topics/340026084\nhttp://www.w3school.com.cn/tags/tag_prop_xmlns.asp\n\n\n<!-- more -->\n\n## 2. error at ::0 formal unbound in pointcut[spring aop]\n\n### 传递注解参数给切面缺少注解参数\n例如：\n``` java\n  @Around(value = \"point()\")\n  public void aroundAdvice(ProceedingJoinPoint joinPoint, Retry retry) throws Throwable\n```\n\n**正确样例**：\n``` java\n  @Around(value = \"point() && @annotation(retry)\")\n  public void aroundAdvice(ProceedingJoinPoint joinPoint, Retry retry) throws Throwable\n```\n\n\n\n## 3. jsp el数值取整\nel表达式除法结果为浮点型。\n\n保留整除\n<fmt:formatNumber type=\"number\" value=\"${8/7)}\" maxFractionDigits=\"0\"/>\nformatNumber\n\n**参考文档**：\nhttp://blog.csdn.net/debbykindom/article/details/5854750\n\n\n## 4. @ResponseBody返回JSON 不返回值为 null 的字段\n``` xml\n<mvc:annotation-driven>\n    <mvc:message-converters register-defaults=\"true\">\n        <bean class=\"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter\">\n            <property name=\"objectMapper\">\n                <bean class=\"com.fasterxml.jackson.databind.ObjectMapper\">\n                    <property name=\"serializationInclusion\">\n                        <value type=\"com.fasterxml.jackson.annotation.JsonInclude.Include\">NON_NULL</value>\n                    </property>\n                </bean>\n            </property>\n        </bean>\n    </mvc:message-converters>\n</mvc:annotation-driven>\n```\n\n**参考文档**：\nhttp://segmentfault.com/q/1010000002522525\n\n\n## 5. mvc:view-controller用法\n\n### 重定向\n``` xml\n<mvc:view-controller path=\"/\" view-name=\"redirect:/admin/index\"/>\n```\n说明：即如果当前路径是/，则重定向到/admin/index\n\n### view name\n```\n<mvc:view-controller path=\"/\" view-name=\"admin/index\"/>\n```\n如果当前路径是/，则交给相应的视图解析器直接解析为视图\n如：\n``` xml\n<bean id=\"defaultViewResolver\" class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\" p:order=\"2\">\n\t<property name=\"viewClass\" value=\"org.springframework.web.servlet.view.JstlView\"/>\n\t<property name=\"contentType\" value=\"text/html\"/>\n\t<property name=\"prefix\" value=\"/WEB-INF/jsp/\"/>\n\t<property name=\"suffix\" value=\".jsp\"/>\n</bean>\n```\n则得到的视图是：/WEB-INF/jsp/admin/index.jsp\n\n**参考**：http://www.iteye.com/topic/1129445\n\n\n## 6. EL access a map value by Integer key\n\nel表达式中，默认数值类型为Long型。\n\n### 问题描述\n\n**举例说明**：\nservlet定义并返回map数据如下：\n``` java\nMap<Integer, String> map = new HashMap<Integer, String>();\nmap.put(1, \"One\");\nmap.put(2, \"Two\");\nmap.put(3, \"Three\");\n```\n\n在jsp页面，通过map[2]不能获取数据Two。因为数值2被装箱成Long型，而map键类型为Integer。\n因此，在前端不能通过\n\n### 解决方案\n\n**参考**：http://stackoverflow.com/questions/924451/el-access-a-map-value-by-integer-key\n\n","slug":"article/java/项目开发问题集锦","published":1,"date":"2015-07-21T06:28:42.530Z","updated":"2015-07-17T08:39:17.312Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmn2002gx5vugsa6a4xe"},{"title":"服务器问题集锦","_content":"\n[TOC]\n\n\n## tomcat访问系统文件及文件夹\n\n### 1. 进入tomcat目录\n> cd /home/yeshaoting/java/server/tomcat/apache-tomcat-6.0.37\n\n### 2. 修改web.xml配置\n> vim conf/web.xml\n\n### 3. 修改listings参数\n找到名为 **default** 的servlet配置。\n``` xml\n    <servlet>\n        <servlet-name>default</servlet-name>\n        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>\n        <init-param>\n            <param-name>debug</param-name>\n            <param-value>0</param-value>\n        </init-param>\n        <init-param>\n            <param-name>listings</param-name>\n            <param-value>true</param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n```\n修改listings参数值为 **true** 。\n\nlistings参数含义说明如下：\n``` xml\n  <!--   listings            Should directory listings be produced if there -->\n  <!--                       is no welcome file in this directory?  [false] -->\n  <!--                       WARNING: Listings for directories with many    -->\n  <!--                       entries can be slow and may consume            -->\n  <!--                       significant proportions of server resources.   -->\n```\n\n**参考文档**：\nhttp://blog.csdn.net/guopengzhang/article/details/5948644\nhttp://xueli.blog.51cto.com/3325186/1585859\n\n<!-- more -->\n","source":"_posts/article/java/服务器问题集锦.md","raw":"\ncategories:\n - java\n\ntags:\n - java\n - 服务器\n - 集锦\n\ntitle: 服务器问题集锦\n---\n\n[TOC]\n\n\n## tomcat访问系统文件及文件夹\n\n### 1. 进入tomcat目录\n> cd /home/yeshaoting/java/server/tomcat/apache-tomcat-6.0.37\n\n### 2. 修改web.xml配置\n> vim conf/web.xml\n\n### 3. 修改listings参数\n找到名为 **default** 的servlet配置。\n``` xml\n    <servlet>\n        <servlet-name>default</servlet-name>\n        <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>\n        <init-param>\n            <param-name>debug</param-name>\n            <param-value>0</param-value>\n        </init-param>\n        <init-param>\n            <param-name>listings</param-name>\n            <param-value>true</param-value>\n        </init-param>\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n```\n修改listings参数值为 **true** 。\n\nlistings参数含义说明如下：\n``` xml\n  <!--   listings            Should directory listings be produced if there -->\n  <!--                       is no welcome file in this directory?  [false] -->\n  <!--                       WARNING: Listings for directories with many    -->\n  <!--                       entries can be slow and may consume            -->\n  <!--                       significant proportions of server resources.   -->\n```\n\n**参考文档**：\nhttp://blog.csdn.net/guopengzhang/article/details/5948644\nhttp://xueli.blog.51cto.com/3325186/1585859\n\n<!-- more -->\n","slug":"article/java/服务器问题集锦","published":1,"date":"2015-07-21T06:28:42.530Z","updated":"2015-07-17T08:38:38.852Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmn6002nx5vu6cf6gbce"},{"title":"开发工具问题集锦","_content":"\n\n[TOC]\n\n\n## ssh_exchange_identification: Connection closed by remote host\n用ssh -v去连有问题的服务器，这时会有比较详细的调试信息在屏幕上输出，可以帮助判断是哪一步出了问题。\n\n**参考文档**：\nhttp://www.zhihu.com/question/20023544\n\n\n## Syntax error: \"(\" unexpected\n\n### 问题描述\n假如我们在shell文件定义了一个数组pid=(0 0 0 0)，运行文件后则会收到报错：Syntax error: \"(\" unexpected。\n\n### 原因\n主要是因为Linux系统shell版本不兼容引起的。 shell的版本有sh,ksh,csh, bash，dash……等等。用命令ls -al /bin/sh可以得到我们当前所用的Linux系统的shell属于何版本。\n\n### 解决\n通过将当前通过以下方式可以使 shell 切换回 bash：\n $sudo dpkg-reconfigure dash\n然后选择 no 或者“否 ”，并确认。这样做将重新配置 dash，并使其不作为默认的 shell 工具。\n\n### 参考文档\n[Shell编程笔记——Syntax error: \"(\" unexpected](http://blog.csdn.net/breeze5428/article/details/27353583)\nhttp://ask.chinaunix.net/question/974\nhttp://bbs.csdn.net/topics/390132876\n\n<!-- more -->\n\n\n\n","source":"_posts/article/java/开发工具问题集锦.md","raw":"\ncategories:\n - 开发工具\n\ntags:\n - java\n - 开发工具\n - 集锦\n\ntitle: 开发工具问题集锦\n---\n\n\n[TOC]\n\n\n## ssh_exchange_identification: Connection closed by remote host\n用ssh -v去连有问题的服务器，这时会有比较详细的调试信息在屏幕上输出，可以帮助判断是哪一步出了问题。\n\n**参考文档**：\nhttp://www.zhihu.com/question/20023544\n\n\n## Syntax error: \"(\" unexpected\n\n### 问题描述\n假如我们在shell文件定义了一个数组pid=(0 0 0 0)，运行文件后则会收到报错：Syntax error: \"(\" unexpected。\n\n### 原因\n主要是因为Linux系统shell版本不兼容引起的。 shell的版本有sh,ksh,csh, bash，dash……等等。用命令ls -al /bin/sh可以得到我们当前所用的Linux系统的shell属于何版本。\n\n### 解决\n通过将当前通过以下方式可以使 shell 切换回 bash：\n $sudo dpkg-reconfigure dash\n然后选择 no 或者“否 ”，并确认。这样做将重新配置 dash，并使其不作为默认的 shell 工具。\n\n### 参考文档\n[Shell编程笔记——Syntax error: \"(\" unexpected](http://blog.csdn.net/breeze5428/article/details/27353583)\nhttp://ask.chinaunix.net/question/974\nhttp://bbs.csdn.net/topics/390132876\n\n<!-- more -->\n\n\n\n","slug":"article/java/开发工具问题集锦","published":1,"date":"2015-07-21T06:28:42.534Z","updated":"2015-07-17T08:38:57.324Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmn9002tx5vuomv35i04"},{"title":"借助hexo搭建github博客","_content":"\n[TOC]\n\n## 一、创建Github Pages\nGithub Pages为我们提供静态页面的托管。[^2]\n\n### 1. 注册github账号\n登录github.com，创建用户账号：yeshaoting。\n访问地址：https://github.com/yeshaoting\n\n### 2. 配置和使用github[^1]\n\n#### 生成新的SSH Key\n``` shell\nssh-keygen -t rsa -C \"yeshaoting@163.com\"\n```\n在~/.ssh目录会生成秘钥id_rsa，公钥id_rsa.pub\n\n#### 添加SSH key到github\n1) 查看并复制公钥id_rsa.pub内容。\n2) 登录github，在Accout Settings -> SSH Public Keys -> add another public keys\n3) 将复制id_rsa.pub内容复制到密钥文本框中。\n\n#### 测试\n``` shell\nssh -T git@github.com\n```\n\n<!-- more -->\n\n\n### 3. 创建项目仓库\n想建立个人博客，需要在github上建立yeshaoting.github.io的repository。\n其中，repository名必须是 **github账号名**.github.io，我的github账号是yeshaoting，所以若想创建一个github pages博客，repository必须是yeshaoting.github.io；否则，创建不成功。\n\n创建过程如下图所示：\n![github上建立仓库](http://cnfeat.qiniudn.com/13.png)\n\n\n## 二、安装hexo[^3]\n\nHexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。\n\n官方中文网址：https://hexo.io/zh-cn/\n\n### 1. 安装node js\n登录：https://nodejs.org/，并下载安装包。\n安装或解压node js到对应的目录 NODEJS_HOME。\n将 $NODEJS_HOME/bin 目录添加到系统环境变量PATH里。\n\n### 2. 安装hexo[^1]\nHexo的作者是tommy351，根据官方介绍，Hexo是一个简单、快速、强大的博客发布工具，支持Markdown格式。\n\n``` shell\nnpm install -g hexo-cli\n```\n\n## 三、建站\n创建hexo目录：hexo-blog\n\n\n## 初始化并安装hexo\n``` shell\ncd hexo-blog\nhexo init\nnpm install\n```\n\n新建完成后，指定文件夹的目录如下：\n```\n.\n├── _config.yml\n├── package.json\n├── scaffolds\n├── scripts\n├── source\n|   ├── _drafts\n|   └── _posts\n└── themes\n```\n\n目录结构说明如下：\n**_config.yml**\n网站的 配置 信息，您可以在此配置大部分的参数。\n\n**package.json**\n应用程序的信息。EJS, Stylus 和 Markdown renderer 已默认安装，您可以自由移除。\n\n**scaffolds**\n模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。\n\n**scripts**\n脚本 文件夹。脚本是扩展 Hexo 最简易的方式，在此文件夹内的 JavaScript 文件会被自动执行。\n\n**source**\n资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。\n\n**themes**\n主题 文件夹。Hexo 会根据主题来生成静态页面。\n\n\n## 修改网站信息\n打开_config.yml，修改网站信息\n``` xml\n# Site\ntitle: 芳草地\nsubtitle: 叶绍亭\ndescription:\nauthor: yeshaoting\nlanguage: zh-CN\ntimezone: Asia/Shanghai\n```\n\n\n## 安装主题\n官方收纳的主题：http://hexo.io/themes/\n我选用 jacman 主题。\n点击进入http://wuchong.me/jacman/介绍页有相关的安装指南[^4]。\n\n**注**：下载完主题后，需要修改_config.yml文件，如下所示：\n``` shell\ntheme: jacman\nstylus:\n  compress: true\n```\n\n## 四、服务部署[^3]\nHexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。\n\n### 安装 hexo-deployer-git\nnpm install hexo-deployer-git --save\n\n### 修改配置\n``` shell\n# Deployment\n## Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: git@github.com:yeshaoting/yeshaoting.github.io.git\n  branch: master\n```\n\n### 发布到github\nhexo deploy\n\n一般，之前需要生成静态文件hexo generate，\n而在生成静态文件前，可以先清理之前的静态文件hexo clean。\n\n\n## 五、本地预览\n\n## 安装 hexo-server\nnpm install hexo-server --save\n\n## 启动服务\n\n### 默认端口为4000\nhexo server\n\n### 指定端口为5000\nhexo server -p 5000\n\n### 指定地址\nhexo server -i 192.168.1.1\n\n\n## 五、常用操作\n\n### 创建文章\nhexo new [layout] &lt;title>\n新建的文章默认会被保存在source/_posts文件夹。\n其中，layout默认为post，若指定，会在scaffolds文件夹找对应的布局文件。\n\n### 常用命令\n``` shell\nhexo new \"postName\" #新建文章\nhexo new page \"pageName\" #新建页面\nhexo generate #生成静态页面至public目录\nhexo server #开启预览访问端口（默认端口4000，'ctrl + c'关闭server）\nhexo deploy #将.deploy目录部署到GitHub\n```\n\n### 常用复合命令\n``` shell\nhexo d -g #生成加部署\nhexo s -g #预览加部署\n```\n\n### 简写\n``` shell\nhexo n == hexo new\nhexo g == hexo generate\nhexo s == hexo server\nhexo d == hexo deploy\n```\n\n\n\n[^1]: http://cnfeat.com/2014/05/10/2014-05-11-how-to-build-a-blog/\n[^2]: http://www.pchou.info/web-build/2013/01/05/build-github-blog-page-02.html\n[^3]: https://hexo.io/zh-cn/docs/\n[^4]: http://wuchong.me/jacman/","source":"_posts/article/hexo/hexo搭建github博客.md","raw":"\ntitle: 借助hexo搭建github博客\n---\n\n[TOC]\n\n## 一、创建Github Pages\nGithub Pages为我们提供静态页面的托管。[^2]\n\n### 1. 注册github账号\n登录github.com，创建用户账号：yeshaoting。\n访问地址：https://github.com/yeshaoting\n\n### 2. 配置和使用github[^1]\n\n#### 生成新的SSH Key\n``` shell\nssh-keygen -t rsa -C \"yeshaoting@163.com\"\n```\n在~/.ssh目录会生成秘钥id_rsa，公钥id_rsa.pub\n\n#### 添加SSH key到github\n1) 查看并复制公钥id_rsa.pub内容。\n2) 登录github，在Accout Settings -> SSH Public Keys -> add another public keys\n3) 将复制id_rsa.pub内容复制到密钥文本框中。\n\n#### 测试\n``` shell\nssh -T git@github.com\n```\n\n<!-- more -->\n\n\n### 3. 创建项目仓库\n想建立个人博客，需要在github上建立yeshaoting.github.io的repository。\n其中，repository名必须是 **github账号名**.github.io，我的github账号是yeshaoting，所以若想创建一个github pages博客，repository必须是yeshaoting.github.io；否则，创建不成功。\n\n创建过程如下图所示：\n![github上建立仓库](http://cnfeat.qiniudn.com/13.png)\n\n\n## 二、安装hexo[^3]\n\nHexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。\n\n官方中文网址：https://hexo.io/zh-cn/\n\n### 1. 安装node js\n登录：https://nodejs.org/，并下载安装包。\n安装或解压node js到对应的目录 NODEJS_HOME。\n将 $NODEJS_HOME/bin 目录添加到系统环境变量PATH里。\n\n### 2. 安装hexo[^1]\nHexo的作者是tommy351，根据官方介绍，Hexo是一个简单、快速、强大的博客发布工具，支持Markdown格式。\n\n``` shell\nnpm install -g hexo-cli\n```\n\n## 三、建站\n创建hexo目录：hexo-blog\n\n\n## 初始化并安装hexo\n``` shell\ncd hexo-blog\nhexo init\nnpm install\n```\n\n新建完成后，指定文件夹的目录如下：\n```\n.\n├── _config.yml\n├── package.json\n├── scaffolds\n├── scripts\n├── source\n|   ├── _drafts\n|   └── _posts\n└── themes\n```\n\n目录结构说明如下：\n**_config.yml**\n网站的 配置 信息，您可以在此配置大部分的参数。\n\n**package.json**\n应用程序的信息。EJS, Stylus 和 Markdown renderer 已默认安装，您可以自由移除。\n\n**scaffolds**\n模版 文件夹。当您新建文章时，Hexo 会根据 scaffold 来建立文件。\n\n**scripts**\n脚本 文件夹。脚本是扩展 Hexo 最简易的方式，在此文件夹内的 JavaScript 文件会被自动执行。\n\n**source**\n资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。Markdown 和 HTML 文件会被解析并放到 public 文件夹，而其他文件会被拷贝过去。\n\n**themes**\n主题 文件夹。Hexo 会根据主题来生成静态页面。\n\n\n## 修改网站信息\n打开_config.yml，修改网站信息\n``` xml\n# Site\ntitle: 芳草地\nsubtitle: 叶绍亭\ndescription:\nauthor: yeshaoting\nlanguage: zh-CN\ntimezone: Asia/Shanghai\n```\n\n\n## 安装主题\n官方收纳的主题：http://hexo.io/themes/\n我选用 jacman 主题。\n点击进入http://wuchong.me/jacman/介绍页有相关的安装指南[^4]。\n\n**注**：下载完主题后，需要修改_config.yml文件，如下所示：\n``` shell\ntheme: jacman\nstylus:\n  compress: true\n```\n\n## 四、服务部署[^3]\nHexo 提供了快速方便的一键部署功能，让您只需一条命令就能将网站部署到服务器上。\n\n### 安装 hexo-deployer-git\nnpm install hexo-deployer-git --save\n\n### 修改配置\n``` shell\n# Deployment\n## Docs: http://hexo.io/docs/deployment.html\ndeploy:\n  type: git\n  repo: git@github.com:yeshaoting/yeshaoting.github.io.git\n  branch: master\n```\n\n### 发布到github\nhexo deploy\n\n一般，之前需要生成静态文件hexo generate，\n而在生成静态文件前，可以先清理之前的静态文件hexo clean。\n\n\n## 五、本地预览\n\n## 安装 hexo-server\nnpm install hexo-server --save\n\n## 启动服务\n\n### 默认端口为4000\nhexo server\n\n### 指定端口为5000\nhexo server -p 5000\n\n### 指定地址\nhexo server -i 192.168.1.1\n\n\n## 五、常用操作\n\n### 创建文章\nhexo new [layout] &lt;title>\n新建的文章默认会被保存在source/_posts文件夹。\n其中，layout默认为post，若指定，会在scaffolds文件夹找对应的布局文件。\n\n### 常用命令\n``` shell\nhexo new \"postName\" #新建文章\nhexo new page \"pageName\" #新建页面\nhexo generate #生成静态页面至public目录\nhexo server #开启预览访问端口（默认端口4000，'ctrl + c'关闭server）\nhexo deploy #将.deploy目录部署到GitHub\n```\n\n### 常用复合命令\n``` shell\nhexo d -g #生成加部署\nhexo s -g #预览加部署\n```\n\n### 简写\n``` shell\nhexo n == hexo new\nhexo g == hexo generate\nhexo s == hexo server\nhexo d == hexo deploy\n```\n\n\n\n[^1]: http://cnfeat.com/2014/05/10/2014-05-11-how-to-build-a-blog/\n[^2]: http://www.pchou.info/web-build/2013/01/05/build-github-blog-page-02.html\n[^3]: https://hexo.io/zh-cn/docs/\n[^4]: http://wuchong.me/jacman/","slug":"article/hexo/hexo搭建github博客","published":1,"date":"2015-07-23T08:43:49.190Z","updated":"2015-07-17T08:40:13.968Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmnc0030x5vuwhztei71"},{"title":"Hello World","_content":"Welcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","source":"_posts/article/hexo/hello-world.md","raw":"title: Hello World\n---\nWelcome to [Hexo](http://hexo.io/)! This is your very first post. Check [documentation](http://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](http://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](http://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](http://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](http://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](http://hexo.io/docs/deployment.html)\n","slug":"article/hexo/hello-world","published":1,"date":"2015-07-23T08:43:41.246Z","updated":"2015-07-17T02:27:25.589Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmnf0031x5vuvh6k9yng"},{"title":"推送本地git仓库","_content":"\n本文参考：[Create Local Git Repo & Push to GitHub][1]\n\n[TOC]\n\n\n## 操作步骤\n\n\n### 一、打开终端\n\n### 二、到本地文件目录\n > cd /home/developer/public_html\n\n### 三、配置git\n用户名：\n > `git config --global user.name \"叶绍亭\"`\n\n邮箱：\n > `git config --global user.email \"yeshaoting@163.com\"`\n\n配色方案：\n > `git config --global color.ui auto`\n\n### 四、 项目初始化\n > git init\n\n初始化成功会看到如下内容：\n``` shell\n\"Initialized empty Git repository in home/developer/public_html/.git\"\n```\n\n<!-- more -->\n\n### 五、验证初始化后的状态\n > git status\n\n应该能看到类似如下的信息：\n``` shell\n# On branch master\n#\n# Initial commit\n#\n# Untracked files:\n#   (use \"git add <file>...\" to include in what will be committed)\n#\n#   .project\n#   bootstrap/\n#   index.html\nnothing added to commit but untracked files present (use \"git add\" to track)\n```\n\n### 六、添加文件或者目录到索引(index)\n > git add *\n\n应该能看到类似如下的信息：\n``` shell\n# On branch master\n#\n# Initial commit\n#\n# Changes to be committed:\n#   (use \"git rm --cached <file>...\" to unstage)\n#\n#   new file:   bootstrap/css/bootstrap-theme.css推送本地git仓库\n#   new file:   bootstrap/css/bootstrap-theme.min.css\n#   new file:   bootstrap/css/bootstrap.css\n#   new file:   bootstrap/css/bootstrap.min.css\n#   new file:   bootstrap/css/custom.css\n#   new file:   bootstrap/css/offcanvas.css\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.eot\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.svg\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.ttf\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.woff\n#   new file:   bootstrap/js/bootstrap.js\n#   new file:   bootstrap/js/bootstrap.min.js\n#   new file:   bootstrap/js/holder.js\n#   new file:   index.html\n#\n# Untracked files:\n#   (use \"git add <file>...\" to include in what will be committed)\n#\n#   .project\n```\n\n### 七、提交索引内容到仓库(repository)\n > git commit -m \"My first commit\"\n\n应该能看到类似如下的信息：\n``` shell\n[master (root-commit) c43daef] My first commit\n14 files changed, 9927 insertions(+)\ncreate mode 100644 bootstrap/css/bootstrap-theme.css\ncreate mode 100644 bootstrap/css/bootstrap-theme.min.css\ncreate mode 100644 bootstrap/css/bootstrap.css\ncreate mode 100644 bootstrap/css/bootstrap.min.css\ncreate mode 100644 bootstrap/css/custom.css\ncreate mode 100755 bootstrap/css/offcanvas.css\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.eot\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.svg\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.ttf\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.woff\ncreate mode 100644 bootstrap/js/bootstrap.js\ncreate mode 100644 bootstrap/js/bootstrap.min.js\ncreate mode 100755 bootstrap/js/holder.js\ncreate mode 100644 index.html\n```\n\n### 八、提交索引内容到仓库(repository)\n > git status\n\n应该能看到类似如下的信息：\n``` shell\n# On branch master\n#\n# Initial commit\n#\n# Untracked files:\n#   (use \"git add <file>...\" to include in what will be committed)\n#\n#   .project\n#   bootstrap/\n#   index.html\nnothing added to commit but untracked files present (use \"git add\" to track) \n```\n\n### 九、创建git账户及远程代码仓库\n\n### 十、连接本地仓库与远程仓库\n > git remote add origin git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git\n\n应该能看到类似如下的信息：\n``` shell\nCounting objects: 20, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (20/20), done.\nWriting objects: 100% (20/20), 121.70 KiB | 0 bytes/s, done.\nTotal 20 (delta 2), reused 0 (delta 0)\nTo https://github.com/your_name/your_repo.git\n* [new branch]      master -> master\nBranch master set up to track remote branch master from origin.\n```\n\n### 十一、推送本地仓库到远程仓库\n > git push -u origin master\n\n应该能看到类似如下的信息：\n``` shell\nCounting objects: 10, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (9/9), 1.33 KiB | 0 bytes/s, done.\nTotal 9 (delta 0), reused 0 (delta 0)\nTo git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git\n   8a82c26..90efea5  master -> master\n分支 master 设置为跟踪来自 origin 的远程分支 master。\n```\n\n#### 补充说明\n如若出现如下错误：\n``` shell\nTo git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git\n ! [rejected]        master -> master (fetch first)\nerror: 无法推送一些引用到 'git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git'\n提示：更新被拒绝，因为远程版本库包含您本地尚不存在的提交。这通常是因为另外\n提示：一个版本库已向该引用进行了推送。再次推送前，您可能需要先整合远程变更\n提示：（如 'git pull ...'）。\n提示：详见 'git push --help' 中的 'Note about fast-forwards' 小节。\n```\n\n说明，远程代码仓库已经存在部分代码，且未 pull 最新代码到本地仓库，出现冲突。\n此时，执行如下命令即可：\n > git pull origin master\n\n``` shell\n来自 git.oschina.net:yeshaoting/martinye-demo-spring-velocity\n * branch            master     -> FETCH_HEAD\nMerge made by the 'recursive' strategy.\n LICENSE   | 191 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n README.md |   1 +\n 2 files changed, 192 insertions(+)\n create mode 100644 LICENSE\n create mode 100644 README.md\n```\n\n\n[1]: https://www.texniq.de/en/web-engineering-i/create-local-git-repo-and-push-to-github","source":"_posts/article/git/推送本地git仓库.md","raw":"\ncategories:\n - git\n\ntags:\n - git\n\ntitle: 推送本地git仓库\n---\n\n本文参考：[Create Local Git Repo & Push to GitHub][1]\n\n[TOC]\n\n\n## 操作步骤\n\n\n### 一、打开终端\n\n### 二、到本地文件目录\n > cd /home/developer/public_html\n\n### 三、配置git\n用户名：\n > `git config --global user.name \"叶绍亭\"`\n\n邮箱：\n > `git config --global user.email \"yeshaoting@163.com\"`\n\n配色方案：\n > `git config --global color.ui auto`\n\n### 四、 项目初始化\n > git init\n\n初始化成功会看到如下内容：\n``` shell\n\"Initialized empty Git repository in home/developer/public_html/.git\"\n```\n\n<!-- more -->\n\n### 五、验证初始化后的状态\n > git status\n\n应该能看到类似如下的信息：\n``` shell\n# On branch master\n#\n# Initial commit\n#\n# Untracked files:\n#   (use \"git add <file>...\" to include in what will be committed)\n#\n#   .project\n#   bootstrap/\n#   index.html\nnothing added to commit but untracked files present (use \"git add\" to track)\n```\n\n### 六、添加文件或者目录到索引(index)\n > git add *\n\n应该能看到类似如下的信息：\n``` shell\n# On branch master\n#\n# Initial commit\n#\n# Changes to be committed:\n#   (use \"git rm --cached <file>...\" to unstage)\n#\n#   new file:   bootstrap/css/bootstrap-theme.css推送本地git仓库\n#   new file:   bootstrap/css/bootstrap-theme.min.css\n#   new file:   bootstrap/css/bootstrap.css\n#   new file:   bootstrap/css/bootstrap.min.css\n#   new file:   bootstrap/css/custom.css\n#   new file:   bootstrap/css/offcanvas.css\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.eot\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.svg\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.ttf\n#   new file:   bootstrap/fonts/glyphicons-halflings-regular.woff\n#   new file:   bootstrap/js/bootstrap.js\n#   new file:   bootstrap/js/bootstrap.min.js\n#   new file:   bootstrap/js/holder.js\n#   new file:   index.html\n#\n# Untracked files:\n#   (use \"git add <file>...\" to include in what will be committed)\n#\n#   .project\n```\n\n### 七、提交索引内容到仓库(repository)\n > git commit -m \"My first commit\"\n\n应该能看到类似如下的信息：\n``` shell\n[master (root-commit) c43daef] My first commit\n14 files changed, 9927 insertions(+)\ncreate mode 100644 bootstrap/css/bootstrap-theme.css\ncreate mode 100644 bootstrap/css/bootstrap-theme.min.css\ncreate mode 100644 bootstrap/css/bootstrap.css\ncreate mode 100644 bootstrap/css/bootstrap.min.css\ncreate mode 100644 bootstrap/css/custom.css\ncreate mode 100755 bootstrap/css/offcanvas.css\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.eot\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.svg\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.ttf\ncreate mode 100644 bootstrap/fonts/glyphicons-halflings-regular.woff\ncreate mode 100644 bootstrap/js/bootstrap.js\ncreate mode 100644 bootstrap/js/bootstrap.min.js\ncreate mode 100755 bootstrap/js/holder.js\ncreate mode 100644 index.html\n```\n\n### 八、提交索引内容到仓库(repository)\n > git status\n\n应该能看到类似如下的信息：\n``` shell\n# On branch master\n#\n# Initial commit\n#\n# Untracked files:\n#   (use \"git add <file>...\" to include in what will be committed)\n#\n#   .project\n#   bootstrap/\n#   index.html\nnothing added to commit but untracked files present (use \"git add\" to track) \n```\n\n### 九、创建git账户及远程代码仓库\n\n### 十、连接本地仓库与远程仓库\n > git remote add origin git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git\n\n应该能看到类似如下的信息：\n``` shell\nCounting objects: 20, done.\nDelta compression using up to 8 threads.\nCompressing objects: 100% (20/20), done.\nWriting objects: 100% (20/20), 121.70 KiB | 0 bytes/s, done.\nTotal 20 (delta 2), reused 0 (delta 0)\nTo https://github.com/your_name/your_repo.git\n* [new branch]      master -> master\nBranch master set up to track remote branch master from origin.\n```\n\n### 十一、推送本地仓库到远程仓库\n > git push -u origin master\n\n应该能看到类似如下的信息：\n``` shell\nCounting objects: 10, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (9/9), 1.33 KiB | 0 bytes/s, done.\nTotal 9 (delta 0), reused 0 (delta 0)\nTo git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git\n   8a82c26..90efea5  master -> master\n分支 master 设置为跟踪来自 origin 的远程分支 master。\n```\n\n#### 补充说明\n如若出现如下错误：\n``` shell\nTo git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git\n ! [rejected]        master -> master (fetch first)\nerror: 无法推送一些引用到 'git@git.oschina.net:yeshaoting/martinye-demo-spring-velocity.git'\n提示：更新被拒绝，因为远程版本库包含您本地尚不存在的提交。这通常是因为另外\n提示：一个版本库已向该引用进行了推送。再次推送前，您可能需要先整合远程变更\n提示：（如 'git pull ...'）。\n提示：详见 'git push --help' 中的 'Note about fast-forwards' 小节。\n```\n\n说明，远程代码仓库已经存在部分代码，且未 pull 最新代码到本地仓库，出现冲突。\n此时，执行如下命令即可：\n > git pull origin master\n\n``` shell\n来自 git.oschina.net:yeshaoting/martinye-demo-spring-velocity\n * branch            master     -> FETCH_HEAD\nMerge made by the 'recursive' strategy.\n LICENSE   | 191 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n README.md |   1 +\n 2 files changed, 192 insertions(+)\n create mode 100644 LICENSE\n create mode 100644 README.md\n```\n\n\n[1]: https://www.texniq.de/en/web-engineering-i/create-local-git-repo-and-push-to-github","slug":"article/git/推送本地git仓库","published":1,"date":"2015-07-21T06:28:42.462Z","updated":"2015-07-17T08:38:12.872Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmnh0032x5vuzr6efy00"},{"title":"回滚git代码版本","_content":"\n**参考**：[Git的撤消操作 - 重置, 签出 和 撤消][^1]\n\n错提交代码，或者某个版本代码之后想要回滚回来的话，就会遇到需要回滚代码版本的问题。\n\n根据代码当前提交状态，回滚操作可以分为二类：\n1. 未提交代码\n2. 已提交代码\n\n\n## 回滚未提交代码\n\n[git reset三种方式][^3]：\n1. 只回滚本地代码库(HEAD)内容，不回滚索引(index)和工作区(working)内容。\n`git reset --soft 版本号`\n\n2. (**默认**)只回滚本地代码库(HEAD)和索引(index)内容，不回滚工作区(working)内容。\n`git reset --mixed 版本号`\n\n3. 回滚本地代码库(HEAD)、索引(index)和工作区(working)内容。\n`git reset --hard 版本号`\n\n<!-- more -->\n\n**常用命令**\n\n1. 回滚到上一个版本\n`git reset HEAD`\n\n2. 回滚到上上个版本\n`git reset HEAD^`\n\n3. 回滚到指定版本\n`git reset 057d`\n\n**注**：此处回滚的含义是与当前分支远程代码库(target)内容保持一致。\n\n### 举例说明\n\n**参考**：[git-reset][^2]\n\n#### 举例1\n| # | working | index | HEAD | target |\n|----|----|----|----|----|\n| current | A | B | C | D |\n| soft | A | B | D | D |\n| mixed | A | D | D | D |\n| hard | D | D | D | D |\n\n#### 举例2\n| # | working | index | HEAD | target |\n|----|----|----|----|----|\n| current | A | B | C | C |\n| soft | A | B | C | C |\n| mixed | A | C | C | C |\n| hard | C | C | C | C |\n\n\n\n## 回滚已提交代码\n\n\n### 回滚已经提交，且已发布代码\n\n参考：[git revert 用法][^5]\n\ngit revert撤销某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销作为一次最新的提交。\ngit revert是提交一个新的版本，将需要revert的版本的内容再反向修改回去，版本会递增，不影响之前提交的内容。\n\n**常用命令**\n\n1. 撤销前一次 commit\n`git revert HEAD`\n\n2. 撤销前前一次 commit\n`git revert HEAD^`\n\n3. 撤销指定的版本，撤销也会作为一次提交进行保存\n`git revert commit fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff`\n\n\n#### 举例说明\n代码版本库中间一段提交内容如下：\n```\ncommit c15ebaadf86bde882035a68e09f0b7832ea271f6\n    删除无用文件\n\ncommit 763ab06edb1b5054fbd12e94317e2f13ac4b2af5\n    修改静态资源版本\n\ncommit 277563b24904f3f70eb210f6fa1d3f3f1ee914ac\n    pvrs接口切回测试环境\n\ncommit a00d98c53e86182054eb4e77a18e3044f5f9d658\n    搜索无数据返回，导致空指针异常处理\n```\n\n如果期望代码回滚到 **277563b24904f3f70eb210f6fa1d3f3f1ee914ac** 这个状态的话，则需要撤销后一个版本 **763ab06edb1b5054fbd12e94317e2f13ac4b2af5** 以后的所有代码提交。\n执行命令：`git revert 763ab06edb1b5054fbd12e94317e2f13ac4b2af5`\n\n\n\n### 回滚已经提交，但未发布代码\n\n**参考**：[Git 基础 - 撤消操作][^4]\n\n``` shell\ngit commit -m 'initial commit'\ngit add forgotten_file\ngit commit --amend\n```\n\n\n[^1]: http://gitbook.liuhui998.com/4_9.html\n[^2]: https://git-scm.com/docs/git-reset\n[^3]: http://blog.csdn.net/wujiangguizhen/article/details/10609647\n[^4]: https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%92%A4%E6%B6%88%E6%93%8D%E4%BD%9C\n[^5]: http://blog.chinaunix.net/uid-26770731-id-3285880.html","source":"_posts/article/git/如何使用git回退部分修改.md","raw":"\ncategories:\n - git\n\ntags:\n - git\n\ntitle: 回滚git代码版本\n---\n\n**参考**：[Git的撤消操作 - 重置, 签出 和 撤消][^1]\n\n错提交代码，或者某个版本代码之后想要回滚回来的话，就会遇到需要回滚代码版本的问题。\n\n根据代码当前提交状态，回滚操作可以分为二类：\n1. 未提交代码\n2. 已提交代码\n\n\n## 回滚未提交代码\n\n[git reset三种方式][^3]：\n1. 只回滚本地代码库(HEAD)内容，不回滚索引(index)和工作区(working)内容。\n`git reset --soft 版本号`\n\n2. (**默认**)只回滚本地代码库(HEAD)和索引(index)内容，不回滚工作区(working)内容。\n`git reset --mixed 版本号`\n\n3. 回滚本地代码库(HEAD)、索引(index)和工作区(working)内容。\n`git reset --hard 版本号`\n\n<!-- more -->\n\n**常用命令**\n\n1. 回滚到上一个版本\n`git reset HEAD`\n\n2. 回滚到上上个版本\n`git reset HEAD^`\n\n3. 回滚到指定版本\n`git reset 057d`\n\n**注**：此处回滚的含义是与当前分支远程代码库(target)内容保持一致。\n\n### 举例说明\n\n**参考**：[git-reset][^2]\n\n#### 举例1\n| # | working | index | HEAD | target |\n|----|----|----|----|----|\n| current | A | B | C | D |\n| soft | A | B | D | D |\n| mixed | A | D | D | D |\n| hard | D | D | D | D |\n\n#### 举例2\n| # | working | index | HEAD | target |\n|----|----|----|----|----|\n| current | A | B | C | C |\n| soft | A | B | C | C |\n| mixed | A | C | C | C |\n| hard | C | C | C | C |\n\n\n\n## 回滚已提交代码\n\n\n### 回滚已经提交，且已发布代码\n\n参考：[git revert 用法][^5]\n\ngit revert撤销某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销作为一次最新的提交。\ngit revert是提交一个新的版本，将需要revert的版本的内容再反向修改回去，版本会递增，不影响之前提交的内容。\n\n**常用命令**\n\n1. 撤销前一次 commit\n`git revert HEAD`\n\n2. 撤销前前一次 commit\n`git revert HEAD^`\n\n3. 撤销指定的版本，撤销也会作为一次提交进行保存\n`git revert commit fa042ce57ebbe5bb9c8db709f719cec2c58ee7ff`\n\n\n#### 举例说明\n代码版本库中间一段提交内容如下：\n```\ncommit c15ebaadf86bde882035a68e09f0b7832ea271f6\n    删除无用文件\n\ncommit 763ab06edb1b5054fbd12e94317e2f13ac4b2af5\n    修改静态资源版本\n\ncommit 277563b24904f3f70eb210f6fa1d3f3f1ee914ac\n    pvrs接口切回测试环境\n\ncommit a00d98c53e86182054eb4e77a18e3044f5f9d658\n    搜索无数据返回，导致空指针异常处理\n```\n\n如果期望代码回滚到 **277563b24904f3f70eb210f6fa1d3f3f1ee914ac** 这个状态的话，则需要撤销后一个版本 **763ab06edb1b5054fbd12e94317e2f13ac4b2af5** 以后的所有代码提交。\n执行命令：`git revert 763ab06edb1b5054fbd12e94317e2f13ac4b2af5`\n\n\n\n### 回滚已经提交，但未发布代码\n\n**参考**：[Git 基础 - 撤消操作][^4]\n\n``` shell\ngit commit -m 'initial commit'\ngit add forgotten_file\ngit commit --amend\n```\n\n\n[^1]: http://gitbook.liuhui998.com/4_9.html\n[^2]: https://git-scm.com/docs/git-reset\n[^3]: http://blog.csdn.net/wujiangguizhen/article/details/10609647\n[^4]: https://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%92%A4%E6%B6%88%E6%93%8D%E4%BD%9C\n[^5]: http://blog.chinaunix.net/uid-26770731-id-3285880.html","slug":"article/git/如何使用git回退部分修改","published":1,"date":"2015-07-21T06:28:42.478Z","updated":"2015-07-17T08:37:56.272Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmnl0037x5vufzz1scy6"},{"title":"git拉取submodule","_content":"\n## 一、执行步骤\n\n### 1. 添加子模块配置\n子模块的URL加入到.git/config\ngit submodule init\n\n### 2. 查看模块状态\ngit submodule status\n\n### 3. 拉取子模块\n克隆子模块的仓库和签出父项目中指定的那个版本\ngit submodule update\n\n### 4. 切换子模块版本\ngit submodule foreach git checkout develop\n\n\n## 二、参考文档\n[Git Community Book 中文版 - 子模块](http://gitbook.liuhui998.com/5_10.html)\n","source":"_posts/article/git/git拉取submodule.md","raw":"\ncategories:\n  - git\n\ntag:\n  - git\n\ntitle: git拉取submodule\n---\n\n## 一、执行步骤\n\n### 1. 添加子模块配置\n子模块的URL加入到.git/config\ngit submodule init\n\n### 2. 查看模块状态\ngit submodule status\n\n### 3. 拉取子模块\n克隆子模块的仓库和签出父项目中指定的那个版本\ngit submodule update\n\n### 4. 切换子模块版本\ngit submodule foreach git checkout develop\n\n\n## 二、参考文档\n[Git Community Book 中文版 - 子模块](http://gitbook.liuhui998.com/5_10.html)\n","slug":"article/git/git拉取submodule","published":1,"date":"2015-09-24T04:13:08.267Z","updated":"2015-09-24T04:13:08.267Z","_id":"ciexpcmno003ax5vurc1zqv3y","comments":1,"layout":"post","photos":[],"link":""},{"title":"git命令小记","_content":"\n\n[TOC]\n\n\n## 1. git日志格式化\n``` shell\ngit whatchanged -1 --pretty=raw --no-abbrev\ngit log -1 --pretty=format:'commit %H%ntree %T%nparent %P%nauthor %an <%ae> %at %ar%ncommitter %cn <%ce> %ct %cr%n%n %s%n%n'\n```\n\n\n## 2. 标签按时间排序\n``` shell\n子模块最新的tag: git submodule foreach 'git tag | xargs -I@ git log --format=format:\"%ci %H @%n\" -1 @ | sort -r | head -1'\ngit tag | xargs -I@ git log --format=format:\"%ci %h @%n\" -1 @ | sort\ngit tag | xargs -I@ git log --format=format:\"%ci %h @%n\" -1 @ | sort -r\n```\n\n\n## 3. 重置本地代码\n`git reset --mixed`：此为默认方式，不带任何参数的git reset，即时这种方式，它回退到某个版本，只保留源码，回退commit和index信息\n`git reset --soft`：回退到某个版本，只回退了commit的信息，不会恢复到index file一级。如果还要提交，直接commit即可\n`git reset --hard`：彻底回退到某个版本，本地的源码也会变为上一个版本的内容\n\n\n## 4. 创建分支\ngit branch develop\n\n\n## 5. 切换分支\ngit checkout develop\n\n<!-- more -->\n\n## 6. 查看分支版本\ngit branch\ngit branch -v\ngit branch -r\n\n\n## 7. 项目多模块更新\ngit submodule init\ngit submodule update\ngit submodule status\n\n\n## 8. 修改最近一次提交\n``` shell\ngit commit -m 'initial commit'\ngit add forgotten_file\ngit commit --amend\n```\n\n\n## 9. git ssh配置\n密钥&公钥对生成(默认生成位置为：~/.ssh)：\nssh-keygen -t rsa -C \"yeshaoting@163.com\"\n\n**说明**：\nid_rsa是密钥，如同个人密码一般，别人拿到这个就能以你的身份登录git。\nid_rsa.pub是公钥，用于在服务器端注册。当访问远程服务器时，远程服务器会拿着他那端的公钥与本机的密钥匹配，成功即可无密码访问。\n\n测试命令：\n> git -T User@Host\n\n### git配置优先顺序\nlocal > global > system\nlocal：项目目录/.git/config\nglobal：当前用户目录/.gitconfig\nsystem：/etc/gitconfig\n\n\n## 10.配置值获取\nconfig demo：\n[user]\n        name = shaotingye\n        email = shaotingye@sohu-inc.com\n\n获取命令为：\n> git config --get user.email\n\n\n## 11. git 放弃本地修改 强制更新\n``` shell\ngit fetch --all\ngit reset --hard origin/master\n```\n\n参考：http://blog.csdn.net/a06062125/article/details/11727273","source":"_posts/article/git/git命令小记.md","raw":"\ncategories:\n - git\n\ntags:\n - git\n - 小记\n\ntitle: git命令小记\n---\n\n\n[TOC]\n\n\n## 1. git日志格式化\n``` shell\ngit whatchanged -1 --pretty=raw --no-abbrev\ngit log -1 --pretty=format:'commit %H%ntree %T%nparent %P%nauthor %an <%ae> %at %ar%ncommitter %cn <%ce> %ct %cr%n%n %s%n%n'\n```\n\n\n## 2. 标签按时间排序\n``` shell\n子模块最新的tag: git submodule foreach 'git tag | xargs -I@ git log --format=format:\"%ci %H @%n\" -1 @ | sort -r | head -1'\ngit tag | xargs -I@ git log --format=format:\"%ci %h @%n\" -1 @ | sort\ngit tag | xargs -I@ git log --format=format:\"%ci %h @%n\" -1 @ | sort -r\n```\n\n\n## 3. 重置本地代码\n`git reset --mixed`：此为默认方式，不带任何参数的git reset，即时这种方式，它回退到某个版本，只保留源码，回退commit和index信息\n`git reset --soft`：回退到某个版本，只回退了commit的信息，不会恢复到index file一级。如果还要提交，直接commit即可\n`git reset --hard`：彻底回退到某个版本，本地的源码也会变为上一个版本的内容\n\n\n## 4. 创建分支\ngit branch develop\n\n\n## 5. 切换分支\ngit checkout develop\n\n<!-- more -->\n\n## 6. 查看分支版本\ngit branch\ngit branch -v\ngit branch -r\n\n\n## 7. 项目多模块更新\ngit submodule init\ngit submodule update\ngit submodule status\n\n\n## 8. 修改最近一次提交\n``` shell\ngit commit -m 'initial commit'\ngit add forgotten_file\ngit commit --amend\n```\n\n\n## 9. git ssh配置\n密钥&公钥对生成(默认生成位置为：~/.ssh)：\nssh-keygen -t rsa -C \"yeshaoting@163.com\"\n\n**说明**：\nid_rsa是密钥，如同个人密码一般，别人拿到这个就能以你的身份登录git。\nid_rsa.pub是公钥，用于在服务器端注册。当访问远程服务器时，远程服务器会拿着他那端的公钥与本机的密钥匹配，成功即可无密码访问。\n\n测试命令：\n> git -T User@Host\n\n### git配置优先顺序\nlocal > global > system\nlocal：项目目录/.git/config\nglobal：当前用户目录/.gitconfig\nsystem：/etc/gitconfig\n\n\n## 10.配置值获取\nconfig demo：\n[user]\n        name = shaotingye\n        email = shaotingye@sohu-inc.com\n\n获取命令为：\n> git config --get user.email\n\n\n## 11. git 放弃本地修改 强制更新\n``` shell\ngit fetch --all\ngit reset --hard origin/master\n```\n\n参考：http://blog.csdn.net/a06062125/article/details/11727273","slug":"article/git/git命令小记","published":1,"date":"2015-07-21T06:28:42.474Z","updated":"2015-07-17T09:08:13.820Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmnw003dx5vua8twccjx"},{"title":"mysql数据库命令小记","_content":"\n[TOC]\n\n## 查看锁情况\n表锁：show global status like 'table_locks%';\n行锁：show global status like 'innodb_row_lock%';\n\n\n## 文件打开数\nshow global status like 'open_files';\n\n\n## 查看慢查询\nshow full processlist;\nSELECT * FROM information_schema.INNODB_TRX;\nselect @@autocommit;\n\n\n## 设置对应的编码\nset character_set_server=utf8;\n\n\n## 查看数据库编码\nSHOW VARIABLES LIKE 'character%';\n\n<!-- more -->\n\n## 查看日期毫秒数\nselect unix_timestamp('2009-10-26 10:06:07');\n\n\n## 查看日期\nselect from_unixtime(1430211829676/1000);\n\n\n## 查看表索引\nshow index from table;\n\n\n## 查看数据库表字段\nselect COLUMN_NAME from information_schema.COLUMNS\nwhere table_name = 'channel_movie' \nand table_schema = 'movie_ticket';\n\n\n## 数据库事务隔离级别\n\n### 查看当前会话隔离级别\nselect @@tx_isolation;\n\n### 查看系统当前隔离级别\nselect @@global.tx_isolation;\n\n### 设置当前会话隔离级别\nset session transaction isolatin level repeatable read;\n\n### 设置系统当前隔离级别\nset global transaction isolation level repeatable read;\n\n\n## 显示数据表索引\nshow index from user_login_status;\n\n\n## 删除重复数据（性能不佳）\n``` sql\nset sql_safe_updates=0;\ndelete from netnews.item\nwhere id not in (\n     select id from (\n          select  min(id) as id from netnews.item group by channel_id, link\n     ) as tab\n);\nset sql_safe_updates=1;\n```\n\n\n## 安全更新状态修改\n关闭：set sql_safe_updates=0;\n打开：set sql_safe_updates=1;\n\n\n## 查看mysql系统状态\nshow status\nshow processlist\n\n\n## 临时修改内容显示字符集\ncharset utf8\n\n\n## 修改索引\nALTER TABLE `babel_idea`.`i_product_owner`\nDROP INDEX `name_UNIQUE` ,\nADD UNIQUE INDEX `unique_product_owner_name` (`name` ASC);\n\n\n## 显示索引\nshow index from i_product;\n\n\n## 删除索引\nalter table i_product drop index fk_product_deleted_idx;\n\n\n## 按条件导出mysql表数据\n`mysqldump -u root -p 数据库名 --no-create-db=TRUE --no-create-info=TRUE --add-drop-table=FALSE --where=\"id >1000\" 表明>导出文件名.sql`\n\n\n## mysqldump数据导入\nmysqldump babel_idea < babel_idea.sql\n\n\n## 启用safe mode(update, delete, select操作需要包含主键的where条件)\nset sql_safe_updates=1;\n\n\n## 关闭safe mode\nset sql_safe_updates=0;\n\n\n## 修改表字段\nalter table i_product\nadd column `deleted` tinyint not null\ndefault 0\ncomment '逻辑删除，是否已删除(0: 未删除，1: 删除)';\n\n\n\n## 添加索引\n\n### 添加单一索引\nalter table i_product\ndrop index `fk_product_product_idx`;\n\n### 添加联合索引\nalter table i_product\nadd index `fk_product_id_parent_idx`\n(id, parent);\n\n\n## 创建数据库(设置默认字符集)\ncreate database `babel_idea` DEFAULT CHARACTER SET utf8;\n\n\n## 只导出数据库数据表结构\n~/local/mysql/bin/mysqldump -ubkmadmin -pbkmadmin -t babel_idea > ~/babel_idea.schema.sql\n\n","source":"_posts/article/database/mysql数据库命令小记.md","raw":"\ncategories:\n - 数据库\n\ntags:\n - mysql\n - 小记\n\ntitle: mysql数据库命令小记\n---\n\n[TOC]\n\n## 查看锁情况\n表锁：show global status like 'table_locks%';\n行锁：show global status like 'innodb_row_lock%';\n\n\n## 文件打开数\nshow global status like 'open_files';\n\n\n## 查看慢查询\nshow full processlist;\nSELECT * FROM information_schema.INNODB_TRX;\nselect @@autocommit;\n\n\n## 设置对应的编码\nset character_set_server=utf8;\n\n\n## 查看数据库编码\nSHOW VARIABLES LIKE 'character%';\n\n<!-- more -->\n\n## 查看日期毫秒数\nselect unix_timestamp('2009-10-26 10:06:07');\n\n\n## 查看日期\nselect from_unixtime(1430211829676/1000);\n\n\n## 查看表索引\nshow index from table;\n\n\n## 查看数据库表字段\nselect COLUMN_NAME from information_schema.COLUMNS\nwhere table_name = 'channel_movie' \nand table_schema = 'movie_ticket';\n\n\n## 数据库事务隔离级别\n\n### 查看当前会话隔离级别\nselect @@tx_isolation;\n\n### 查看系统当前隔离级别\nselect @@global.tx_isolation;\n\n### 设置当前会话隔离级别\nset session transaction isolatin level repeatable read;\n\n### 设置系统当前隔离级别\nset global transaction isolation level repeatable read;\n\n\n## 显示数据表索引\nshow index from user_login_status;\n\n\n## 删除重复数据（性能不佳）\n``` sql\nset sql_safe_updates=0;\ndelete from netnews.item\nwhere id not in (\n     select id from (\n          select  min(id) as id from netnews.item group by channel_id, link\n     ) as tab\n);\nset sql_safe_updates=1;\n```\n\n\n## 安全更新状态修改\n关闭：set sql_safe_updates=0;\n打开：set sql_safe_updates=1;\n\n\n## 查看mysql系统状态\nshow status\nshow processlist\n\n\n## 临时修改内容显示字符集\ncharset utf8\n\n\n## 修改索引\nALTER TABLE `babel_idea`.`i_product_owner`\nDROP INDEX `name_UNIQUE` ,\nADD UNIQUE INDEX `unique_product_owner_name` (`name` ASC);\n\n\n## 显示索引\nshow index from i_product;\n\n\n## 删除索引\nalter table i_product drop index fk_product_deleted_idx;\n\n\n## 按条件导出mysql表数据\n`mysqldump -u root -p 数据库名 --no-create-db=TRUE --no-create-info=TRUE --add-drop-table=FALSE --where=\"id >1000\" 表明>导出文件名.sql`\n\n\n## mysqldump数据导入\nmysqldump babel_idea < babel_idea.sql\n\n\n## 启用safe mode(update, delete, select操作需要包含主键的where条件)\nset sql_safe_updates=1;\n\n\n## 关闭safe mode\nset sql_safe_updates=0;\n\n\n## 修改表字段\nalter table i_product\nadd column `deleted` tinyint not null\ndefault 0\ncomment '逻辑删除，是否已删除(0: 未删除，1: 删除)';\n\n\n\n## 添加索引\n\n### 添加单一索引\nalter table i_product\ndrop index `fk_product_product_idx`;\n\n### 添加联合索引\nalter table i_product\nadd index `fk_product_id_parent_idx`\n(id, parent);\n\n\n## 创建数据库(设置默认字符集)\ncreate database `babel_idea` DEFAULT CHARACTER SET utf8;\n\n\n## 只导出数据库数据表结构\n~/local/mysql/bin/mysqldump -ubkmadmin -pbkmadmin -t babel_idea > ~/babel_idea.schema.sql\n\n","slug":"article/database/mysql数据库命令小记","published":1,"date":"2015-07-21T06:28:42.438Z","updated":"2015-07-17T08:37:16.216Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmnz003hx5vudiu9chkq"},{"title":"redis单机多实例部署","_content":"\n[TOC]\n\n## 一、redis安装\n\n## Redis介绍\nRedis是一种高级key-value数据库。它跟memcached类似，不过数据可以持久化，而且支持的数据类型很丰富。有字符串，链表、哈希、集合和有序集合5种。支持在服务器端计算集合的并、交和补集(difference)等，还支持多种排序功能。所以Redis也可以被看成是一个数据结构服务器。Redis的所有数据都是保存在内存中，然后不定期的通过异步方式保存到磁盘上(这称为“半持久化模式”)；也可以把每一次数据变化都写入到一个append only file(aof)里面(这称为“全持久化模式”)。\n\n### 1. 下载redis\n``` shell\ncd /opt/work/local\n\nwget -c http://download.redis.io/releases/redis-3.0.3.tar.gz\ntar -zxvf redis-3.0.3.tar.gz\n```\n解压后的文件目录如下：\n![解压后的Redis目录结构](http://images.cnitblog.com/i/420264/201404/191557148074939.jpg)\n\n### 2. 编译redis\n``` shell\ncd /opt/work/local/redis-3.0.3\nmake\n```\n\n### 3. 拷贝产生的可执行命令\n``` shell\nmkdir -p /opt/work/local/redis/bin\ncd /opt/work/local/redis-3.0.3/src\ncp -p redis-benchmark redis-check-aof redis-check-dump redis-cli redis-sentinel redis-server mkreleasehdr.sh /opt/work/local/redis/bin\n```\n\n### 4. redis服务启动\n(1) 修改环境变量(vim  ~/.bash_profile)如下：\n``` shell\nREDIS_HOME=/opt/work/local/redis\n\nPATH=$PATH:$HOME/bin:$REDIS_HOME/bin\n```\n\n(2) 修改完成后，记得使用`source ~/.bash_profile`生效。\n\n(3) 查看redis-server使用文档\n``` shell\n[@zw_25_105 local]# redis-server --help\nUsage: ./redis-server [/path/to/redis.conf] [options]\n       ./redis-server - (read config from stdin)\n       ./redis-server -v or --version\n       ./redis-server -h or --help\n       ./redis-server --test-memory <megabytes>\n\nExamples:\n       ./redis-server (run the server with default conf)\n       ./redis-server /etc/redis/6379.conf\n       ./redis-server --port 7777\n       ./redis-server --port 7777 --slaveof 127.0.0.1 8888\n       ./redis-server /etc/myredis.conf --loglevel verbose\n\nSentinel mode:\n       ./redis-server /etc/sentinel.conf --sentinel\n```\n\n(4) 启动单机redis\n使用默认的参数启动redis：`redis-server`\n指定端口启动redis：`redis-server --port 6380`\n\n(5) 允许redis端口远程连接\n修改防火墙配置文件，如下所示：\n``` shell\nvim /etc/sysconfig/iptables\n\n# 添加一行\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 6380 -j ACCEPT\n\n# 重新加载规则\nservice iptables restart\n```\n\n至此你就可以用客户端redis-cli连接了：`redis-cli -h 127.0.0.1 -p 6380`\n\n<!-- more -->\n\n## 二、redis主从配置\n\n\n## 三、redis sentinel配置\n\n\n\n\n\n## 四、参考文档：\n[Redis安装及主从配置](!http://www.cnblogs.com/liuling/p/2014-4-19-02.html)\n[centos 安装redis（一台机器可以安装多个redis）](!http://www.cnblogs.com/eric-z/p/4153101.html)\n[在一台机器上搭建多个redis实例](!http://my.oschina.net/liuke1556/blog/287594)\n","source":"_posts/article/cache/redis单机多实例部署.md","raw":"\ncategories:\n  - cache\n\ntag:\n  - redis\n\ntitle: redis单机多实例部署\n---\n\n[TOC]\n\n## 一、redis安装\n\n## Redis介绍\nRedis是一种高级key-value数据库。它跟memcached类似，不过数据可以持久化，而且支持的数据类型很丰富。有字符串，链表、哈希、集合和有序集合5种。支持在服务器端计算集合的并、交和补集(difference)等，还支持多种排序功能。所以Redis也可以被看成是一个数据结构服务器。Redis的所有数据都是保存在内存中，然后不定期的通过异步方式保存到磁盘上(这称为“半持久化模式”)；也可以把每一次数据变化都写入到一个append only file(aof)里面(这称为“全持久化模式”)。\n\n### 1. 下载redis\n``` shell\ncd /opt/work/local\n\nwget -c http://download.redis.io/releases/redis-3.0.3.tar.gz\ntar -zxvf redis-3.0.3.tar.gz\n```\n解压后的文件目录如下：\n![解压后的Redis目录结构](http://images.cnitblog.com/i/420264/201404/191557148074939.jpg)\n\n### 2. 编译redis\n``` shell\ncd /opt/work/local/redis-3.0.3\nmake\n```\n\n### 3. 拷贝产生的可执行命令\n``` shell\nmkdir -p /opt/work/local/redis/bin\ncd /opt/work/local/redis-3.0.3/src\ncp -p redis-benchmark redis-check-aof redis-check-dump redis-cli redis-sentinel redis-server mkreleasehdr.sh /opt/work/local/redis/bin\n```\n\n### 4. redis服务启动\n(1) 修改环境变量(vim  ~/.bash_profile)如下：\n``` shell\nREDIS_HOME=/opt/work/local/redis\n\nPATH=$PATH:$HOME/bin:$REDIS_HOME/bin\n```\n\n(2) 修改完成后，记得使用`source ~/.bash_profile`生效。\n\n(3) 查看redis-server使用文档\n``` shell\n[@zw_25_105 local]# redis-server --help\nUsage: ./redis-server [/path/to/redis.conf] [options]\n       ./redis-server - (read config from stdin)\n       ./redis-server -v or --version\n       ./redis-server -h or --help\n       ./redis-server --test-memory <megabytes>\n\nExamples:\n       ./redis-server (run the server with default conf)\n       ./redis-server /etc/redis/6379.conf\n       ./redis-server --port 7777\n       ./redis-server --port 7777 --slaveof 127.0.0.1 8888\n       ./redis-server /etc/myredis.conf --loglevel verbose\n\nSentinel mode:\n       ./redis-server /etc/sentinel.conf --sentinel\n```\n\n(4) 启动单机redis\n使用默认的参数启动redis：`redis-server`\n指定端口启动redis：`redis-server --port 6380`\n\n(5) 允许redis端口远程连接\n修改防火墙配置文件，如下所示：\n``` shell\nvim /etc/sysconfig/iptables\n\n# 添加一行\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 6380 -j ACCEPT\n\n# 重新加载规则\nservice iptables restart\n```\n\n至此你就可以用客户端redis-cli连接了：`redis-cli -h 127.0.0.1 -p 6380`\n\n<!-- more -->\n\n## 二、redis主从配置\n\n\n## 三、redis sentinel配置\n\n\n\n\n\n## 四、参考文档：\n[Redis安装及主从配置](!http://www.cnblogs.com/liuling/p/2014-4-19-02.html)\n[centos 安装redis（一台机器可以安装多个redis）](!http://www.cnblogs.com/eric-z/p/4153101.html)\n[在一台机器上搭建多个redis实例](!http://my.oschina.net/liuke1556/blog/287594)\n","slug":"article/cache/redis单机多实例部署","published":1,"date":"2015-09-07T04:23:02.297Z","updated":"2015-09-07T04:23:02.265Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ciexpcmo6003nx5vumlgxo0qx"}],"PostAsset":[],"PostCategory":[{"post_id":"ciexpcmkb0000x5vuv21q5070","category_id":"ciexpcmki0001x5vuvt06xu0l","_id":"ciexpcmkl0004x5vusjzsc1vy"},{"post_id":"ciexpcmkr0006x5vu8g8mgoy2","category_id":"ciexpcmks0007x5vuyq8dnh28","_id":"ciexpcmkt000ax5vuy9lykqql"},{"post_id":"ciexpcmkx000ex5vulc4t68bo","category_id":"ciexpcmky000fx5vuv417sm22","_id":"ciexpcmkz000ix5vuqh5u49mk"},{"post_id":"ciexpcml1000lx5vuqjr2rtxm","category_id":"ciexpcmky000fx5vuv417sm22","_id":"ciexpcml2000mx5vutdoitwb9"},{"post_id":"ciexpcml5000qx5vu6pdrjx1r","category_id":"ciexpcmky000fx5vuv417sm22","_id":"ciexpcml7000rx5vuxc3euwpi"},{"post_id":"ciexpcmlc000ux5vuyqx0hsom","category_id":"ciexpcmlc000vx5vulr62ecxk","_id":"ciexpcmle000yx5vuvglo50w8"},{"post_id":"ciexpcmlj0013x5vum9kpmmwc","category_id":"ciexpcmlc000vx5vulr62ecxk","_id":"ciexpcmlo0014x5vuo0cw0ape"},{"post_id":"ciexpcmlr0019x5vu5rrrkdap","category_id":"ciexpcmlc000vx5vulr62ecxk","_id":"ciexpcmls001ax5vu414m60p0"},{"post_id":"ciexpcmlv001ex5vu9zv8y3qg","category_id":"ciexpcmlc000vx5vulr62ecxk","_id":"ciexpcmlx001fx5vuar1mekby"},{"post_id":"ciexpcmly001ix5vubtv3mo77","category_id":"ciexpcmlc000vx5vulr62ecxk","_id":"ciexpcmm2001jx5vuzl36nw0a"},{"post_id":"ciexpcmm8001nx5vu8nb4apoy","category_id":"ciexpcmlc000vx5vulr62ecxk","_id":"ciexpcmmb001ox5vuyv9yper7"},{"post_id":"ciexpcmmf001ux5vuuixwsih2","category_id":"ciexpcmmg001vx5vuv81qkgwr","_id":"ciexpcmmk001yx5vu5hdq1xsl"},{"post_id":"ciexpcmml0021x5vu42vi2fod","category_id":"ciexpcmmg001vx5vuv81qkgwr","_id":"ciexpcmmp0022x5vu22u736gw"},{"post_id":"ciexpcmms0026x5vupp31bnlg","category_id":"ciexpcmmg001vx5vuv81qkgwr","_id":"ciexpcmmt0027x5vua7gpwzie"},{"post_id":"ciexpcmmw002bx5vurqipvno4","category_id":"ciexpcmmg001vx5vuv81qkgwr","_id":"ciexpcmmx002cx5vuu04ylqst"},{"post_id":"ciexpcmn2002gx5vugsa6a4xe","category_id":"ciexpcmn3002hx5vu9lgvuopf","_id":"ciexpcmn5002kx5vukopb4ph5"},{"post_id":"ciexpcmn6002nx5vu6cf6gbce","category_id":"ciexpcmn3002hx5vu9lgvuopf","_id":"ciexpcmn7002ox5vu48co6o6t"},{"post_id":"ciexpcmn9002tx5vuomv35i04","category_id":"ciexpcmna002ux5vurwogequ2","_id":"ciexpcmnb002xx5vuf6nkk38r"},{"post_id":"ciexpcmnh0032x5vuzr6efy00","category_id":"ciexpcmnj0033x5vu50gne2xe","_id":"ciexpcmnk0036x5vuog9b5k6g"},{"post_id":"ciexpcmnl0037x5vufzz1scy6","category_id":"ciexpcmnj0033x5vu50gne2xe","_id":"ciexpcmnm0038x5vuynz0yfmr"},{"post_id":"ciexpcmnw003dx5vua8twccjx","category_id":"ciexpcmnj0033x5vu50gne2xe","_id":"ciexpcmnx003ex5vu1f9ot1yp"},{"post_id":"ciexpcmnz003hx5vudiu9chkq","category_id":"ciexpcmo2003ix5vuvwj1mmfo","_id":"ciexpcmo3003lx5vuud1xnwsu"},{"post_id":"ciexpcmo6003nx5vumlgxo0qx","category_id":"ciexpcmki0001x5vuvt06xu0l","_id":"ciexpcmo9003ox5vul1fgf29o"},{"post_id":"ciexpcmno003ax5vurc1zqv3y","category_id":"ciexpcmnj0033x5vu50gne2xe","_id":"ciexpf9k3000035vuz7f3093s"}],"PostTag":[{"post_id":"ciexpcmkb0000x5vuv21q5070","tag_id":"ciexpcmkj0002x5vukcbddz0a","_id":"ciexpcmkl0003x5vubk3mu9sw"},{"post_id":"ciexpcmkr0006x5vu8g8mgoy2","tag_id":"ciexpcmks0008x5vu8y9dw8c0","_id":"ciexpcmkt0009x5vu24b2y9ve"},{"post_id":"ciexpcmku000bx5vuxl1hw5rw","tag_id":"ciexpcmkv000cx5vua4o3re6c","_id":"ciexpcmkw000dx5vugsdfciww"},{"post_id":"ciexpcmkx000ex5vulc4t68bo","tag_id":"ciexpcmky000gx5vuc7av0j0a","_id":"ciexpcmkz000jx5vu3wxx7kzz"},{"post_id":"ciexpcmkx000ex5vulc4t68bo","tag_id":"ciexpcmky000hx5vu1lcabbj0","_id":"ciexpcmkz000kx5vu6yx2rxf0"},{"post_id":"ciexpcml1000lx5vuqjr2rtxm","tag_id":"ciexpcml3000nx5vuhsxhwurj","_id":"ciexpcml3000ox5vubaj31b62"},{"post_id":"ciexpcml1000lx5vuqjr2rtxm","tag_id":"ciexpcmky000hx5vu1lcabbj0","_id":"ciexpcml3000px5vu2yqntlya"},{"post_id":"ciexpcml5000qx5vu6pdrjx1r","tag_id":"ciexpcmky000hx5vu1lcabbj0","_id":"ciexpcml7000sx5vuu8i1jgqy"},{"post_id":"ciexpcmlc000ux5vuyqx0hsom","tag_id":"ciexpcmld000wx5vumgpic0nm","_id":"ciexpcmlf0010x5vugy4bcqhm"},{"post_id":"ciexpcmlc000ux5vuyqx0hsom","tag_id":"ciexpcmle000xx5vua5rp7vwc","_id":"ciexpcmlh0011x5vudsylxww9"},{"post_id":"ciexpcmlc000ux5vuyqx0hsom","tag_id":"ciexpcmlf000zx5vun8i0ad3n","_id":"ciexpcmlh0012x5vu4tk27y5y"},{"post_id":"ciexpcmlj0013x5vum9kpmmwc","tag_id":"ciexpcmlo0015x5vu12g41ai0","_id":"ciexpcmlp0016x5vuiu0ahhky"},{"post_id":"ciexpcmlj0013x5vum9kpmmwc","tag_id":"ciexpcmle000xx5vua5rp7vwc","_id":"ciexpcmlq0017x5vus5ir4x66"},{"post_id":"ciexpcmlj0013x5vum9kpmmwc","tag_id":"ciexpcmld000wx5vumgpic0nm","_id":"ciexpcmlq0018x5vu78fgvasf"},{"post_id":"ciexpcmlr0019x5vu5rrrkdap","tag_id":"ciexpcmld000wx5vumgpic0nm","_id":"ciexpcmls001cx5vul7zvyns4"},{"post_id":"ciexpcmlr0019x5vu5rrrkdap","tag_id":"ciexpcmls001bx5vu3r0skrvf","_id":"ciexpcmls001dx5vu42f8ohlz"},{"post_id":"ciexpcmlv001ex5vu9zv8y3qg","tag_id":"ciexpcmld000wx5vumgpic0nm","_id":"ciexpcmlx001gx5vuthaer38r"},{"post_id":"ciexpcmlv001ex5vu9zv8y3qg","tag_id":"ciexpcmle000xx5vua5rp7vwc","_id":"ciexpcmlx001hx5vufcwekey5"},{"post_id":"ciexpcmly001ix5vubtv3mo77","tag_id":"ciexpcmld000wx5vumgpic0nm","_id":"ciexpcmm4001lx5vu0z5183ko"},{"post_id":"ciexpcmly001ix5vubtv3mo77","tag_id":"ciexpcmm4001kx5vurmfu4d67","_id":"ciexpcmm4001mx5vuzife6s2e"},{"post_id":"ciexpcmm8001nx5vu8nb4apoy","tag_id":"ciexpcmld000wx5vumgpic0nm","_id":"ciexpcmmc001rx5vuf8g3o3vh"},{"post_id":"ciexpcmm8001nx5vu8nb4apoy","tag_id":"ciexpcmmb001px5vutp77d6dv","_id":"ciexpcmmd001sx5vukxq8a1mb"},{"post_id":"ciexpcmm8001nx5vu8nb4apoy","tag_id":"ciexpcmmc001qx5vunmyl65ya","_id":"ciexpcmmd001tx5vuqgqjz308"},{"post_id":"ciexpcmmf001ux5vuuixwsih2","tag_id":"ciexpcmmi001wx5vuc0p3toh2","_id":"ciexpcmmk001zx5vu0fd3drhx"},{"post_id":"ciexpcmmf001ux5vuuixwsih2","tag_id":"ciexpcmmj001xx5vuy1t4el4h","_id":"ciexpcmmk0020x5vu7p0kvczm"},{"post_id":"ciexpcmml0021x5vu42vi2fod","tag_id":"ciexpcmmi001wx5vuc0p3toh2","_id":"ciexpcmmq0024x5vuivi5uzts"},{"post_id":"ciexpcmml0021x5vu42vi2fod","tag_id":"ciexpcmmp0023x5vuujqlp4ga","_id":"ciexpcmmq0025x5vus5k3srgy"},{"post_id":"ciexpcmms0026x5vupp31bnlg","tag_id":"ciexpcmmi001wx5vuc0p3toh2","_id":"ciexpcmmu0028x5vu67n1h2uw"},{"post_id":"ciexpcmms0026x5vupp31bnlg","tag_id":"ciexpcmmp0023x5vuujqlp4ga","_id":"ciexpcmmu0029x5vu8m6xhft1"},{"post_id":"ciexpcmms0026x5vupp31bnlg","tag_id":"ciexpcmmj001xx5vuy1t4el4h","_id":"ciexpcmmu002ax5vulwy0t97t"},{"post_id":"ciexpcmmw002bx5vurqipvno4","tag_id":"ciexpcmmi001wx5vuc0p3toh2","_id":"ciexpcmmy002dx5vu71pe76pc"},{"post_id":"ciexpcmmw002bx5vurqipvno4","tag_id":"ciexpcmmp0023x5vuujqlp4ga","_id":"ciexpcmmy002ex5vumm6uig70"},{"post_id":"ciexpcmmw002bx5vurqipvno4","tag_id":"ciexpcmmj001xx5vuy1t4el4h","_id":"ciexpcmmy002fx5vur3z9xpoe"},{"post_id":"ciexpcmn2002gx5vugsa6a4xe","tag_id":"ciexpcmn3002ix5vuqd5ko0sq","_id":"ciexpcmn5002lx5vuoi45946s"},{"post_id":"ciexpcmn2002gx5vugsa6a4xe","tag_id":"ciexpcmn5002jx5vug7bpnilp","_id":"ciexpcmn5002mx5vu9s0h4v7c"},{"post_id":"ciexpcmn6002nx5vu6cf6gbce","tag_id":"ciexpcmn3002ix5vuqd5ko0sq","_id":"ciexpcmn8002qx5vujstzmzhy"},{"post_id":"ciexpcmn6002nx5vu6cf6gbce","tag_id":"ciexpcmn8002px5vucjlzjve3","_id":"ciexpcmn8002rx5vu9b738q2c"},{"post_id":"ciexpcmn6002nx5vu6cf6gbce","tag_id":"ciexpcmn5002jx5vug7bpnilp","_id":"ciexpcmn8002sx5vu2njw2d15"},{"post_id":"ciexpcmn9002tx5vuomv35i04","tag_id":"ciexpcmn3002ix5vuqd5ko0sq","_id":"ciexpcmna002wx5vupavz3wt5"},{"post_id":"ciexpcmn9002tx5vuomv35i04","tag_id":"ciexpcmna002vx5vuonj5q8ep","_id":"ciexpcmnb002yx5vu9hjuq066"},{"post_id":"ciexpcmn9002tx5vuomv35i04","tag_id":"ciexpcmn5002jx5vug7bpnilp","_id":"ciexpcmnb002zx5vuleom8uie"},{"post_id":"ciexpcmnh0032x5vuzr6efy00","tag_id":"ciexpcmnj0034x5vueqny2gjb","_id":"ciexpcmnk0035x5vuephxizw7"},{"post_id":"ciexpcmnl0037x5vufzz1scy6","tag_id":"ciexpcmnj0034x5vueqny2gjb","_id":"ciexpcmnm0039x5vucat9ouro"},{"post_id":"ciexpcmno003ax5vurc1zqv3y","tag_id":"ciexpcmnj0034x5vueqny2gjb","_id":"ciexpcmnv003cx5vusup5zwye"},{"post_id":"ciexpcmnw003dx5vua8twccjx","tag_id":"ciexpcmnj0034x5vueqny2gjb","_id":"ciexpcmnx003fx5vuk8nnro88"},{"post_id":"ciexpcmnw003dx5vua8twccjx","tag_id":"ciexpcmmb001px5vutp77d6dv","_id":"ciexpcmny003gx5vugrwmxqj4"},{"post_id":"ciexpcmnz003hx5vudiu9chkq","tag_id":"ciexpcmo2003jx5vubtx27d2q","_id":"ciexpcmo3003kx5vug2qdu4uc"},{"post_id":"ciexpcmnz003hx5vudiu9chkq","tag_id":"ciexpcmmb001px5vutp77d6dv","_id":"ciexpcmo3003mx5vuvo8sw123"},{"post_id":"ciexpcmo6003nx5vumlgxo0qx","tag_id":"ciexpcmkj0002x5vukcbddz0a","_id":"ciexpcmo9003px5vusi6zuduo"}],"Tag":[{"name":"redis","_id":"ciexpcmkj0002x5vukcbddz0a"},{"name":"tablib","_id":"ciexpcmks0008x5vu8y9dw8c0"},{"name":"velocity","_id":"ciexpcmkv000cx5vua4o3re6c"},{"name":"spring特性实践","_id":"ciexpcmky000gx5vuc7av0j0a"},{"name":"spring","_id":"ciexpcmky000hx5vu1lcabbj0"},{"name":"spring整合实践","_id":"ciexpcml3000nx5vuhsxhwurj"},{"name":"linux","_id":"ciexpcmld000wx5vumgpic0nm"},{"name":"ubuntu","_id":"ciexpcmle000xx5vua5rp7vwc"},{"name":"软件","_id":"ciexpcmlf000zx5vun8i0ad3n"},{"name":"抓包","_id":"ciexpcmlo0015x5vu12g41ai0"},{"name":"nginx","_id":"ciexpcmls001bx5vu3r0skrvf"},{"name":"五笔","_id":"ciexpcmm4001kx5vurmfu4d67"},{"name":"小记","_id":"ciexpcmmb001px5vutp77d6dv"},{"name":"命令","_id":"ciexpcmmc001qx5vunmyl65ya"},{"name":"jenkins","_id":"ciexpcmmi001wx5vuc0p3toh2"},{"name":"问题","_id":"ciexpcmmj001xx5vuy1t4el4h"},{"name":"持续集成","_id":"ciexpcmmp0023x5vuujqlp4ga"},{"name":"java","_id":"ciexpcmn3002ix5vuqd5ko0sq"},{"name":"集锦","_id":"ciexpcmn5002jx5vug7bpnilp"},{"name":"服务器","_id":"ciexpcmn8002px5vucjlzjve3"},{"name":"开发工具","_id":"ciexpcmna002vx5vuonj5q8ep"},{"name":"git","_id":"ciexpcmnj0034x5vueqny2gjb"},{"name":"mysql","_id":"ciexpcmo2003jx5vubtx27d2q"}]}}